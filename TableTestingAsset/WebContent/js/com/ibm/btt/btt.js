/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["com.ibm.btt.util.I18nBundle"]){dojo._hasResource["com.ibm.btt.util.I18nBundle"]=true;dojo.provide("com.ibm.btt.util.I18nBundle");dojo.declare("com.ibm.btt.util.I18nBundle",null,{bundle:null,constructor:function(_1,_2,_3){try{dojo.requireLocalization(_1,_2,_3, "");this.bundle=dojo.i18n.getLocalization(_1,_2,_3);}catch(e){console.info("Can not load NLS resources. packageName="+_1+", bundleName="+_2+", locale="+_3);this.bundle=undefined;}},getMessage:function(_4,_5){if(typeof (this.bundle)!="undefined"&&typeof (_4)!="undefined"&&typeof (this.bundle[_4])!="undefined"){if((_5!==undefined)&&(dojo.isArray(_5))){var _6=this.bundle[_4];var i=0;_6=dojo.replace(_6,dojo.hitch(_5,function(_7,k){if(i<_5.length){if(_5[i]!==undefined&&_5[i++]!==null){return _5[i-1];}}return "{"+k+"}";}));return _6;}else{if(_5!==undefined&&_5!==null&&dojo.isObject(_5)){return dojo.replace(this.bundle[_4],dojo.hitch(_5,function(_8,k){var _9=dojo.getObject(k,false,_5);if(_9!==null&&_9!==undefined){return _9;}else{return "{"+k+"}";}}));}else{if(_5!==undefined&&_5!==null){var _a=[];for(var i=1;i<arguments.length;i++){_a.push(arguments[i]);}return arguments.callee.apply(this,[_4,_a]);}else{return this.bundle[_4];}}}}else{return undefined;}}});}if(!dojo._hasResource["com.ibm.btt.util.I18nUtil"]){dojo._hasResource["com.ibm.btt.util.I18nUtil"]=true;dojo.provide("com.ibm.btt.util.I18nUtil");(function(){I18nUtil={getI18nString:function(_b,_c){if((_b===null)||(_b===undefined)||(_b==="")){return _b;}var _d="%";var _e="/";_b=_b.toString();var _f=_b.substring(0,1);if(_b.substring(0,1)!=_d){return _b;}else{var _10=_b.replace(_d,"");var tmp=_10.split(_e);var _11=tmp[0].substring(0,tmp[0].lastIndexOf("."));var _12=tmp[0].substring(tmp[0].lastIndexOf(".")+1,tmp[0].length);var _13=tmp[1];if(typeof (_11)=="undefined"||typeof (_12)=="undefined"||_11==""||_12==""){return _b;}var _14=new com.ibm.btt.util.I18nBundle(_11,_12);var _15=_14.getMessage(_13,_c);if(_15==undefined||_15==null){return _b;}else{return _15;}}}};})();}if(!dojo._hasResource["com.ibm.btt.util.StringUtil"]){dojo._hasResource["com.ibm.btt.util.StringUtil"]=true;dojo.provide("com.ibm.btt.util.StringUtil");(function(){StringUtil={escapeHTML:function(_16){if(_16){var _17=_16.replace(new RegExp("\r\n","g"),"\n");_17=_17.replace(new RegExp("\n","g"),"<br/>");return StringUtil.replaceAll(_17," ","&nbsp;");}else{return _16;}},replaceAll:function(str,_18,_19){if(str&&_18&&_19){return str.replace(new RegExp(_18,"gm"),_19);}else{return str;}},removeWarp:function(str){if(str){var _1a=str.replace(new RegExp("\r","g"),"");_1a=_1a.replace(new RegExp("\n","g"),"");return _1a;}else{return str;}}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetMixin",null,{visibility:"visible",accessKey:"",hint:"",postCreate:function(){this.applyAccessKey();this.inherited(arguments);},getI18NString:function(key,_1b){return I18nUtil.getI18nString(key,_1b);},replaceWrap:function(){},_setVisibilityAttr:function(_1c){this.visibility=_1c;if(_1c=="gone"){dojo.style(this.domNode,"visibility","");dojo.style(this.domNode,"display","none");}else{if(_1c=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","");}}},_setHintAttr:function(_1d){this.hint=_1d;this.domNode.title=StringUtil.removeWarp(this.getI18NString(_1d));},isFocusable:function(){if(dojo.style(this.domNode,"visibility")=="hidden"){return false;}else{if(this.disabled){return false;}else{return this.inherited(arguments);}}},applyAccessKey:function(){if(this.focusNode&&this.accessKey){this.focusNode.setAttribute("accessKey",this.accessKey);}},handleLenUint:function(_1e){var _1f=function(src,_20){var reg=new RegExp(_20+"$");return reg.test(src);};if(_1f(_1e,"px")||_1f(_1e,"%")||_1f(_1e,"em")){return _1e;}else{return _1e+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Anchor"]){dojo._hasResource["com.ibm.btt.dijit.Anchor"]=true;dojo.provide("com.ibm.btt.dijit.Anchor");dojo.declare("com.ibm.btt.dijit.Anchor",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<a class='dijitLabelBase' dojoAttachEvent='onclick:_onClick'></a>",action:"#",target:"_parent",bttParams:"",text:"",tabIndex:"0",disabled:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{target:{node:"domNode"},tabIndex:{node:"domNode"},text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},disabled:{node:"domNode"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);},_parameterHandler:function(e){var _21="";var _22=dojo.fromJson(e);for(var _23 in _22){if(typeof (_23)!="undefined"){var _24=_22[_23];if(_21==""){_21+=_23+"="+_24;}else{_21+="&"+_23+"="+_24;}}}return _21;},_setActionAttr:function(_25){this.action=_25;var _26="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_26=this.action;if(this.bttParams!=""){if(_26.indexOf("?")==-1){_26+="?";}if(this.bttParams!=""){var _27=this._parameterHandler(this.bttParams);if(_26.substring(_26.length-1)=="?"){_26+=_27;}else{_26+="&"+_27;}}}}else{_26="javascript:void(0)";}this.domNode.href=_26;},_setTextAttr:function(_28){this.text=_28;this.domNode.innerHTML=this.getI18NString(_28);},_setDisabledAttr:function(_29){this.disabled=_29;},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}},onClick:function(e){},_setTextWrapAttr:function(_2a){this.textWrap=_2a;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setWidthAttr:function(_2b){if(this.width!=""){this.width=_2b;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2c){if(this.height!=""){this.height=_2c;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Button"]){dojo._hasResource["com.ibm.btt.dijit.Button"]=true;dojo.provide("com.ibm.btt.dijit.Button");dojo.declare("com.ibm.btt.dijit.Button",[dijit.form.Button,com.ibm.btt.dijit.AbstractWidgetMixin],{bttParams:"",icon:"",text:"",inValid:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.Button.prototype.attributeMap,{visibility:{node:"domNode"},text:{node:"textNode",type:"innerHTML"},icon:{node:"iconImageNode",type:"attribute",attribute:"src"},width:{node:"domNode"},height:{node:"domNode"}}),buildRendering:function(){this.inherited(arguments);this.iconImageNode=dojo.create("img",{"style":"display:none;"},this.containerNode,"last");this.textNode=dojo.create("span",{"class":"dijitLabelBase"},this.containerNode,"last");dojo.style(this.focusNode,"overflow","hidden");dojo.addClass(this.focusNode.parentNode,"dijitLabelBase");},postCreate:function(){this.inherited(arguments);this._setIconAttr(this.icon);},_setTextAttr:function(_2d){this.text=_2d;this.textNode.innerHTML=this.getI18NString(_2d);},_setTextWrapAttr:function(_2e){this.textWrap=_2e;if(this.textWrap){dojo.addClass(this.textNode,"dijitLabelWrap");}else{dojo.removeClass(this.textNode,"dijitLabelWrap");}},_setIconAttr:function(_2f){this.icon=_2f;this.iconImageNode.src=_2f;if(_2f===""||typeof (_2f)==="undefined"){dojo.style(this.iconImageNode,"display","none");}else{dojo.style(this.iconImageNode,"display","");}},_setWidthAttr:function(_30){if(_30!=""){this.width=_30;dojo.style(this.focusNode.parentNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_31){if(_31!=""){this.height=_31;dojo.style(this.focusNode.parentNode,"height",this.handleLenUint(this.height));}},_setInValidAttr:function(_32){this.inValid=_32;if(this.type=="submit"){var _33=this._getParentForm();if(_33&&_33.setSubmitButtonState){_33.setSubmitButtonState();}else{this.set("disabled",_32);}}else{this.set("disabled",_32);}},_onButtonClick:function(e){var _34=this._getParentForm();if(_34&&this.get("disabled")==false&&this.type=="cancel"){this._onClick(e);this._doCancelAction(_34);e.preventDefault();}else{if(_34&&this.get("disabled")==false&&this.type=="save"){this._onClick(e);this._doSaveAction(_34);e.preventDefault();}else{if(_34){_34._lastClickedButton=this;}this.inherited(arguments);}}},_getParentForm:function(){for(var _35=this.domNode;_35.parentNode;_35=_35.parentNode){var _36=dijit.byNode(_35);if(_36&&typeof _36._onSubmit=="function"){return _36;}}},_doCancelAction:function(_37){var _37=this._createHiddenForm(_37,dojo.fromJson(this.bttParams));_37.submit();},_doSaveAction:function(_38){var _38=this._getParentForm();if(_38.onFormSubmit){_38.onFormSubmit();}var _39=_38.get("validValue");var _38=this._createHiddenForm(_38,dojo.mixin(_39,dojo.fromJson(this.bttParams)));_38.submit();},_createHiddenForm:function(_3a,_3b){var _3a=dojo.create("form",{"style":"display:none;","action":_3a.get("action"),"method":_3a.get("method")},dojo.body(),"last");var _3c=[];for(var _3d in _3b){if(_3d!=undefined&&_3d!=null&&_3d!=""){_3c=_3c.concat(this._convertToKeyValuePair(_3d,_3b[_3d]));}}for(var i=0;i<_3c.length;i++){dojo.create("input",{"type":"hidden","name":_3c[i].key,"value":_3c[i].value},_3a,"last");}return _3a;},_convertToKeyValuePair:function(_3e,_3f){var res=[];if(dojo.isObject(_3f)){for(var key in _3f){if(key!=undefined&&key!=null&&key!=""){res=res.concat(this._convertToKeyValuePair(_3e+"."+key,_3f[key]));}}}else{if(dojo.isArray(_3f)){for(var i=0;i<_3f.length;i++){res=res.concat(this._convertToKeyValuePair(_3e+"."+i,_3f[i]));}}else{res.push({"key":_3e,"value":_3f});}}return res;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckBox"]){dojo._hasResource["com.ibm.btt.dijit.CheckBox"]=true;dojo.provide("com.ibm.btt.dijit.CheckBox");dojo.declare("com.ibm.btt.dijit.CheckBox",[dijit.form.CheckBox,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",visibility:"visible",uncheckedField:null,checkedValue:"true",unCheckedValue:"false",isChecked:false,checked:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.CheckBox.prototype.attributeMap,{isChecked:{node:"domNode",type:"attribute"},style:{node:"labelNode",type:"attribute"},visibility:{node:"domNode"},text:{node:"labelNode",type:"innerHTML"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");this.set("visibility",this.visibility);},postCreate:function(){this.inherited(arguments);this._setSubmitValue();this.set("value",this.checkedValue);if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},setUncheckedValue:function(arg){if(!this.get("name")){return;}if(arg==true){if(this.uncheckedField==null){this.uncheckedField=dojo.create("input",{type:"hidden",value:this.unCheckedValue,name:this.get("name")});}dojo.place(this.uncheckedField,this.focusNode,"after");}else{if(this.uncheckedField!=null){dojo.destroy(this.uncheckedField);}}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},_setSubmitValue:function(){if(this.get("isChecked")){this.setUncheckedValue(false);}else{this.setUncheckedValue(true);}},_setIsCheckedAttr:function(_40){this.set("checked",_40);},_setCheckedAttr:function(_41){if(_41==false||_41=="false"||_41==""){this.isChecked=false;}else{this.isChecked=true;}this._setSubmitValue();this.inherited(arguments);},_setTextAttr:function(_42){this.text=_42;this.labelNode.innerHTML=this.getI18NString(_42);},_setStyleAttr:function(_43){dojo.attr(this.labelNode,"style",_43);},_setClassAttr:function(_44){dojo.attr(this.labelNode,"class",_44);},_setHintAttr:function(_45){this.hint=_45;var _46=StringUtil.removeWarp(this.getI18NString(_45));this.domNode.title=_46;this.labelNode.title=_46;},_setVisibilityAttr:function(_47){this.visibility=_47;if(_47==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_47==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_48){this.inherited(arguments);if(_48==="true"||_48===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_setDisabledAttr:function(_49){this.inherited(arguments);if(this.uncheckedField!=null){dojo.attr(this.uncheckedField,"disabled",_49);}},_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}},_setTextWrapAttr:function(_4a){this.textWrap=_4a;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_4b){if(this.width!=""){this.width=_4b;var _4c=_4b.replace(new RegExp("px","gm"),"");try{_4c=Number(_4c);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_4b+" to number.");return;}var box=dojo.marginBox(this.domNode);var _4d=_4c-box.w;if(_4d<0){_4d=0;}dojo.style(this.labelNode,"width",_4d+"px");}},_setHeightAttr:function(_4e){if(this.height!=""){this.height=_4e;var _4f=_4e.replace(new RegExp("px","gm"),"");try{_4f=Number(_4f);}catch(e){console.error("Illegal input argument. Can not convert input height:"+_4e+" to number.");return;}var box=dojo.marginBox(this.domNode);var _50=_4f-box.h;if(_50<0){_50=0;}dojo.style(this.labelNode,"height",_50+"px");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]){dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]=true;dojo.provide("com.ibm.btt.dijit.ValidationTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.ValidationTextBox",[dijit.form.ValidationTextBox,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",errorDisplayer:null,singleFieldErrorMessage:"",attributeMap:dojo.delegate(dijit.form.ValidationTextBox.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},startup:function(){this.inherited(arguments);if(this.singleFieldErrorMessage){try{var _51=dojo.fromJson(this.singleFieldErrorMessage);if(dojo.isArray(_51)){this.showErrorMessage(_51);}}catch(e){this.showErrorMessage(this.singleFieldErrorMessage);}}},validator:function(_52,_53){var _54=typeof (this.regExpGen(_53))!="undefined"&&this.testRegularExpression(this.regExpGen(_53),_52);if(!_54){this.invalidMessage=this.bundle.getMessage("regularExpressionMessage");return false;}else{var res=(!this.required||!this._isEmpty(_52))&&(this._isEmpty(_52)||this.parse(_52,_53)!==undefined);if(res){return true;}else{this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}}},testRegularExpression:function(reg,_55){return (new RegExp("^(?:"+reg+")"+(this.required?"":"?")+"$")).test(_55);},_setWidthAttr:function(_56){if(_56!=""){this.width=_56;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setVisibilityAttr:function(_57){this.visibility=_57;var _58;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[0])!="undefined"){_58=this.domNode.children[0].children[0];}else{_58=null;}if(_57=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_58!=null){dojo.style(_58,"visibility","");}}else{if(_57=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_58!=null){dojo.style(_58,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_58!=null){dojo.style(_58,"visibility","");}}}},_onFocus:function(by){this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);},onShowErrorFlag:false,showErrorMessage:function(_59){if(dojo.isArray(_59)){var _5a=[];for(var i=0;i<_59.length;i++){var _5b=this.getI18NString(_59[i]);if(_5b==null){_5b=_59[i];}_5a.push(_5b);}if(_5a.length!=0){var _5c=_5a.join(" ");}else{var _5c="";}}else{var _5d=[];var _5e=[];if(arguments.length==0){arguments[0]="";_59="";}for(var i=1;i<arguments.length;i++){_5e[i-1]=arguments[i];}_5d[0]=arguments[0];_5d[1]=_5e;_5d[2]=true;var _5c=this.getI18NString.apply(this,_5d);if(_5c==null){_5c=_59;}}if(_59!=""){this._message=_59;dijit.hideTooltip(this.domNode);dojo.window.scrollIntoView(this.focusNode);this.onShowErrorFlag=true;if(!this.errorDisplayer){this.errorDisplayer=new dijit._MasterTooltip();}this.errorDisplayer.show(_5c,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}}this._refreshState();},validate:function(_5f){if(this.onShowErrorFlag){this.state="Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",false?"false":"true");if(_5f){if(this.state=="Error"){message=this.getErrorMessage(true);}else{message=this.getPromptMessage(true);}this._maskValidSubsetError=true;}return false;}else{return this.inherited(arguments);}},destroy:function(){this.displayMessage("");if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);if(this.errorDisplayer){this.errorDisplayer.destroy();this.errorDisplayer=undefined;}}});dojo.declare("com.ibm.btt.dijit.MappedTextBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.MappedTextBox],{});dojo.declare("com.ibm.btt.dijit.RangeBoundTextBox",[com.ibm.btt.dijit.MappedTextBox,dijit.form.RangeBoundTextBox],{postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},rangeCheck:function(_60,_61){if("min" in _61&&this.compare(_60,_61.min)<0){this.rangeMessage=this.bundle.getMessage("rangeMinMessage",{value:_61.min});return false;}if("max" in _61&&this.compare(_60,_61.max)>0){this.rangeMessage=this.bundle.getMessage("rangeMaxMessage",{value:_61.max});return false;}return true;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ComboBox"]){dojo._hasResource["com.ibm.btt.dijit.ComboBox"]=true;dojo.provide("com.ibm.btt.dijit.ComboBox");dojo.declare("com.ibm.btt.dijit.ComboBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.ComboBox,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",storeURL:"",labelField:"label",storeDataFormat:{itemLabel:this.labelField},asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.ComboBox.prototype.attributeMap,{visibility:{node:"domNode"}}),postMixInProperties:function(){this.storeDataFormat.itemLabel=this.labelField;this.searchAttr=this.storeDataFormat.itemLabel;var _62=this.srcNodeRef;var _63={label:this.storeDataFormat.itemLabel,items:[]};var _64=this.storeDataFormat.itemLabel;var _65=this;dojo.query("> option",_62).forEach(function(_66){var _67={};_67[_64]=_65.getI18NString(dojo.trim(_66.innerHTML));_63.items.push(_67);});if(_63.items.length==0){if(this.storeData){_63=this._formatStoreData(this.storeData);}}this.store=new dojo.data.ItemFileReadStore({data:_63});this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){this.loadStoreFromURL(this.storeURL);}},setStoreData:function(_68){var _68=this._formatStoreData(_68);this.store.clearOnClose=true;this.store.data=_68;this.store._jsonData=null;this.store.close();},_formatStoreData:function(_69){var _6a={label:this.storeDataFormat.itemLabel,items:[]};if(_69 instanceof Array){for(var i=0;i<_69.length;i++){if(_69[i]!=null){var _6b={};if(dojo.isObject(_69[i])){if(_69[i][_6a.label]!=null){_6b[_6a.label]=this.getI18NString(_69[i][_6a.label]);}}else{if(dojo.isString(_69[i])){_6b[_6a.label]=this.getI18NString(_69[i]);}else{_6b[_6a.label]=_69[i].toString();}}if(_6b[_6a.label]){_6a.items.push(_6b);}}}}else{if(_69 instanceof Object){for(var p in _69){var _6b={};_6b[_6a.label]=this.getI18NString(p);_6a.items.push(_6b);}}}return _6a;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _6c={url:this.storeURL,handleAs:"json",load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_6c);},_handleStoreLoadingResponse:function(_6d){this.setStoreData(_6d);this.onAsyncOK();},_setVisibilityAttr:function(_6e){this.visibility=_6e;var _6f;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_6f=this.domNode.children[0].children[1];}else{_6f=null;}if(_6e=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_6f!=null){dojo.style(_6f,"visibility","");}}else{if(_6e=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_6f!=null){dojo.style(_6f,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_6f!=null){dojo.style(_6f,"visibility","");}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]){dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]=true;dojo.provide("com.ibm.btt.dijit.NumberTextBox");dojo.declare("com.ibm.btt.dijit.NumberTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.NumberTextBox],{numberType:"",minimumNumber:NaN,maximumNumber:NaN,locale:dojo.locale,pattern:"",decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);if(this.numberType=="byte"||this.numberType=="int"||this.numberType=="short"||this.numberType=="integer"||this.numberType=="long"||this.numberType=="bigInteger"){this.fractional=false;}else{this.fractional=true;}if(!isNaN(this.minimumNumber)){if(this.fractional){this.constraints.min=Number(this.minimumNumber);}else{this.constraints.min=parseInt(this.minimumNumber);}}if(!isNaN(this.maximumNumber)){if(this.fractional){this.constraints.max=Number(this.maximumNumber);}else{this.constraints.max=parseInt(this.maximumNumber);}}this.constraints.locale=this.locale;if(this.pattern!=""){this.constraints.pattern=this.pattern;}this.constraints.fractional=this.fractional;if(!isNaN(this.decimalPlaces)){this.decimalPlaces=Number(this.decimalPlaces);}if(this.fractional&&this.decimalPlaces>0){this.constraints.places=this.decimalPlaces;}this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},isNumber:function(_70){return /^-?\d+(\.\d+)?$/.test(_70);},validator:function(_71,_72){var _73;if(this.isNumber(_71)){_73=_71;}else{_73=this.parse(_71,this.constraints);if(!this.isNumber(_73)&&_71!=""){this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}else{if(new RegExp("^[+-]?\\d+$").test(_73)&&this.decimalPlaces>0){var con={};con["max"]=this.constraints["max"];con["min"]=this.constraints["min"];con["places"]=this.constraints["places"];con["fractional"]=this.constraints["fractional"];con["locale"]=this.constraints["locale"];_73+=".";for(var i=0;i<this.decimalPlaces;i++){_73+="0";}}}}if(this.isNumber(_73)&&this.fractional&&this.decimalPlaces>0&&!(new RegExp("^[+-]?.+[.,]\\d{"+this.decimalPlaces+"}$").test(_71))){this.invalidMessage=this.bundle.getMessage("decimalPlacesMessage",{value:this.decimalPlaces});return false;}if(this.isNumber(_73)&&this.numberType=="byte"&&(_73>127||_73<-128)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:127,min:-128});return false;}if(this.isNumber(_73)&&this.numberType=="short"&&(_73>32767||_73<-32768)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:32767,min:-32768});return false;}if(this.isNumber(_73)&&this.numberType=="int"&&(_73>2147483647||_73<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_73)&&this.numberType=="integer"&&(_73>2147483647||_73<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_73)&&this.numberType=="long"&&(_73>9223372036854776000||_73<-9223372036854776000)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:9223372036854776000,min:-9223372036854776000});return false;}if(_73.toString().replace(new RegExp(".","g"),"").length>16){this.invalidMessage=this.bundle.getMessage("numberOutOfRange");return false;}return this.inherited(arguments);},_setValueAttr:function(_74,_75,_76){if(typeof _74==="string"&&_74!==""){var _77=Number(_74);if(isNaN(_77)&&_74&&_74!=""){var _78={};if(this.constraints["pattern"]){_78["pattern"]=this.constraints["pattern"];}_74=this.parse(_74,_78);}else{_74=_77;}}this.inherited(arguments);},create:function(_79,_7a){this.inherited(arguments);var _7b=dojo.attr(_7a,"value");if(_7b&&_7b!=""){var _7c={};if(this.constraints["pattern"]){_7c["pattern"]=this.constraints["pattern"];}_79.value=this.parse(_7b,_7c);if(isNaN(_79.value)){_79.value=Number(_7b);}this.set("value",_79.value);}},serialize:function(val,_7d){return this.format(val,_7d);}});}if(!dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]){dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]=true;dojo.provide("com.ibm.btt.dijit.CurrencyTextBox");dojo.declare("com.ibm.btt.dijit.CurrencyTextBox",[com.ibm.btt.dijit.NumberTextBox,dijit.form.CurrencyTextBox],{decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);this.decimalPlaces=this.constraints.places;},serialize:function(val,_7e){return isNaN(val)?"":(val.toString?val.toString():"");}});}if(!dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]){dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]=true;dojo.provide("com.ibm.btt.dijit.DateTextBox");dojo.declare("com.ibm.btt.dijit.DateTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.DateTextBox],{maximumDate:"",minimumDate:"",locale:dojo.locale,pattern:"",postMixInProperties:function(){this.inherited(arguments);this.lang=this.locale;this.constraints.locale=this.locale;if(this.minimumDate!=""){if(this.isToday(this.minimumDate)){this.constraints.min=this.parseToday(this.minimumDate);}else{this.constraints.min=dojo.date.stamp.fromISOString(this.minimumDate);}}if(this.maximumDate!=""){if(this.isToday(this.maximumDate)){this.constraints.max=this.parseToday(this.maximumDate);}else{this.constraints.max=dojo.date.stamp.fromISOString(this.maximumDate);}}if(this.pattern!=""){this.constraints.datePattern=this.pattern;}},create:function(_7f,_80){if(_7f.value==null){if(_80.value!=null&&_80.value!=""&&_7f.pattern!=null&&_7f.pattern!=""){try{var _81={selector:"date",datePattern:_7f.pattern,fullYear:true};var val=dojo.date.locale.parse(_80.value,_81);_7f.value=val;}catch(e){}}}this.inherited(arguments);},serialize:function(val,_82){if(val.toGregorian){val=val.toGregorian();}if(this.pattern!=""){return this.format(val,_82);}else{return dojo.date.stamp.toISOString(val,_82);}},isToday:function(_83){if(_83.replace(" ","").toLowerCase().indexOf("today")>-1){return true;}else{return false;}},parseToday:function(_84){var _85=_84.replace("today","");var _86="";var _87=0;var _88=0;var day=0;var _89=new Date();_89.setHours(0);_89.setMinutes(0);_89.setSeconds(0);_89.setMilliseconds(0);if(_85.indexOf("+")>-1){_86="plus";_85=_85.replace("+","#");}if(_85.indexOf("-")>-1){_86="sub";_85=_85.replace("-","#");}if(_85.indexOf("y")>-1){_87=_85.substring(_85.lastIndexOf("#")+1,_85.indexOf("y"));_85=_85.replace("y","#");}if(_85.indexOf("m")>-1){_88=_85.substring(_85.lastIndexOf("#")+1,_85.indexOf("m"));_85=_85.replace("m","#");}if(_85.indexOf("d")>-1){day=_85.substring(_85.lastIndexOf("#")+1,_85.indexOf("d"));}if("plus"==_86){_89=dojo.date.add(_89,"year",+_87);_89=dojo.date.add(_89,"month",+_88);_89=dojo.date.add(_89,"day",+day);}else{_89=dojo.date.add(_89,"year",-_87);_89=dojo.date.add(_89,"month",-_88);_89=dojo.date.add(_89,"day",-day);}return _89;},_setValueAttr:function(_8a,_8b,_8c){if(typeof (_8a)=="string"||_8a instanceof String){var val=null;if(this.pattern==""){_8a=dojo.date.stamp.fromISOString(_8a);}else{var _8d={selector:"date",datePattern:this.pattern,fullYear:true};_8a=dojo.date.locale.parse(_8a,_8d);}}this.inherited(arguments);},_getValueAttr:function(){if(this.textbox.value==""){return null;}else{return this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.util.AjaxUtil"]){dojo._hasResource["com.ibm.btt.util.AjaxUtil"]=true;dojo.provide("com.ibm.btt.util.AjaxUtil");(function(){AjaxUtil={ajaxOperationUrl:"Ajax",constants:{"BTT_OPERATIONNAME":"dse_operationName","BTT_PAGEID":"dse_pageId","BTT_SESSIONID":"dse_sessionId","BTT_ERRORPAGE":"dse_errorPage","BTT_PROCESSORID":"dse_processorId"},xhrPost:function(_8e,_8f){_8e.postData=dojo.toJson(_8f);if(typeof _8e.url=="undefined"){_8e.url=this.ajaxOperationUrl;}if(typeof _8e.handleAs=="undefined"){_8e.handleAs="text";}if(typeof _8e.success=="undefined"){_8e.load=function(e){console.info("Ajax request response from ajax channel. "+e);};}else{_8e.load=_8e.success;delete _8e.success;}if(typeof _8e.error=="undefined"){_8e.error=function(e){console.info("Ajax request error. "+e);};}dojo.xhrPost(_8e);},prepareBTTParams:function(_90){var obj={};if(_90!=undefined){if(_90[this.constants.BTT_ERRORPAGE]){obj[this.constants.BTT_ERRORPAGE]=_90[this.constants.BTT_ERRORPAGE];}if(_90[this.constants.BTT_OPERATIONNAME]){obj[this.constants.BTT_OPERATIONNAME]=_90[this.constants.BTT_OPERATIONNAME];}if(_90[this.constants.BTT_PAGEID]){obj[this.constants.BTT_PAGEID]=_90[this.constants.BTT_PAGEID];}else{obj[this.constants.BTT_PAGEID]="-1";}if(_90[this.constants.BTT_PROCESSORID]){obj[this.constants.BTT_PROCESSORID]=_90[this.constants.BTT_PROCESSORID];}if(_90[this.constants.BTT_SESSIONID]){obj[this.constants.BTT_SESSIONID]=_90[this.constants.BTT_SESSIONID];}}return obj;}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractAjaxMixin");dojo.declare("com.ibm.btt.dijit.AbstractAjaxMixin",null,{_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Form"),bttParams:"",asyncCode:"",asyncStatus:0,asyncErrorMessage:"",asyncOperation:"",callAsyncOperation:function(_91,_92,_93,_94){var _95=this.get("value");var _96=dojo.fromJson(this.bttParams);_96[AjaxUtil.constants.BTT_OPERATIONNAME]=_91;_96=AjaxUtil.prepareBTTParams(_96);AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_92,_94),error:dojo.hitch(this,"_handleOperationError",_92),"timeout":_93},dojo.mixin(_95,_96));},_handleOperationResponse:function(_97,_98,_99){try{var _9a=dojo.fromJson(_99||null);_99=_9a;}catch(e){this._handleHTMLResponse(_99);return;}this.asyncCode=_97;var _9b=null;var _9c=null;var _9d=null;if(dojo.isArray(_99)){_9b=_99[0].data;if(_99[0].validationError){_9c=_99[0].singleFieldErrors;_9d=_99[0].crossFieldErrors;}}else{_9b=_99;}if(_9b){if(_98&&dijit.byId(_98)){dijit.byId(_98).set("value",_9b);}else{this.set("value",_9b);}}if((_9c&&_9c.length!=0)||(_9d&&_9d.length!=0)){var _9e=this._getWidgetMap();this._handleSingleFieldErrors(_9c,_9e);this._handleCrossFieldErrors(_9d,_9e);}this.onAsyncOK();},_handleHTMLResponse:function(_9f){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:_9f})).show();},_getWidgetMap:function(){var map={};dojo.forEach(this.getDescendants(),function(_a0){if(!_a0.name){return;}var _a1=map[_a0.name]||(map[_a0.name]=[]);_a1.push(_a0);});return map;},_handleSingleFieldErrors:function(_a2,_a3){if(_a2!=null){for(var i=0;i<_a2.length;i++){if(_a3[_a2[i].id]){var _a4=_a3[_a2[i].id];if(_a4){for(var j=0;j<_a4.length;j++){if(_a4[j].showErrorMessage){_a4[j].showErrorMessage(_a2[i].msg);}}}}}}},_handleCrossFieldErrors:function(_a5,_a6){if(_a5!=null){var _a7=_a6["dse_errorMessages"];if(_a7){for(var j=0;j<_a7.length;j++){_a7[j].displayMessageArray(_a5);}}}},setStoreData:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_a8){if(!_a8.name){return;}var _a9=map[_a8.name]||(map[_a8.name]=[]);_a9.push(_a8);});for(var _aa in map){if(!map.hasOwnProperty(_aa)){continue;}var _ab=map[_aa],_ac=dojo.getObject(_aa,false,obj);if(_ac===undefined){continue;}if(!dojo.isArray(_ac)){_ac=[_ac];}dojo.forEach(_ab,function(w,i){if(w.setStoreData){w.setStoreData(_ac[i]);}});}},_handleOperationError:function(_ad,_ae){if(_ae.dojoType==="timeout"){this.asyncCode=_ad;this.asyncStatus=0;this.asyncErrorMessage=_ae.message;this.onAsyncTimeOut();}else{if(_ae.status!==undefined){this.asyncCode=_ad;this.asyncStatus=_ae.status;this.asyncErrorMessage=_ae.message;this.onAsyncError();}}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},_getValueAttr:function(){var obj={};var _af=this;dojo.forEach(this.getDescendants(),function(_b0){var _b1=_b0.name;if((!_b1||_b0.disabled||_b0.isNotSubmitted)&&(!_b0.storeDataName||!_b0.getEditableStroeData||((_b0 instanceof com.ibm.btt.dijit.Grid)&&_b0.readOnly))){return;}if(typeof (_b0.ajaxSubmit)!="undefined"&&_b0.ajaxSubmit==false){return;}if(_b0.storeDataName&&_b0.getEditableStroeData&&((_b0 instanceof com.ibm.btt.dijit.Grid)&&_b0.editable&&!_b0.readOnly)&&_b0.getEditableStroeData()){dojo.setObject(_b0.storeDataName,_af._convertValueToString(_b0.getEditableStroeData()),obj);}var _b2=_b0.get("value");if(_b2===undefined){return;}if((_b0 instanceof com.ibm.btt.dijit.Grid)&&(_b2==null||_b2==undefined)){return;}if(_b2==null){_b2="";}if(typeof _b0.checked!=="undefined"){if(/Radio/.test(_b0.declaredClass)){if(_b2!==false){dojo.setObject(_b1,_af._convertValueToString(_b2),obj);}else{_b2=dojo.getObject(_b1,false,obj);if(_b2===undefined){dojo.setObject(_b1,null,obj);}}}else{if(_b2!==false){dojo.setObject(_b1,_af._convertValueToString(_b2),obj);}}}else{if(typeof _b2=="number"&&_b0.serialize){_b2=_b0.serialize(_b2,_b0.constraints);}else{if(_b2!=null&&_b2 instanceof Date){if(_b0.serialize){_b2=_b0.serialize(_b2,_b0.constraints);}else{_b2=_b2.getFullYear()+"-"+(_b2.getMonth()+1)+"-"+_b2.getDate();}}}_b2=_af._convertValueToString(_b2);var _b3=dojo.getObject(_b1,false,obj);if(typeof _b3!="undefined"){if(dojo.isArray(_b3)){_b3.push(_b2);}else{dojo.setObject(_b1,[_b3,_b2],obj);}}else{dojo.setObject(_b1,_b2,obj);}}});return obj;},_convertValueToString:function(_b4){if(_b4===null){return null;}if(typeof _b4==="string"){return _b4;}else{if(typeof _b4==="number"||typeof _b4==="boolean"){return String(_b4);}else{if(typeof _b4==="object"){if(dojo.isArray(_b4)){for(var i=0;i<_b4.length;i++){_b4[i]=arguments.callee(_b4[i]);}}else{for(var p in _b4){_b4[p]=arguments.callee(_b4[p]);}}return _b4;}else{return null;}}}},_setValueAttr:function(obj){var map={};var _b5={};dojo.forEach(this.getDescendants(),function(_b6){if(_b6.storeDataName){var _b7=_b5[_b6.storeDataName]||(_b5[_b6.storeDataName]=[]);_b7.push(_b6);}if(!_b6.name){return;}var _b8=map[_b6.name]||(map[_b6.name]=[]);_b8.push(_b6);});for(var _b9 in _b5){var _ba=_b5[_b9];var _bb=dojo.getObject(_b9,false,obj);if(_bb!==undefined){dojo.forEach(_ba,function(w,i){w.setStoreData(i==0?_bb:dojo.clone(_bb));});}}for(var _b9 in map){if(!map.hasOwnProperty(_b9)){continue;}var _ba=map[_b9],_bc=dojo.getObject(_b9,false,obj);if(_bc===undefined){continue;}if(!dojo.isArray(_bc)){_bc=[_bc];}if(typeof _ba[0].checked!=="undefined"){dojo.forEach(_ba,function(w,i){w.set("value",dojo.indexOf(_bc,w.value)!=-1);});}else{if(_ba[0].multiple){_ba[0].set("value",_bc);}else{dojo.forEach(_ba,function(w,i){w.set("value",_bc[i]);});}}}},validValue:null,_getValidValueAttr:function(){var obj={};var _bd=this;dojo.forEach(this.getDescendants(),function(_be){var _bf=_be.name;if((!_bf||_be.disabled||_be.isNotSubmitted)&&(!_be.storeDataName||!_be.getEditableStroeData||((_be instanceof com.ibm.btt.dijit.Grid)&&_be.readOnly&&!_be.disabled))){return;}if(_be.state&&!(_be.get("state")==""||_be.get("state")=="Normal")){return;}if(typeof (_be.ajaxSubmit)!="undefined"&&_be.ajaxSubmit==false){return;}if(_be.storeDataName&&_be.getEditableStroeData&&((_be instanceof com.ibm.btt.dijit.Grid)&&!_be.readOnly)){var _c0=_be.getEditableStroeData();if(_c0){dojo.setObject(_be.storeDataName,_bd._convertValueToString(_c0),obj);}}var _c1=_be.get("value");if(_c1===undefined){return;}if(_c1==null){_c1="";}if(typeof _be.checked!=="undefined"){if(/Radio/.test(_be.declaredClass)){if(_c1!==false){dojo.setObject(_bf,_bd._convertValueToString(_c1),obj);}else{_c1=dojo.getObject(_bf,false,obj);if(_c1===undefined){dojo.setObject(_bf,null,obj);}}}else{if(_c1!==false){dojo.setObject(_bf,_bd._convertValueToString(_c1),obj);}}}else{if(typeof _c1=="number"&&_be.serialize){_c1=_be.serialize(_c1,_be.constraints);}else{if(_c1!=null&&_c1 instanceof Date){if(_be.serialize){_c1=_be.serialize(_c1,_be.constraints);}else{_c1=_c1.getFullYear()+"-"+(_c1.getMonth()+1)+"-"+_c1.getDate();}}}_c1=_bd._convertValueToString(_c1);if(_be.type!=="hidden"&&((_be.params.value&&_be.params.value==_c1)||(!_be.params.value&&""==_c1))){return;}var _c2=dojo.getObject(_bf,false,obj);if(typeof _c2!="undefined"){if(dojo.isArray(_c2)){_c2.push(_c1);}else{dojo.setObject(_bf,[_c2,_c1],obj);}}else{dojo.setObject(_bf,_c1,obj);}}});return obj;}});}if(!dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]){dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]=true;dojo.provide("com.ibm.btt.dijit._FormXValidationMixin");dojo.declare("com.ibm.btt.dijit._FormXValidationMixin",null,{xValidations:[],xValid:true,_xHintWidget:null,getPW:function(id,_c3){var _c4=dijit.byId(id).get(_c3);return _c4;},getW:function(id){return dijit.byId(id);},runWF:function(id,_c5,_c6){var _c7=dijit.byId(id);var _c8=[];for(var i=2;i<arguments.length;i++){_c8[i-2]=arguments[i];}var _c9=_c7[_c5].apply(_c7,_c8);return _c9;},xValidate:function(_ca){if(!_ca||_ca.length==0){return "";}var _cb=null;for(var i=0;i<_ca.length;i++){if(!_ca[i].cond.call(this)){_cb=_ca[i];break;}}return _cb;},_getActiveXValidationsForWidget:function(_cc){return this._getActiveXValidations(this._getXValidationRuleByWidget(_cc),_cc);},_getActiveXValidations:function(_cd,_ce){return dojo.filter(_cd,function(_cf){return dojo.every(_cf.widgets,function(id){return ((id==_ce)||(id!=_ce&&dijit.byId(id).get("value")!=""));});});},_getXValidationRuleByWidget:function(_d0){var _d1=dojo.filter(this.xValidations,function(_d2){return dojo.indexOf(_d2.widgets,_d0)>=0;});return _d1;},showXValidationMsg:function(_d3,_d4){if(_d4){this._hideXHint();this._xHintWidget=_d4;dijit.showTooltip(this.getI18NString(_d3),_d4.domNode);}},_hideXHint:function(){if(this._xHintWidget){_xHintWidget=null;dijit.hideTooltip(this._xHintWidget.domNode);}},destroy:function(){this.inherited(arguments);this._hideXHint();}});}if(!dojo._hasResource["com.ibm.btt.dijit.Form"]){dojo._hasResource["com.ibm.btt.dijit.Form"]=true;dojo.provide("com.ibm.btt.dijit.Form");dojo.declare("com.ibm.btt.dijit.Form",[dijit.form.Form,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin,com.ibm.btt.dijit._FormXValidationMixin],{bttErrorPage:"",validateOnSubmit:true,hiddenParamHandle:{},_isStarted:false,attributeMap:dojo.delegate(dijit.form.Form.prototype.attributeMap,{visibility:{node:"domNode"}}),create:function(){this.submitButton=new Array();this.submitButtonOS=new Array();this.inherited(arguments);this._events=[];this._events.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));},onLoaded:function(){},onFormSubmit:function(){},_setXValidationsAttr:function(_d5){this.xValidations=_d5;if(this.xValidate(this.xValidations)){this.xValid=false;this.setSubmitButtonState();}},_xValidateByWidget:function(_d6){var _d7=this.xValidate(this._getActiveXValidationsForWidget(_d6.get("id")));var _d8=_d6;if(!_d7){_d7=this.xValidate(this._getActiveXValidations(this.xValidations));_d8=_d7?dijit.byId(_d7.widgets[0]):_d6;}if(_d7){this.showXValidationMsg(_d7.hint,_d8);}var _d9;if(_d9=this.xValidate(this.xValidations)){if(!_d7){this.showXValidationMsg(_d9.hint,dijit.byId(_d9.widgets[0]));}this.xValid=false;}else{this.xValid=true;this._hideXHint();}this.setSubmitButtonState();},fireWidgetBlurEvent:function(_da){this._xValidateByWidget(_da);},fireWidgetChangeEvent:function(_db){this._xValidateByWidget(_db);this.onWidgetChange();},onWidgetChange:function(){},connectChildren:function(_dc){this.inherited(arguments);var _dd=this._childConnections;var _de=this;var _df=this.getDescendants();dojo.forEach(dojo.filter(_df,function(_e0){return _e0.onChange;}),function(_e1){_dd.push(_de.connect(_e1,"onChange",dojo.hitch(_de,"fireWidgetChangeEvent",_e1)));_dd.push(_de.connect(_e1,"onBlur",dojo.hitch(_de,"fireWidgetBlurEvent",_e1)));});},_onWidgetValidateStatesChange:function(_e2){if(this.isValid()&&!this.xValid){if((inValidRule=this.xValidate(this.xValidations))){this.xValid=false;this.showXValidationMsg(inValidRule.hint,dijit.byId(inValidRule.widgets[0]));}else{this.xValid=true;this._hideXHint();}}this.setSubmitButtonState();},onSubmit:function(e){var _e3=this._querySubmitButton(e);this.handleButtonSubmit(_e3);if(this.validateOnSubmit){if(!this.isValid()||!this.xValid){return false;}}dojo.forEach(this.getDescendants(),function(_e4){if(_e4.onFormSubmit){_e4.onFormSubmit();}});if(this.onFormSubmit){this.onFormSubmit();}return true;},_querySubmitButton:function(e){if(this._lastClickedButton){return this._lastClickedButton;}},setSubmitButtonState:function(){if(this.validateOnSubmit){if((this.get("state")==""||this.get("state")=="Normal")&&this.xValid){for(var i=0;i<this.submitButton.length;i++){var btn=this.submitButton[i];btn.set("disabled",btn.get("inValid"));}}else{for(var i=0;i<this.submitButton.length;i++){this.submitButton[i].set("disabled",true);}}}},handleButtonSubmit:function(_e5){if(_e5&&_e5.bttParams&&_e5.bttParams!=""){this.parameterHandler(_e5.bttParams);}},startup:function(){if(this._isStarted){return;}this._isStarted=true;this.inherited(arguments);var _e6=this;watches=this._childWatches;var _e7=this._childConnections;dojo.forEach(dojo.filter(this.getDescendants(),function(_e8){return _e8.get("type")&&_e8.get("type").toLowerCase()=="submit";}),function(_e9){_e6.submitButton.push(_e9);_e6.submitButtonOS.push(_e9.attr("disabled"));watches.push(_e9.watch("isValid",function(_ea,_eb,_ec){_e6.setSubmitButtonState();}));});if(this.bttParams!=null&&this.bttParams!=""){this.parameterHandler(this.bttParams);}if(this.bttErrorPage!=null&&this.bttErrorPage!=""){this.errorPageHandler();}this.watch("state",this._onWidgetValidateStatesChange);this.onWidgetChange();this.setSubmitButtonState();},parameterHandler:function(e){var _ed=dojo.fromJson(e);this.destroyHiddenParams();for(var _ee in _ed){if(typeof (_ee)!="undefined"){var _ef=_ed[_ee];this.hiddenParamHandle[_ee]=dojo.create("input",{type:"hidden",name:_ee,value:_ef});dojo.place(this.hiddenParamHandle[_ee],this.containerNode,"last");}}},destroyHiddenParams:function(){for(var _f0 in this.hiddenParamHandle){dojo.destroy(this.hiddenParamHandle[_f0]);}this.hiddenParamHandle={};},errorPageHandler:function(){var _f1=dojo.create("input",{type:"hidden",name:AjaxUtil.constants["BTT_ERRORPAGE"],value:this.bttErrorPage});dojo.place(_f1,this.containerNode,"last");},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var _f2=evt.target;if(evt.charOrCode===dk.ENTER){while(_f2){if(_f2==this.domNode){this.submit();}_f2=_f2.parentNode;}}}},destroy:function(){this.destroyHiddenParams();this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Image"]){dojo._hasResource["com.ibm.btt.dijit.Image"]=true;dojo.provide("com.ibm.btt.dijit.Image");dojo.declare("com.ibm.btt.dijit.Image",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<img >",location:"",width:"",height:"",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{location:{node:"domNode",type:"attribute",attribute:"src"},width:{node:"domNode",type:"attribute"},height:{node:"domNode",type:"attribute"},visibility:{node:"domNode"}}),_setLocationAttr:function(_f3){this.location=_f3;this.domNode.src=_f3;},_setWidthAttr:function(_f4){if(_f4!=""){this.width=_f4;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_f5){if(_f5!=""){this.height=_f5;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Label"]){dojo._hasResource["com.ibm.btt.dijit.Label"]=true;dojo.provide("com.ibm.btt.dijit.Label");dojo.declare("com.ibm.btt.dijit.Label",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<label class='dijitLabelBase' dojoAttachPoint='labelContainer' ${nameAttrSetting} ></label>",text:"",name:"","for":"",width:"",height:"",textWrap:false,isNotSubmitted:true,fieldReference:"",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},"for":{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(this.hint==undefined||this.hint==null||this.hint==""){this.set("hint",this.text);}},_setTextAttr:function(_f6){this.text=_f6;this.domNode.innerHTML=this.getI18NString(_f6);},_setTextWrapAttr:function(_f7){this.textWrap=_f7;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setValueAttr:function(_f8){this.set("text",_f8);},_getValueArrt:function(_f9){return this.get("text");},_setForAttr:function(_fa){this.domNode.htmlFor=_fa;},_setWidthAttr:function(_fb){if(this.width!=""){this.width=_fb;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_fc){if(this.height!=""){this.height=_fc;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.RadioButton"]){dojo._hasResource["com.ibm.btt.dijit.RadioButton"]=true;dojo.provide("com.ibm.btt.dijit.RadioButton");dojo.declare("com.ibm.btt.dijit.RadioButton",[dijit.form.RadioButton,com.ibm.btt.dijit.AbstractWidgetMixin],{isChecked:false,text:"",visibility:"visible",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.RadioButton.prototype.attributeMap,{text:{node:"labelNode"},isChecked:{node:"domNode"},visibility:{node:"domNode"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},_setIsCheckedAttr:function(_fd){this.set("checked",_fd);},_setCheckedAttr:function(_fe){if(_fe==false||_fe=="false"||_fe==""){this.isChecked=false;}else{this.isChecked=true;}this.inherited(arguments);},_setTextAttr:function(_ff){this.text=_ff;this.labelNode.innerHTML=this.getI18NString(_ff);},_setStyleAttr:function(_100){dojo.attr(this.labelNode,"style",_100);},_setClassAttr:function(_101){dojo.attr(this.labelNode,"class",_101);},_setHintAttr:function(_102){this.hint=_102;var _103=StringUtil.removeWarp(this.getI18NString(_102));this.domNode.title=_103;this.labelNode.title=_103;},_setVisibilityAttr:function(_104){this.visibility=_104;if(_104==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_104==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_105){this.inherited(arguments);if(_105==="true"||_105===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_onClick:function(e){this.inherited(arguments);if(dojo.isIE&&this.readOnly&&this.focusNode.form){dojo.stopEvent(e);dojo.query("INPUT[type=radio]",this.focusNode.form).forEach(dojo.hitch(this,function(_106){if(_106.name==this.name&&_106.form==this.focusNode.form){var _107=dijit.getEnclosingWidget(_106);if(_107&&"checked" in _107){_107.set("checked",_107.checked);}}}));}},_setTextWrapAttr:function(_108){this.textWrap=_108;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_109){if(this.width!=""){this.width=_109;var _10a=_109.replace(new RegExp("px","gm"),"");try{_10a=Number(_10a);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_109+" to number.");return;}var box=dojo.marginBox(this.domNode);var _10b=_10a-box.w;if(_10b<0){_10b=0;}dojo.style(this.labelNode,"width",_10b+"px");}},_setHeightAttr:function(_10c){if(this.height!=""){this.height=_10c;var _10d=_10c.replace(new RegExp("px","gm"),"");try{_10d=Number(_10d);}catch(e){console.error("Illegal input argument. Can not convert input height:"+_10c+" to number.");return;}var box=dojo.marginBox(this.domNode);var _10e=_10d-box.h;if(_10e<0){_10e=0;}dojo.style(this.labelNode,"height",_10e+"px");}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]){dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]=true;dojo.provide("com.ibm.btt.dijit.RichTextEditor");dojo.declare("com.ibm.btt.dijit.RichTextEditor",[dijit.Editor,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",readOnly:false,attributeMap:dojo.delegate(dijit.Editor.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},readOnly:{node:"domNode"}}),_setReadOnlyAttr:function(_10f){this.set("disabled",_10f);},_getReadOnlyAttr:function(){return this.get("disabled");},postCreate:function(){var _110=this.name;this.inherited(arguments);this._setWidthAttr(this.width);this._setHintAttr(this.hint);this._setVisibilityAttr(this.visibility);this.resetContent=this.get("savedContent");if(_110==""||_110==null||_110==undefined){this.name=null;}},_setWidthAttr:function(_111){if(_111!=""){this.width=_111;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHintAttr:function(_112){this.hint=_112;if(typeof (this.editingArea)!="undefined"&&this.editingArea!=null){this.editingArea.parentNode.title=StringUtil.removeWarp(this.getI18NString(_112));}},_getValueAttr:function(){var _113=this.inherited(arguments);if(dojo.isFF&&(_113=="<br _moz_editor_bogus_node=\"TRUE\" />"||_113=="<br />")){return "";}else{return _113;}},reset:function(e){this.set("value",this.resetContent);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Select"]){dojo._hasResource["com.ibm.btt.dijit.Select"]=true;dojo.provide("com.ibm.btt.dijit.Select");dojo.declare("com.ibm.btt.dijit.Select",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.FilteringSelect,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",width:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.FilteringSelect.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){if(this.params.value){this.value=this.params.value;this._lastValueReported=this.params.value;this._resetValue=this.params.value;}this.loadStoreFromURL(this.storeURL);}this._setWidthAttr(this.width);},postMixInProperties:function(){var root=this.srcNodeRef;var _114={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _115=this;dojo.query("> option",root).forEach(dojo.hitch(this,function(node,i){var item={};item[this.storeDataFormat.itemLabel]=_115.getI18NString(dojo.trim(node.innerHTML));var _116=dojo.attr(node,"value");if(_116==""){_116="#";}item[this.storeDataFormat.itemValue]=_116;_114.items.push(item);}));if(_114.items.length==0&&this.storeData){if(typeof this.storeData=="string"){this.storeData=dojo.fromJson(this.storeData);}_114=this._formatStoreData(this.storeData);}_114=this.prepareStoreData(_114);this.item=null;if(this.params.value){for(var i=0;i<_114.items.length;i++){if(this.params.value==_114.items[i].value){this.item=_114.items[i];}}}if(_114.items.length==0){var item={};item[this.storeDataFormat.itemValue]="#";item[this.storeDataFormat.itemLabel]="";_114.items.push(item);this._lastValueReported="#";this.value="#";}if(!this.item){this.item=_114.items[0];this.value=this.item.value;this._lastValueReported=this.item.value;}this.store=new dojo.data.ItemFileReadStore({data:_114});this.inherited(arguments);},_setStoreDataAttr:function(_117){if(typeof _117=="string"){_117=dojo.fromJson(_117);}this.storeData=_117;},setStoreData:function(data){this._onChangeActive=false;var _118=this.prepareStoreData(this._formatStoreData(data));this.store.clearOnClose=true;this.store.data=_118;this.searchAttr=_118.label;this.store.close();this.set("value",this.value);this._setBlurValue();this._onChangeActive=true;},prepareStoreData:function(data){return data;},_formatStoreData:function(data){var _119={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(data instanceof Array){for(var i=0;i<data.length;i++){if(data[i]!=null&&data[i][this.valueField]!=null&&data[i][this.labelField]!=null){var item={};item[this.storeDataFormat.itemValue]=data[i][this.valueField];item[this.storeDataFormat.itemLabel]=this.getI18NString(data[i][this.labelField]);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_119.items.push(item);}}}else{if(data instanceof Object){for(var p in data){if(data[p]!=null){var item={};item[this.storeDataFormat.itemValue]=data[p];item[this.storeDataFormat.itemLabel]=this.getI18NString(p);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_119.items.push(item);}}}}return _119;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _11a={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_11a);},_handleStoreLoadingResponse:function(data){this.setStoreData(data);this.onAsyncOK();},_setVisibilityAttr:function(_11b){this.visibility=_11b;var _11c;if(typeof (this.domNode.children)!="undefined"&&typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_11c=this.domNode.children[0].children[1];}else{_11c=null;}if(_11b=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_11c!=null){dojo.style(_11c,"visibility","");}}else{if(_11b=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_11c!=null){dojo.style(_11c,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_11c!=null){dojo.style(_11c,"visibility","");}}}},_setWidthAttr:function(_11d){if(_11d!=""){this.width=_11d;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setValueAttr:function(_11e){var _11f=false;this.store.fetchItemByIdentity({identity:_11e,onItem:function(item){if(item){_11f=true;}}});var _120=this.store._getItemsArray();if(_120){dojo.some(_120,function(item){if(item.value&&item.value[0]&&item.value[0]==_11e){_11f=true;return false;}});}if(!_11f){var _120=this.store._getItemsArray();if(_120.length==0){_11e="";}else{var id=this.store.getIdentity(_120[0]);this.store.fetchItemByIdentity({identity:id,onItem:dojo.hitch(this,function(item){if(item){_11f=true;_11e=item.value&&item.value[0]?item.value[0]:null;this.set("item",item);}})});}this.value=_11e;this._lastValueReported=_11e;}this.inherited(arguments);},_getValueAttr:function(){var _121=this.inherited(arguments);if(_121==null||_121=="#"){return "";}else{return _121;}},_setItemAttr:function(){this.inherited(arguments);this.valueNode.value=this.get("value");}});}if(!dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]){dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]=true;dojo.provide("com.ibm.btt.dijit.StringTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.StringTextBox",[com.ibm.btt.dijit.ValidationTextBox],{maximumLength:NaN,minimumLength:NaN,validCharacters:"",password:false,postMixInProperties:function(){this.inherited(arguments);if(this.password){this.type="password";}},postCreate:function(){this.inherited(arguments);this.attr("value",this.attr("value"));},validator:function(_122,_123){var _124=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(this.attr("value")!=""&&(!isNaN(this.minimumLength))&&this.attr("value").length<this.minimumLength){this.invalidMessage=_124.getMessage("stringMinMessage",{value:this.minimumLength});return false;}else{if(this.attr("value")!=""&&(!isNaN(this.maximumLength))&&this.attr("value").length>this.maximumLength){this.invalidMessage=_124.getMessage("stringMaxMessage",{value:this.maximumLength});return false;}else{return this.inherited(arguments);}}},_setValueAttr:function(_125){if(_125!=null&&_125!=undefined){_125=this.getI18NString(_125);_125=_125.replace(/&amp;/g,"&").replace(/&lt;/g,"<");this.value=_125;this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TextArea"]){dojo._hasResource["com.ibm.btt.dijit.TextArea"]=true;dojo.provide("com.ibm.btt.dijit.TextArea");dojo.declare("com.ibm.btt.dijit.TextArea",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.SimpleTextarea],{width:"",height:"",attributeMap:dojo.delegate(dijit.form.SimpleTextarea.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},height:{node:"domNode"}}),validator:function(_126,_127){if(!(!this.required||!this._isEmpty(_126))){return false;}return true;},_setVisibilityAttr:function(_128){this.visibility=_128;if(_128=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}else{if(_128=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_setWidthAttr:function(_129){if(_129!=""){this.width=_129;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_12a){if(_12a!=""){this.height=_12a;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setValueAttr:function(_12b){_12b=this.getI18NString(_12b);this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Tree"]){dojo._hasResource["com.ibm.btt.dijit.Tree"]=true;dojo.provide("com.ibm.btt.dijit.Tree");dojo.declare("com.ibm.btt.dijit.Tree",[dijit.Tree,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",name:"",storeData:null,showRoot:false,value:"",_selectedItem:null,width:"",height:"",persist:false,templateString:dojo.cache("com.ibm.btt.dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" waiRole=\"tree\" style=\"overflow:auto\"\r\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\r\n\t<input type=\"hidden\" dojoAttachPoint=\"formNode\"/>\r\n</div>\r\n"),attributeMap:dojo.delegate(dijit.Tree.prototype.attributeMap,{visibility:{node:"domNode"},name:{node:"formNode"},value:{node:"formNode"},width:{node:"formNode"},height:{node:"formNode"}}),postMixInProperties:function(){this.inherited(arguments);this.loadStoreData();},postCreate:function(){this.inherited(arguments);this.treeEvents=[];var _12c=this;this.treeEvents.push(dojo.connect(this,"onClick",this,function(item){_12c.set("value",item.id[0]);}));this._lastValue=this.value;},onLoad:function(){this.inherited(arguments);this._expandNode(this.tree.rootNode.getChildren()[0],false);this.reset();if(this.value!=""){var _12d=this.value.split(".");var _12e=_12d[0];for(var i=1;i<_12d.length;i++){var n=this._itemNodesMap[_12e];if(n){this._expandNode(n[0],false);}_12e+="."+_12d[i];}var _12f=this._itemNodesMap[this.value];this._expandNode(_12f[0],false);_12f[0].setSelected(true);}},_parseStoreData:function(_130,data){this.firstSelectedItem=null;var _131=[];for(var name in data){var item={};if(_130!=null&&typeof (_130.id)!="undefined"){item.id=_130.id+"."+name;}else{item.id=name;}item.label=data[name]["label"];item.value=data[name]["value"];if(data[name]["children"]){item.children=this._parseStoreData(item,data[name]["children"]);}_131.push(item);}return _131;},getLabel:function(item){return I18nUtil.getI18nString(this.inherited(arguments));},loadStoreData:function(){var _132=this._parseStoreData(null,this.storeData);if(!this.model){var data={"identifier":"id","label":"label","items":_132};var _133=new dojo.data.ItemFileWriteStore({"data":data});this.model=new dijit.tree.ForestStoreModel({"store":_133});}else{var tree=this;var _133=this.model.store;this.model.store.fetch({queryOptions:{deep:true},onComplete:function(_134,_135){for(var i=_134.length-1;i>=0;i--){_133.deleteItem(_134[i]);}}});_133.save();(function(_136,_137){for(var i=0;i<_136.length;i++){var _138;if(_136[i].children&&_136[i].children.length){_138=_136[i].children;_136[i].children=[];}else{_138=null;}if(_137){var _139=_133.newItem(_136[i],{parent:_137,attribute:"children"});}else{var _139=_133.newItem(_136[i]);}if(_138){arguments.callee(_138,_139);}}})(_132);_133.save();}},setStoreData:function(data){var _13a={};_13a[this.storeDataName]=data;this.storeData=_13a;this.loadStoreData();if(this.dndController){this.dndController.destroy();var _13b={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_13b[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController.constructor(this,_13b);}this.set("paths",[]);},destroy:function(){this.inherited(arguments);for(var i=0;this.treeEvents.length;i++){dojo.disconnect(this.treeEvents.pop());}this.treeEvents=null;},_setValueAttr:function(_13c){dojo.forEach(this.get("selectedNodes"),function(_13d){_13d.setSelected(false);});if(this._lastValue){var node=this._itemNodesMap[this._lastValue];if(node){node[0].setSelected(false);}}this.set("paths",[]);var _13e=this._itemNodesMap[_13c];this.value=_13c;this.formNode.value=_13c;if(_13e){this.set("selectedNodes",_13e);this._selectedItem=_13e[0].item;}},getSelectedLabel:function(){if(this._selectedItem){return this._selectedItem.label[0];}else{return undefined;}},getSelectedLabelNLS:function(){if(this._selectedItem){return I18nUtil.getI18nString(this._selectedItem.label[0]);}else{return undefined;}},getSelectedValue:function(){if(this._selectedItem){return this._selectedItem.value[0];}else{return undefined;}},isFocusable:function(){return (!this.disabled)&&(!this.readOnly)&&(dojo.style(this.domNode,"display")!=="none")&&(dojo.style(this.domNode,"visibility")!=="hidden");},reset:function(){this.inherited(arguments);if(this.params.value){this.set("value",this.params.value);}else{this.set("value","");}},getTooltip:function(item){var tip=this.getI18NString(this.hint);if(tip==undefined){tip="";}this.hint=tip;return tip;},_setHintAttr:function(_13f){this.hint=_13f;var _140=StringUtil.removeWarp(this.getI18NString(_13f));this.domNode.title=_140;if(this.rootNode){this._setHintForAllChild(this.rootNode,_140);}},_setHintForAllChild:function(root,hint){var _141=this;root.set("tooltip",hint);root.set("hint",hint);if(root.hasChildren()){dojo.forEach(root.getChildren(),function(_142,idx){_141._setHintForAllChild(_142,hint);});}},_setWidthAttr:function(_143){if(_143!=""){this.width=_143;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_144){if(_144!=""){this.height=_144;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setVisibilityAttr:function(_145){this.inherited(arguments);this.resize();}});}if(!dojo._hasResource["com.ibm.btt.event._ConditionMixin"]){dojo._hasResource["com.ibm.btt.event._ConditionMixin"]=true;dojo.provide("com.ibm.btt.event._ConditionMixin");dojo.declare("com.ibm.btt.event._ConditionMixin",null,{_conditionMap:{},registerCond:function(url){if(url){var _146={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadCond"),error:dojo.hitch(this,"_loadCondError",url)};dojo.xhrGet(_146);}else{console.error("The argument can not be null.");}},_loadCond:function(cond){if(cond){for(var name in cond){if(name&&cond[name]&&typeof (cond[name])=="function"){this._conditionMap[name]=cond[name];}}}},_loadCondError:function(url,_147){console.error("Fail to load the condition on "+url+", error : "+_147);},executeCond:function(){var name=arguments[0];var args=[];var _148=Number(arguments.length);var i=1;while(i<_148){args.push(arguments[i]);i++;}try{if(this._conditionMap[name]){return this._conditionMap[name].apply(this,args);}else{console.error("Condition with specified name is not found. condition="+name);}}catch(e){console.error("An error occured while executing the condition "+name+", error "+e);}},executeDeprecatedCond:function(){var name=arguments[0];console.warn("The condition ["+name+"] is deprecated.");this.executeCond(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event.Engine"]){dojo._hasResource["com.ibm.btt.event.Engine"]=true;dojo.provide("com.ibm.btt.event.Engine");dojo.declare("com.ibm.btt.event.Engine",[com.ibm.btt.event._ConditionMixin],{monitor:null,_ruleEvents:[],_ruleMaps:{},setMonitor:function(_149){this.monitor=_149;},registerRules:function(_14a){this._formOnLoaded=[];for(var i=0;i<_14a.length;i++){if(_14a[i].evts){for(var j=0;j<_14a[i].evts.length;j++){this._registerEvent(_14a[i],_14a[i].evts[j]);}}if(_14a[i].type&&_14a[i].type=="AG"){this._ruleMaps[_14a[i].name]=_14a[i];}}for(var i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i].onLoaded){this._formOnLoaded[i].onLoaded();}}this._formOnLoaded=undefined;delete this._formOnLoaded;},_registerEvent:function(rule,_14b){var obj;if(_14b.id.lastIndexOf(".")==-1){obj=dijit.byId(_14b.id);}else{var _14c=_14b.id.substring(0,_14b.id.indexOf("."));var _14d=_14b.id.substring(_14b.id.indexOf(".")+1,_14b.id.length);obj=dijit.byId(_14c);if(obj&&obj.getWidget){obj=obj.getWidget(_14d);}else{console.error("Failed to register event '"+_14b.id+"', "+"parent widget mush provide getWidget(id) widget to support subwidget listening funcion.");return;}}var _14e=dojo.connect(obj,_14b.e,this,function(evt){if(this.monitor!=null){this.monitor.monitorStartRule(_14b,rule);}var _14f=this._executeCondition(rule,evt);if(this.monitor!=null){this.monitor.monitorCondition(_14b,rule,_14f);}this._executeAction(_14f,rule,evt);if(this.monitor!=null){this.monitor.monitorEndRule(_14b,rule);}});if(_14b.e==="onLoaded"){var i;for(i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i]==obj){break;}}if(i==this._formOnLoaded.length){this._formOnLoaded.push(obj);}}this._ruleEvents.push(_14e);},_executeCondition:function(rule,evt){var _150=true;if(rule&&rule.cond){try{_150=rule.cond.call(this,evt);}catch(e){console.error("An error occured while ECA condition excuting."+e.toString());}}return _150;},_executeAction:function(_151,rule,evt){if(_151){if(rule.onTrue){try{rule.onTrue.call(this,evt);}catch(e){console.error("An error occured while ECA on true state excuting."+e.toString());}}}else{if(rule.onFalse){try{rule.onFalse.call(this,evt);}catch(e){console.error("An error occured while ECA on false state excuting."+e.toString());}}}},executeAG:function(name){if(name){var rule=this._ruleMaps[name];if(rule){if(this.monitor&&this.monitor.monitorStartAG){this.monitor.monitorStartAG(rule);}var _152=this._executeCondition(rule);if(this.monitor&&this.monitor.monitorAGCondition){this.monitor.monitorAGCondition(rule,_152);}this._executeAction(_152,rule);if(this.monitor&&this.monitor.monitorEndAG){this.monitor.monitorEndAG(rule);}}else{console.error("can not find corresponding action group with given name '"+name+"'");}}else{console.error("Input argument name to execute an action group can not be null or undefined or empty.");}},clearRules:function(){while(this._ruleEvents.length>0){dojo.disconnect(this._ruleEvents.pop());}this._ruleMaps={};},setPW:function(id,_153,_154){if(this.monitor!=null){this.monitor.monitorSetPropertyAction(id,_153,_154);}dijit.byId(id).set(_153,_154);},getPW:function(id,_155){var _156=dijit.byId(id).get(_155);if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_155,_156);}return _156;},getW:function(id){return dijit.byId(id);},runWF:function(id,_157,_158){var _159=dijit.byId(id);var args=[];for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i];}var _15a=_159[_157].apply(_159,args);if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_157,args,_15a);}return _15a;},destroy:function(){this.clearRules();this._ruleEvents=undefined;this.monitor=undefined;this._ruleMaps=undefined;}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridDijit"]){dojo._hasResource["com.ibm.btt.dijit.GridDijit"]=true;dojo.provide("com.ibm.btt.dijit.GridDijit");dojo.declare("dojox.btt.grid.cells.BaseCellWidget",dojox.grid.cells._Widget,{createWidget:function(_15b,_15c,_15d){var _15e=this.inherited(arguments);var _15f=this;_15e.watch("state",function(attr,_160,_161){_15f.grid._set("state",_15f.grid._getState());});return _15e;}});dojo.declare("dojox.btt.grid.cells.Label",dojox.btt.grid.cells.BaseCellWidget,{formatter:function(_162){return I18nUtil.getI18nString(_162);}});dojo.declare("dojox.btt.grid.cells.DateTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.DateTextBox,formatter:function(_163){if(_163==undefined||_163==null||_163==""||_163=="null"){return "";}if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}var date;if(typeof _163=="string"){if(this.widget&&this.widget.pattern){date=this.widget.parse(_163,this.widget.constraints);}else{var _164=this.widget.constraints;_164["datePattern"]="yyyy-MM-dd";date=this.widget.parse(_163,_164);}}else{date=_163;}return this.widget.format(date,this.widget.constraints);},getWidgetProps:function(_165){return dojo.mixin(this.inherited(arguments),{value:new Date(_165)});},setValue:function(_166,_167){if(_167==undefined||_167==null||_167==""||_167=="null"){this.widget.set("value",null);return;}if(this.widget){if(typeof _167=="string"){if(this.widget&&this.widget.pattern){this.widget.attr("value",this.widget.parse(_167,this.widget.constraints));}else{this.widget.attr("value",new Date(_167));}}else{this.widget.attr("value",_167);}}else{this.inherited(arguments);}},getValue:function(_168){if(this.widget.isValid()){var _169=this.widget.get("value");if(_169){return _169;}else{return "";}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},formatNode:function(_16a,_16b){this.inherited(arguments);this.setValue(_16a,_16b);}});dojo.declare("dojox.btt.grid.cells.CurrencyTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CurrencyTextBox,formatter:function(_16c){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if(_16c===null){return "";}if(typeof _16c=="string"){_16c=Number(_16c);}this.widget.attr("value",_16c);return dojo.number.format(_16c,this.widget.constraints);},getWidgetProps:function(_16d){return dojo.mixin(this.inherited(arguments),{value:new Number(_16d)});},getValue:function(_16e){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.NumberTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.NumberTextBox,formatter:function(_16f){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if(_16f===null||_16f===""){return "";}this.widget.set("value",_16f);if(typeof _16f=="string"){var _170=this.widget.parse(_16f,this.widget.constraints);if(isNaN(_170)){_170=Number(_16f);}if(isNaN(_170)){return _16f;}else{return this.widget.format(_170,this.widget.constraints);}}else{return this.widget.format(_16f,this.widget.constraints);}},getWidgetProps:function(_171){return dojo.mixin(this.inherited(arguments),{value:new Number(_171)});},getValue:function(_172){if(this.widget.isValid()){var _173=this.widget.get("value");if(isNaN(_173)){return "";}else{return _173;}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CheckBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CheckBox,getValue:function(){return this.widget.attr("value");},setValue:function(_174,_175){if(_175&&this.widget){if(_175.toString()==this.widget.checkedValue.toString()){this.widget.attr("isChecked",true);}else{this.widget.attr("isChecked",false);}}else{this.inherited(arguments);}},sizeWidget:function(_176,_177,_178){return;}});dojo.declare("dojox.btt.grid.cells.StringTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.StringTextBox,getValue:function(_179){if(this.widget.isValid()){return this.widget.attr("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},formatter:function(_17a){return I18nUtil.getI18nString(_17a);}});dojo.declare("dojox.btt.grid.cells.ComboBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.ComboBox,getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");}});dojo.declare("dojox.btt.grid.cells.Select",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Select,comparator:function(_17b,_17c){var _17d=this.widget.store;var _17e=_17d._itemsByIdentity[_17b];var v1=_17e?_17e.label[0]:_17b;var _17f=_17d._itemsByIdentity[_17c];var v2=_17f?_17f.label[0]:_17c;if(v1>v2){return 1;}else{if(v1<v2){return -1;}else{return 0;}}},formatter:function(_180){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if((_180===null)||(_180==="")){return "";}var _181=this.widget.store;var item=_181._itemsByIdentity[_180];if(item){this.widget.set("value",_180);return item.label[0];}else{return _180;}}});dojo.declare("dojox.btt.grid.cells.Image",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Image,formatter:function(_182){var html="<img src=\""+_182+"\"";if(this.widgetProps&&this.widgetProps.imageWidth){html+=" width=\""+this.grid.handleLenUint(this.widgetProps.imageWidth)+"\"";}if(this.widgetProps&&this.widgetProps.imageHeight){html+=" height=\""+this.grid.handleLenUint(this.widgetProps.imageHeight)+"\"";}html+="/>";return html;}});dojo.declare("dojox.btt.grid.cells.LabelFromList",dojox.btt.grid.cells.BaseCellWidget,{constructor:function(prop){var _183=this;if(prop.storeData){_183.storeData=prop.storeData;}else{var _184=prop.storeURL?prop.storeURL:prop.widgetProps.storeURL;if(_184){var _185={url:_184,handleAs:"json",sync:true,load:function(arg){_183.storeData=arg;},error:function(e){console.error("dojox.btt.grid.cells.LabelFromList: Failed to get the list file from "+_184);}};dojo.xhrGet(_185);}else{_183.storeData={};}}if(_183.storeData){var _186={};for(var key in _183.storeData){if(_183.storeData[key]!=null&&typeof (_183.storeData[key])!="undefined"){_186[_183.storeData[key]]=key;}}_183.storeData=_186;}},formatter:function(_187){if(this.storeData&&this.storeData[_187]){return "<label>"+I18nUtil.getI18nString(this.storeData[_187])+"</label>";}else{if(_187&&_187===null&&_187==="null"){return "";}else{return "<label>"+_187+"</label>";}}}});dojo.declare("dojox.btt.grid.cells._LinkMixin",null,{constructor:function(prop){if(prop.widgetProps.action=="op"||prop.widgetProps.action=="flow"){var _188=dojo.fromJson(prop.widgetProps.bttParams);var url=["Request?"];for(var key in _188){if(_188[key]!=null){url.push(key);url.push("=");url.push(_188[key]);url.push("&");}}url.pop();this.widgetProps.baseUrl=url.join("");}},onClick:function(e){},_onClick:function(e){if(e.target.tagName==this._tagartTagName){var _189=function(src,str){var reg=new RegExp("^"+str);return reg.test(src);};var data=this.grid.store._arrayOfAllItems[e.rowIndex];var _18a={};for(var key in data){if(data[key]!=null&&!_189(key,"_")){_18a[key]=data[key][0];}}this.grid._cellEventRowData=_18a;this.onClick(e);if(this.widgetProps&&this.widgetProps.action==="link"){window.open(this.widgetProps.links[e.rowIndex]);}else{if(this.widgetProps&&(this.widgetProps.action==="op"||this.widgetProps.action==="flow")){var _18b=[];for(var key in _18a){if(_18a[key]!=null){_18b.push(key);_18b.push("=");_18b.push(_18a[key]);_18b.push("&");}}_18b.pop();var url=this.widgetProps.baseUrl+"&"+_18b.join("");window.open(url);}else{}}}}});dojo.declare("dojox.btt.grid.cells.Link",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"A",formatter:function(_18c,arg1,arg2,arg3){if(this.field){if(_18c!=null&&_18c!=undefined&&_18c!=""&&_18c!="null"){return "<a href='#"+arg1+"'>"+_18c+"</a>";}else{return "";}}else{if(this.widgetProps&&this.widgetProps.label){return "<a href='#"+arg1+"'>"+this.grid.getI18NString(this.widgetProps.label)+"</a>";}else{return "";}}}});dojo.declare("dojox.btt.grid.cells.Button",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"SPAN",formatter:function(_18d){if(this.field){if(_18d!=null&&_18d!=undefined&&_18d!=""&&_18d!="null"){return "<span class=\"dijit dijitReset dijitInline dijitButton\"><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+_18d+"</span></div></span></span>";}else{return "";}}else{if(this.widgetProps&&this.widgetProps.label){_18d=this.grid.getI18NString(this.widgetProps.label);return "<span class=\"dijit dijitReset dijitInline dijitButton\"><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+_18d+"</span></div></span></span>";}else{return "";}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]){dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]=true;dojo.provide("com.ibm.btt.dijit.QueryReadStore");dojo.declare("com.ibm.btt.dijit.QueryReadStore",dojox.data.QueryReadStore,{bttParams:{},_fetchItems:function(_18e,_18f,_190){var _191=_18e.serverQuery||_18e.query||{};if(!this.doClientPaging){_191.start=(_18e.start||0).toString();if(_18e.count){_191.count=_18e.count.toString();}}if(!this.doClientSorting&&_18e.sort){var _192=[];dojo.forEach(_18e.sort,function(sort){if(sort&&sort.attribute){_192.push((sort.descending?"-":"")+sort.attribute);}});_191.sort=_192.join(",");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_191)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_18f(this._items,_18e,this._numRows);}else{var _193=dojo.xhrPost;dojo.safeMixin(_191,this.bttParams);var _194=_193({url:this.url,handleAs:"text",postData:dojo.toJson(_191),failOk:true});_18e.abort=function(){_194.cancel();};_194.addCallback(dojo.hitch(this,function(_195){try{data=dojo.fromJson(_195||null);this._xhrFetchHandler(data,_18e,_18f,_190);}catch(err){console.error(err);}}));_194.addErrback(function(_196){_190(_196,_18e);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_191);}}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]){dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]=true;dojo.provide("dojox.grid.enhanced.plugins.AutoScroll");dojo.declare("dojox.grid.enhanced.plugins.AutoScroll",dojox.grid.enhanced._Plugin,{name:"autoScroll",autoScrollInterval:1000,autoScrollMargin:30,constructor:function(grid,args){this.grid=grid;this.readyForAutoScroll=false;this._scrolling=false;args=dojo.isObject(args)?args:{};if("interval" in args){this.autoScrollInterval=args.interval;}if("margin" in args){this.autoScrollMargin=args.margin;}this._initEvents();this._mixinGrid();},_initEvents:function(){var g=this.grid;this.connect(g,"onCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onHeaderCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onRowSelectorMouseDown",function(){this.readyForAutoScroll=true;});this.connect(dojo.doc,"onmouseup",function(evt){this._manageAutoScroll(true);this.readyForAutoScroll=false;});this.connect(dojo.doc,"onmousemove",function(evt){if(this.readyForAutoScroll){this._event=evt;var _197=dojo.position(g.domNode),hh=g._getHeaderHeight(),_198=this.autoScrollMargin,ey=evt.clientY,ex=evt.clientX,gy=_197.y,gx=_197.x,gh=_197.h,gw=_197.w;if(ex>=gx&&ex<=gx+gw){if(ey>=gy+hh&&ey<gy+hh+_198){this._manageAutoScroll(false,true,false);return;}else{if(ey>gy+gh-_198&&ey<=gy+gh){this._manageAutoScroll(false,true,true);return;}else{if(ey>=gy&&ey<=gy+gh){var _199=dojo.some(g.views.views,function(view,i){if(view instanceof dojox.grid._RowSelector){return false;}var _19a=dojo.position(view.domNode);if(ex<_19a.x+_198&&ex>=_19a.x){this._manageAutoScroll(false,false,false,view);return true;}else{if(ex>_19a.x+_19a.w-_198&&ex<_19a.x+_19a.w){this._manageAutoScroll(false,false,true,view);return true;}}return false;},this);if(_199){return;}}}}}this._manageAutoScroll(true);}});},_mixinGrid:function(){var g=this.grid;g.onStartAutoScroll=function(){};g.onEndAutoScroll=function(){};},_fireEvent:function(_19b,args){var g=this.grid;switch(_19b){case "start":g.onStartAutoScroll.apply(g,args);break;case "end":g.onEndAutoScroll.apply(g,args);break;}},_manageAutoScroll:function(_19c,_19d,_19e,view){if(_19c){this._scrolling=false;clearInterval(this._handler);}else{if(!this._scrolling){this._scrolling=true;this._fireEvent("start",[_19d,_19e,view]);this._autoScroll(_19d,_19e,view);this._handler=setInterval(dojo.hitch(this,"_autoScroll",_19d,_19e,view),this.autoScrollInterval);}}},_autoScroll:function(_19f,_1a0,view){var g=this.grid,_1a1=null;if(_19f){var _1a2=g.scroller.firstVisibleRow+(_1a0?1:-1);if(_1a2>=0&&_1a2<g.rowCount){g.scrollToRow(_1a2);_1a1=_1a2;}}else{_1a1=this._scrollColumn(_1a0,view);}if(_1a1!==null){this._fireEvent("end",[_19f,_1a0,view,_1a1,this._event]);}},_scrollColumn:function(_1a3,view){var node=view.scrollboxNode,_1a4=null;if(node.clientWidth<node.scrollWidth){var _1a5=dojo.filter(this.grid.layout.cells,function(cell){return !cell.hidden;});var _1a6=dojo.position(view.domNode);var _1a7,edge,_1a8,i;if(_1a3){_1a7=node.clientWidth;for(i=0;i<_1a5.length;++i){_1a8=dojo.position(_1a5[i].getHeaderNode());edge=_1a8.x-_1a6.x+_1a8.w;if(edge>_1a7){_1a4=_1a5[i].index;node.scrollLeft+=edge-_1a7+10;break;}}}else{_1a7=0;for(i=_1a5.length-1;i>=0;--i){_1a8=dojo.position(_1a5[i].getHeaderNode());edge=_1a8.x-_1a6.x;if(edge<_1a7){_1a4=_1a5[i].index;node.scrollLeft+=edge-_1a7-10;break;}}}}return _1a4;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.AutoScroll);}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]){dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]=true;dojo.provide("dojox.grid.enhanced.plugins.Selector");(function(){var _1a9=0,_1aa=1,_1ab=2,_1ac={col:"row",row:"col"},_1ad=function(type,_1ae,_1af,end,_1b0){if(type!=="cell"){_1ae=_1ae[type];_1af=_1af[type];end=end[type];if(typeof _1ae!=="number"||typeof _1af!=="number"||typeof end!=="number"){return false;}return _1b0?((_1ae>=_1af&&_1ae<end)||(_1ae>end&&_1ae<=_1af)):((_1ae>=_1af&&_1ae<=end)||(_1ae>=end&&_1ae<=_1af));}else{return _1ad("col",_1ae,_1af,end,_1b0)&&_1ad("row",_1ae,_1af,end,_1b0);}},_1b1=function(type,v1,v2){try{if(v1&&v2){switch(type){case "col":case "row":return v1[type]==v2[type]&&typeof v1[type]=="number"&&!(_1ac[type] in v1)&&!(_1ac[type] in v2);case "cell":return v1.col==v2.col&&v1.row==v2.row&&typeof v1.col=="number"&&typeof v1.row=="number";}}}catch(e){}return false;},_1b2=function(evt){try{if(evt&&evt.preventDefault){dojo.stopEvent(evt);}}catch(e){}},_1b3=function(type,_1b4,_1b5){switch(type){case "col":return {"col":typeof _1b5=="undefined"?_1b4:_1b5,"except":[]};case "row":return {"row":_1b4,"except":[]};case "cell":return {"row":_1b4,"col":_1b5};}return null;};dojo.declare("dojox.grid.enhanced.plugins.Selector",dojox.grid.enhanced._Plugin,{name:"selector",constructor:function(grid,args){this.grid=grid;this._config={row:_1ab,col:_1ab,cell:_1ab};this.setupConfig(args);if(grid.selectionMode==="single"){this._config.row=_1aa;}this._enabled=true;this._selecting={};this._selected={"col":[],"row":[],"cell":[]};this._startPoint={};this._currentPoint={};this._lastAnchorPoint={};this._lastEndPoint={};this._lastSelectedAnchorPoint={};this._lastSelectedEndPoint={};this._keyboardSelect={};this._lastType=null;this._selectedRowModified={};this._hacks();this._initEvents();this._initAreas();this._mixinGrid();},destroy:function(){this.inherited(arguments);},setupConfig:function(_1b6){if(!_1b6||!dojo.isObject(_1b6)){return;}var _1b7=["row","col","cell"];for(var type in _1b6){if(dojo.indexOf(_1b7,type)>=0){if(!_1b6[type]||_1b6[type]=="disabled"){this._config[type]=_1a9;}else{if(_1b6[type]=="single"){this._config[type]=_1aa;}else{this._config[type]=_1ab;}}}}var mode=["none","single","extended"][this._config.row];this.grid.selection.setMode(mode);},isSelected:function(type,_1b8,_1b9){return this._isSelected(type,_1b3(type,_1b8,_1b9));},toggleSelect:function(type,_1ba,_1bb){this._startSelect(type,_1b3(type,_1ba,_1bb),this._config[type]===_1ab,false);this._endSelect(type);},select:function(type,_1bc,_1bd){if(!this.isSelected(type,_1bc,_1bd)){this.toggleSelect(type,_1bc,_1bd);}},deselect:function(type,_1be,_1bf){if(this.isSelected(type,_1be,_1bf)){this.toggleSelect(type,_1be,_1bf);}},selectRange:function(type,_1c0,end,_1c1){this.grid._selectingRange=true;var _1c2=type=="cell"?_1b3(type,_1c0.row,_1c0.col):_1b3(type,_1c0),_1c3=type=="cell"?_1b3(type,end.row,end.col):_1b3(type,end);this._startSelect(type,_1c2,false,false,false,_1c1);this._highlight(type,_1c3,_1c1===undefined?true:_1c1);this._endSelect(type);this.grid._selectingRange=false;},clear:function(type){this._clearSelection(type||"all");},isSelecting:function(type){if(typeof type=="undefined"){return this._selecting.col||this._selecting.row||this._selecting.cell;}return this._selecting[type];},selectEnabled:function(_1c4){if(typeof _1c4!="undefined"&&!this.isSelecting()){this._enabled=!!_1c4;}return this._enabled;},getSelected:function(type,_1c5){switch(type){case "cell":return dojo.map(this._selected[type],function(item){return item;});case "col":case "row":return dojo.map(_1c5?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;}),function(item){return _1c5?item:item[type];});}return [];},getSelectedCount:function(type,_1c6){switch(type){case "cell":return this._selected[type].length;case "col":case "row":return (_1c6?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;})).length;}return 0;},getSelectedType:function(){var s=this._selected;return ["","cell","row","row|cell","col","col|cell","col|row","col|row|cell"][(!!s.cell.length)|(!!s.row.length<<1)|(!!s.col.length<<2)];},getLastSelectedRange:function(type){return this._lastAnchorPoint[type]?{"start":this._lastAnchorPoint[type],"end":this._lastEndPoint[type]}:null;},_hacks:function(){var g=this.grid;var _1c7=function(e){if(e.cellNode){g.onMouseUp(e);}g.onMouseUpRow(e);};var _1c8=dojo.hitch(g,"onMouseUp");var _1c9=dojo.hitch(g,"onMouseDown");var _1ca=function(e){e.cellNode.style.border="solid 1px";};dojo.forEach(g.views.views,function(view){view.content.domouseup=_1c7;view.header.domouseup=_1c8;if(view.declaredClass=="dojox.grid._RowSelector"){view.domousedown=_1c9;view.domouseup=_1c8;view.dofocus=_1ca;}});g.selection.clickSelect=function(){};this._oldDeselectAll=g.selection.deselectAll;var _1cb=this;g.selection.selectRange=function(from,to){_1cb.selectRange("row",from,to,true);if(g.selection.preserver){g.selection.preserver._updateMapping(true,true,false,from,to);}g.selection.onChanged();};g.selection.deselectRange=function(from,to){_1cb.selectRange("row",from,to,false);if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,false,from,to);}g.selection.onChanged();};g.selection.deselectAll=function(){g._selectingRange=true;_1cb._oldDeselectAll.apply(g.selection,arguments);_1cb._clearSelection("row");g._selectingRange=false;if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,true);}g.selection.onChanged();};var _1cc=g.views.views[0];if(_1cc instanceof dojox.grid._RowSelector){_1cc.doStyleRowNode=function(_1cd,_1ce){dojo.removeClass(_1ce,"dojoxGridRow");dojo.addClass(_1ce,"dojoxGridRowbar");dojo.addClass(_1ce,"dojoxGridNonNormalizedCell");dojo.toggleClass(_1ce,"dojoxGridRowbarOver",g.rows.isOver(_1cd));dojo.toggleClass(_1ce,"dojoxGridRowbarSelected",!!g.selection.isSelected(_1cd));};}this.connect(g,"updateRow",function(_1cf){dojo.forEach(g.layout.cells,function(cell){if(this.isSelected("cell",_1cf,cell.index)){this._highlightNode(cell.getNode(_1cf),true);}},this);});},_mixinGrid:function(){var g=this.grid;g.setupSelectorConfig=dojo.hitch(this,this.setupConfig);g.onStartSelect=function(){};g.onEndSelect=function(){};g.onStartDeselect=function(){};g.onEndDeselect=function(){};g.onSelectCleared=function(){};},_initEvents:function(){var g=this.grid,_1d0=this,dp=dojo.partial,_1d1=function(type,e){if(type==="row"){_1d0._isUsingRowSelector=true;}if(_1d0.selectEnabled()&&_1d0._config[type]&&e.button!=2){if(_1d0._keyboardSelect.col||_1d0._keyboardSelect.row||_1d0._keyboardSelect.cell){_1d0._endSelect("all");_1d0._keyboardSelect.col=_1d0._keyboardSelect.row=_1d0._keyboardSelect.cell=0;}if(_1d0._usingKeyboard){_1d0._usingKeyboard=false;}var _1d2=_1b3(type,e.rowIndex,e.cell&&e.cell.index);_1d0._startSelect(type,_1d2,e.ctrlKey,e.shiftKey);}},_1d3=dojo.hitch(this,"_endSelect");this.connect(g,"onHeaderCellMouseDown",dp(_1d1,"col"));this.connect(g,"onHeaderCellMouseUp",dp(_1d3,"col"));this.connect(g,"onRowSelectorMouseDown",dp(_1d1,"row"));this.connect(g,"onRowSelectorMouseUp",dp(_1d3,"row"));this.connect(g,"onCellMouseDown",function(e){if(e.cell&&e.cell.isRowSelector){return;}if(g.singleClickEdit){_1d0._singleClickEdit=true;g.singleClickEdit=false;}_1d1(_1d0._config["cell"]==_1a9?"row":"cell",e);});this.connect(g,"onCellMouseUp",function(e){if(_1d0._singleClickEdit){delete _1d0._singleClickEdit;g.singleClickEdit=true;}_1d3("all",e);});this.connect(g,"onCellMouseOver",function(e){if(_1d0._curType!="row"&&_1d0._selecting[_1d0._curType]&&_1d0._config[_1d0._curType]==_1ab){_1d0._highlight("col",_1b3("col",e.cell.index),_1d0._toSelect);if(!_1d0._keyboardSelect.cell){_1d0._highlight("cell",_1b3("cell",e.rowIndex,e.cell.index),_1d0._toSelect);}}});this.connect(g,"onHeaderCellMouseOver",function(e){if(_1d0._selecting.col&&_1d0._config.col==_1ab){_1d0._highlight("col",_1b3("col",e.cell.index),_1d0._toSelect);}});this.connect(g,"onRowMouseOver",function(e){if(_1d0._selecting.row&&_1d0._config.row==_1ab){_1d0._highlight("row",_1b3("row",e.rowIndex),_1d0._toSelect);}});this.connect(g,"onSelectedById","_onSelectedById");this.connect(g,"_onFetchComplete",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(g.scroller,"buildPage",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(dojo.doc,"onmouseup",dp(_1d3,"all"));this.connect(g,"onEndAutoScroll",function(_1d4,_1d5,view,_1d6){var _1d7=_1d0._selecting.cell,type,_1d8,dir=_1d5?1:-1;if(_1d4&&(_1d7||_1d0._selecting.row)){type=_1d7?"cell":"row";_1d8=_1d0._currentPoint[type];_1d0._highlight(type,_1b3(type,_1d8.row+dir,_1d8.col),_1d0._toSelect);}else{if(!_1d4&&(_1d7||_1d0._selecting.col)){type=_1d7?"cell":"col";_1d8=_1d0._currentPoint[type];_1d0._highlight(type,_1b3(type,_1d8.row,_1d6),_1d0._toSelect);}}});this.subscribe("dojox/grid/rearrange/move/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/copy/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/change/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/insert/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/remove/"+g.id,"clear");this.connect(g,"onSelected",function(_1d9){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.select("row",_1d9);}}});this.connect(g,"onDeselected",function(_1da){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.deselect("row",_1da);}}});},_onSelectedById:function(id,_1db,_1dc){if(this.grid._noInternalMapping){return;}var _1dd=[this._lastAnchorPoint.row,this._lastEndPoint.row,this._lastSelectedAnchorPoint.row,this._lastSelectedEndPoint.row];_1dd=_1dd.concat(this._selected.row);var _1de=false;dojo.forEach(_1dd,function(item){if(item){if(item.id===id){_1de=true;item.row=_1db;}else{if(item.row===_1db&&item.id){item.row=-1;}}}});if(!_1de&&_1dc){dojo.some(this._selected.row,function(item){if(item&&!item.id&&!item.except.length){item.id=id;item.row=_1db;return true;}return false;});}_1de=false;_1dd=[this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell];_1dd=_1dd.concat(this._selected.cell);dojo.forEach(_1dd,function(item){if(item){if(item.id===id){_1de=true;item.row=_1db;}else{if(item.row===_1db&&item.id){item.row=-1;}}}});},onSetStore:function(){this._clearSelection("all");},_onInternalRearrange:function(type,_1df){try{this._refresh("col",false);dojo.forEach(this._selected.row,function(item){dojo.forEach(this.grid.layout.cells,function(cell){this._highlightNode(cell.getNode(item.row),false);},this);},this);dojo.query(".dojoxGridRowSelectorSelected").forEach(function(node){dojo.removeClass(node,"dojoxGridRowSelectorSelected");dojo.removeClass(node,"dojoxGridRowSelectorSelectedUp");dojo.removeClass(node,"dojoxGridRowSelectorSelectedDown");});var _1e0=function(item){if(item){delete item.converted;}},_1e1=[this._lastAnchorPoint[type],this._lastEndPoint[type],this._lastSelectedAnchorPoint[type],this._lastSelectedEndPoint[type]];if(type==="cell"){this.selectRange("cell",_1df.to.min,_1df.to.max);var _1e2=this.grid.layout.cells;dojo.forEach(_1e1,function(item){if(item.converted){return;}for(var r=_1df.from.min.row,tr=_1df.to.min.row;r<=_1df.from.max.row;++r,++tr){for(var c=_1df.from.min.col,tc=_1df.to.min.col;c<=_1df.from.max.col;++c,++tc){while(_1e2[c].hidden){++c;}while(_1e2[tc].hidden){++tc;}if(item.row==r&&item.col==c){item.row=tr;item.col=tc;item.converted=true;return;}}}});}else{_1e1=this._selected.cell.concat(this._selected[type]).concat(_1e1).concat([this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell]);dojo.forEach(_1e1,function(item){if(item&&!item.converted){var from=item[type];if(from in _1df){item[type]=_1df[from];}item.converted=true;}});dojo.forEach(this._selected[_1ac[type]],function(item){for(var i=0,len=item.except.length;i<len;++i){var from=item.except[i];if(from in _1df){item.except[i]=_1df[from];}}});}dojo.forEach(_1e1,_1e0);this._refreshSelected(true);this._focusPoint(type,this._lastEndPoint);}catch(e){console.warn("Selector._onInternalRearrange() error",e);}},_onExternalChange:function(type,_1e3){var _1e4=type=="cell"?_1e3.min:_1e3[0],end=type=="cell"?_1e3.max:_1e3[_1e3.length-1];this.selectRange(type,_1e4,end);},_refresh:function(type,_1e5){if(!this._keyboardSelect[type]){dojo.forEach(this._selected[type],function(item){this._highlightSingle(type,_1e5,item,undefined,true);},this);}},_refreshSelected:function(){this._refresh("col",true);this._refresh("row",true);this._refresh("cell",true);},_initAreas:function(){var g=this.grid,f=g.focus,_1e6=this,dk=dojo.keys,_1e7=1,_1e8=2,_1e9=function(type,_1ea,_1eb,_1ec,evt){var ks=_1e6._keyboardSelect;if(evt.shiftKey&&ks[type]){if(ks[type]===_1e7){if(type==="cell"){var item=_1e6._lastEndPoint[type];if(f.cell!=g.layout.cells[item.col+_1ec]||f.rowIndex!=item.row+_1eb){ks[type]=0;return;}}_1e6._startSelect(type,_1e6._lastAnchorPoint[type],true,false,true);_1e6._highlight(type,_1e6._lastEndPoint[type],_1e6._toSelect);ks[type]=_1e8;}var _1ed=_1ea(type,_1eb,_1ec,evt);if(_1e6._isValid(type,_1ed,g)){_1e6._highlight(type,_1ed,_1e6._toSelect);}_1b2(evt);}},_1ee=function(type,_1ef,evt,_1f0){if(_1f0&&_1e6.selectEnabled()&&_1e6._config[type]!=_1a9){switch(evt.keyCode){case dk.SPACE:_1e6._startSelect(type,_1ef(),evt.ctrlKey,evt.shiftKey);_1e6._endSelect(type);break;case dk.SHIFT:if(_1e6._config[type]==_1ab&&_1e6._isValid(type,_1e6._lastAnchorPoint[type],g)){_1e6._endSelect(type);_1e6._keyboardSelect[type]=_1e7;_1e6._usingKeyboard=true;}}}},_1f1=function(type,evt,_1f2){if(_1f2&&evt.keyCode==dojo.keys.SHIFT&&_1e6._keyboardSelect[type]){_1e6._endSelect(type);_1e6._keyboardSelect[type]=0;}};if(g.views.views[0] instanceof dojox.grid._RowSelector){this._lastFocusedRowBarIdx=0;f.addArea({name:"rowHeader",onFocus:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _1f3=view.getCellNode(_1e6._lastFocusedRowBarIdx,0);if(_1f3){dojo.toggleClass(_1f3,f.focusClass,false);}if(evt&&"rowIndex" in evt){if(evt.rowIndex>=0){_1e6._lastFocusedRowBarIdx=evt.rowIndex;}else{if(!_1e6._lastFocusedRowBarIdx){_1e6._lastFocusedRowBarIdx=0;}}}_1f3=view.getCellNode(_1e6._lastFocusedRowBarIdx,0);if(_1f3){dijit.focus(_1f3);dojo.toggleClass(_1f3,f.focusClass,true);}f.rowIndex=_1e6._lastFocusedRowBarIdx;_1b2(evt);return true;}return false;},onBlur:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _1f4=view.getCellNode(_1e6._lastFocusedRowBarIdx,0);dojo.toggleClass(_1f4,f.focusClass,false);_1b2(evt);}return true;},onMove:function(_1f5,_1f6,evt){var view=g.views.views[0];if(_1f5&&view instanceof dojox.grid._RowSelector){var next=_1e6._lastFocusedRowBarIdx+_1f5;if(next>=0&&next<g.rowCount){_1b2(evt);var _1f7=view.getCellNode(_1e6._lastFocusedRowBarIdx,0);dojo.toggleClass(_1f7,f.focusClass,false);var sc=g.scroller;var _1f8=sc.getLastPageRow(sc.page);var rc=g.rowCount-1,row=Math.min(rc,next);if(next>_1f8){g.setScrollTop(g.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(_1e6._lastFocusedRowBarIdx));}_1f7=view.getCellNode(next,0);dijit.focus(_1f7);dojo.toggleClass(_1f7,f.focusClass,true);_1e6._lastFocusedRowBarIdx=next;f.cell=_1f7;f.cell.view=view;f.cell.getNode=function(_1f9){return f.cell;};f.rowIndex=_1e6._lastFocusedRowBarIdx;f.scrollIntoView();f.cell=null;}}}});f.placeArea("rowHeader","before","content");}f.addArea({name:"cellselect",onMove:dojo.partial(_1e9,"cell",function(type,_1fa,_1fb,evt){var _1fc=_1e6._currentPoint[type];return _1b3("cell",_1fc.row+_1fa,_1fc.col+_1fb);}),onKeyDown:dojo.partial(_1ee,"cell",function(){return _1b3("cell",f.rowIndex,f.cell.index);}),onKeyUp:dojo.partial(_1f1,"cell")});f.placeArea("cellselect","below","content");f.addArea({name:"colselect",onMove:dojo.partial(_1e9,"col",function(type,_1fd,_1fe,evt){var _1ff=_1e6._currentPoint[type];return _1b3("col",_1ff.col+_1fe);}),onKeyDown:dojo.partial(_1ee,"col",function(){return _1b3("col",f.getHeaderIndex());}),onKeyUp:dojo.partial(_1f1,"col")});f.placeArea("colselect","below","header");f.addArea({name:"rowselect",onMove:dojo.partial(_1e9,"row",function(type,_200,_201,evt){return _1b3("row",f.rowIndex);}),onKeyDown:dojo.partial(_1ee,"row",function(){return _1b3("row",f.rowIndex);}),onKeyUp:dojo.partial(_1f1,"row")});f.placeArea("rowselect","below","rowHeader");},_clearSelection:function(type,_202){if(type=="all"){this._clearSelection("cell",_202);this._clearSelection("col",_202);this._clearSelection("row",_202);return;}this._isUsingRowSelector=true;dojo.forEach(this._selected[type],function(item){if(!_1b1(type,_202,item)){this._highlightSingle(type,false,item);}},this);this._blurPoint(type,this._currentPoint);this._selecting[type]=false;this._startPoint[type]=this._currentPoint[type]=null;this._selected[type]=[];if(type=="row"&&!this.grid._selectingRange){this._oldDeselectAll.call(this.grid.selection);this.grid.selection._selectedById={};}this.grid.onEndDeselect(type,null,null,this._selected);this.grid.onSelectCleared(type);},_startSelect:function(type,_203,_204,_205,_206,_207){if(!this._isValid(type,_203)){return;}var _208=this._isSelected(type,this._lastEndPoint[type]),_209=this._isSelected(type,_203);this._toSelect=_206?_209:!_209;if(!_204||(!_209&&this._config[type]==_1aa)){this._clearSelection("all",_203);this._toSelect=_207===undefined?true:_207;}this._selecting[type]=true;this._currentPoint[type]=null;if(_205&&this._lastType==type&&_208==this._toSelect){if(type==="row"){this._isUsingRowSelector=true;}this._startPoint[type]=this._lastEndPoint[type];this._highlight(type,this._startPoint[type]);this._isUsingRowSelector=false;}else{this._startPoint[type]=_203;}this._curType=type;this._fireEvent("start",type);this._isStartFocus=true;this._isUsingRowSelector=true;this._highlight(type,_203,this._toSelect);this._isStartFocus=false;},_endSelect:function(type){if(type==="row"){delete this._isUsingRowSelector;}if(type=="all"){this._endSelect("col");this._endSelect("row");this._endSelect("cell");}else{if(this._selecting[type]){this._addToSelected(type);this._lastAnchorPoint[type]=this._startPoint[type];this._lastEndPoint[type]=this._currentPoint[type];if(this._toSelect){this._lastSelectedAnchorPoint[type]=this._lastAnchorPoint[type];this._lastSelectedEndPoint[type]=this._lastEndPoint[type];}this._startPoint[type]=this._currentPoint[type]=null;this._selecting[type]=false;this._lastType=type;this._fireEvent("end",type);}}},_fireEvent:function(_20a,type){switch(_20a){case "start":this.grid[this._toSelect?"onStartSelect":"onStartDeselect"](type,this._startPoint[type],this._selected);break;case "end":this.grid[this._toSelect?"onEndSelect":"onEndDeselect"](type,this._lastAnchorPoint[type],this._lastEndPoint[type],this._selected);break;}},_calcToHighlight:function(type,_20b,_20c,_20d){if(_20d!==undefined){var sltd;if(this._usingKeyboard&&!_20c){var last=this._isInLastRange(this._lastType,_20b);if(last){sltd=this._isSelected(type,_20b);if(_20d&&sltd){return false;}if(!_20d&&!sltd&&this._isInLastRange(this._lastType,_20b,true)){return true;}}}return _20c?_20d:(sltd||this._isSelected(type,_20b));}return _20c;},_highlightNode:function(node,_20e){if(node){var _20f="dojoxGridRowSelected";var _210="dojoxGridCellSelected";dojo.toggleClass(node,_20f,_20e);dojo.toggleClass(node,_210,_20e);}},_highlightHeader:function(_211,_212){var _213=this.grid.layout.cells;var node=_213[_211].getHeaderNode();var _214="dojoxGridHeaderSelected";dojo.toggleClass(node,_214,_212);},_highlightRowSelector:function(_215,_216){var _217=this.grid.views.views[0];if(_217 instanceof dojox.grid._RowSelector){var node=_217.getRowNode(_215);if(node){var _218="dojoxGridRowSelectorSelected";dojo.toggleClass(node,_218,_216);}}},_highlightSingle:function(type,_219,_21a,_21b,_21c){var _21d=this,toHL,g=_21d.grid,_21e=g.layout.cells;switch(type){case "cell":toHL=this._calcToHighlight(type,_21a,_219,_21b);var c=_21e[_21a.col];if(!c.hidden&&!c.notselectable){this._highlightNode(_21a.node||c.getNode(_21a.row),toHL);}break;case "col":toHL=this._calcToHighlight(type,_21a,_219,_21b);this._highlightHeader(_21a.col,toHL);dojo.query("td[idx='"+_21a.col+"']",g.domNode).forEach(function(_21f){var _220=_21e[_21a.col].view.content.findRowTarget(_21f);if(_220){var _221=_220[dojox.grid.util.rowIndexTag];_21d._highlightSingle("cell",toHL,{"row":_221,"col":_21a.col,"node":_21f});}});break;case "row":toHL=this._calcToHighlight(type,_21a,_219,_21b);this._highlightRowSelector(_21a.row,toHL);dojo.forEach(_21e,function(cell){_21d._highlightSingle("cell",toHL,{"row":_21a.row,"col":cell.index,"node":cell.getNode(_21a.row)});});this._selectedRowModified=true;if(!_21c){g.selection.setSelected(_21a.row,toHL);}}},_highlight:function(type,_222,_223){if(this._selecting[type]&&_222!==null){var _224=this._startPoint[type],_225=this._currentPoint[type],_226=this,_227=function(from,to,toHL){_226._forEach(type,from,to,function(item){_226._highlightSingle(type,toHL,item,_223);},true);};switch(type){case "col":case "row":if(_225!==null){if(_1ad(type,_222,_224,_225,true)){_227(_225,_222,false);}else{if(_1ad(type,_224,_222,_225,true)){_227(_225,_224,false);_225=_224;}_227(_222,_225,true);}}else{this._highlightSingle(type,true,_222,_223);}break;case "cell":if(_225!==null){if(_1ad("row",_222,_224,_225,true)||_1ad("col",_222,_224,_225,true)||_1ad("row",_224,_222,_225,true)||_1ad("col",_224,_222,_225,true)){_227(_224,_225,false);}}_227(_224,_222,true);}this._currentPoint[type]=_222;this._focusPoint(type,this._currentPoint);}},_focusPoint:function(type,_228){if(!this._isStartFocus){var _229=_228[type],f=this.grid.focus;if(type=="col"){f._colHeadFocusIdx=_229.col;f.focusArea("header");}else{if(type=="row"){f.focusArea("rowHeader",{"rowIndex":_229.row});}else{if(type=="cell"){f.setFocusIndex(_229.row,_229.col);}}}}},_blurPoint:function(type,_22a){var f=this.grid.focus;if(type=="col"){f._blurHeader();}else{if(type=="cell"){f._blurContent();}}},_addToSelected:function(type){var _22b=this._toSelect,_22c=this,_22d=[],_22e=[],_22f=this._startPoint[type],end=this._currentPoint[type];if(this._usingKeyboard){this._forEach(type,this._lastAnchorPoint[type],this._lastEndPoint[type],function(item){if(!_1ad(type,item,_22f,end)){(_22b?_22e:_22d).push(item);}});}this._forEach(type,_22f,end,function(item){var _230=_22c._isSelected(type,item);if(_22b&&!_230){_22d.push(item);}else{if(!_22b){_22e.push(item);}}});this._add(type,_22d);this._remove(type,_22e);dojo.forEach(this._selected.row,function(item){if(item.except.length>0){this._selectedRowModified=true;this.grid.selection.setSelected(item.row,false);}},this);},_forEach:function(type,_231,end,func,_232){if(!this._isValid(type,_231,true)||!this._isValid(type,end,true)){return;}switch(type){case "col":case "row":_231=_231[type];end=end[type];var dir=end>_231?1:-1;if(!_232){end+=dir;}for(;_231!=end;_231+=dir){func(_1b3(type,_231));}break;case "cell":var _233=end.col>_231.col?1:-1,_234=end.row>_231.row?1:-1;for(var i=_231.row,p=end.row+_234;i!=p;i+=_234){for(var j=_231.col,q=end.col+_233;j!=q;j+=_233){func(_1b3(type,i,j));}}}},_makeupForExceptions:function(type,_235){var _236=[];dojo.forEach(this._selected[type],function(v1){dojo.forEach(_235,function(v2){if(v1[type]==v2[type]){var pos=dojo.indexOf(v1.except,v2[_1ac[type]]);if(pos>=0){v1.except.splice(pos,1);}_236.push(v2);}});});return _236;},_makeupForCells:function(type,_237){var _238=[];dojo.forEach(this._selected.cell,function(v1){dojo.some(_237,function(v2){if(v1[type]==v2[type]){_238.push(v1);return true;}return false;});});this._remove("cell",_238);dojo.forEach(this._selected[_1ac[type]],function(v1){dojo.forEach(_237,function(v2){var pos=dojo.indexOf(v1.except,v2[type]);if(pos>=0){v1.except.splice(pos,1);}});});},_addException:function(type,_239){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_239,function(v2){v1.except.push(v2[_1ac[type]]);});});},_addCellException:function(type,_23a){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_23a,function(v2){if(v1[type]==v2[type]){v1.except.push(v2[_1ac[type]]);}});});},_add:function(type,_23b){var _23c=this.grid.layout.cells;if(type=="cell"){var _23d=this._makeupForExceptions("col",_23b);var _23e=this._makeupForExceptions("row",_23b);_23b=dojo.filter(_23b,function(item){return dojo.indexOf(_23d,item)<0&&dojo.indexOf(_23e,item)<0&&!_23c[item.col].hidden&&!_23c[item.col].notselectable;});}else{if(type=="col"){_23b=dojo.filter(_23b,function(item){return !_23c[item.col].hidden&&!_23c[item.col].notselectable;});}this._makeupForCells(type,_23b);this._selected[type]=dojo.filter(this._selected[type],function(v){return dojo.every(_23b,function(item){return v[type]!==item[type];});});}if(type!="col"&&this.grid._hasIdentity){dojo.forEach(_23b,function(item){var _23f=this.grid._by_idx[item.row];if(_23f){item.id=_23f.idty;}},this);}this._selected[type]=this._selected[type].concat(_23b);},_remove:function(type,_240){var comp=dojo.partial(_1b1,type);this._selected[type]=dojo.filter(this._selected[type],function(v1){return !dojo.some(_240,function(v2){return comp(v1,v2);});});if(type=="cell"){this._addCellException("col",_240);this._addCellException("row",_240);}else{this._addException(_1ac[type],_240);}},_isCellNotInExcept:function(type,item){var attr=item[type],_241=item[_1ac[type]];return dojo.some(this._selected[type],function(v){return v[type]==attr&&dojo.indexOf(v.except,_241)<0;});},_isSelected:function(type,item){if(!item){return false;}var res=dojo.some(this._selected[type],function(v){var ret=_1b1(type,item,v);if(ret&&type!=="cell"){return v.except.length===0;}return ret;});if(!res&&type==="cell"){res=(this._isCellNotInExcept("col",item)||this._isCellNotInExcept("row",item));if(type==="cell"){res=res&&!this.grid.layout.cells[item.col].notselectable;}}return res;},_isInLastRange:function(type,item,_242){var _243=this[_242?"_lastSelectedAnchorPoint":"_lastAnchorPoint"][type],end=this[_242?"_lastSelectedEndPoint":"_lastEndPoint"][type];if(!item||!_243||!end){return false;}return _1ad(type,item,_243,end);},_isValid:function(type,item,_244){if(!item){return false;}try{var g=this.grid,_245=item[type];switch(type){case "col":return _245>=0&&_245<g.layout.cells.length&&dojo.isArray(item.except)&&(_244||!g.layout.cells[_245].notselectable);case "row":return _245>=0&&_245<g.rowCount&&dojo.isArray(item.except);case "cell":return item.col>=0&&item.col<g.layout.cells.length&&item.row>=0&&item.row<g.rowCount&&(_244||!g.layout.cells[item.col].notselectable);}}catch(e){}return false;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.Selector,{"dependency":["autoScroll"]});})();}if(!dojo._hasResource["com.ibm.btt.dijit.Grid"]){dojo._hasResource["com.ibm.btt.dijit.Grid"]=true;dojo.provide("com.ibm.btt.dijit.Grid");dojo.declare("com.ibm.btt.dijit.Grid",[dojox.grid.EnhancedGrid,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",templateString:dojo.cache("com.ibm.btt.dijit","templates/Grid.html","<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\r\n\t\r\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridErroressages\" style=\"display: none;\" dojoAttachPoint=\"errorMessageNode\"></div>\r\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\r\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\r\n\t\r\n</div>\r\n"),name:"",width:"",storeData:"",comparatorMap:"",height:"300",sortEnabled:false,_firstTimeLoaded:true,SELECTION_VALID_STATE:true,selectionMode:"none",selectionRequired:false,selectable:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Grid"),readOnly:false,disabled:false,create:function(){this._eventHandlers=[];this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.selectable){console.debug("grid",this);this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(this.pagination){this._eventHandlers.push(dojo.connect(this.pagination.plugin,"gotoPage",this,function(){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}));}}));this._eventHandlers.push(dojo.connect(this,"onSelectionChanged",this,this.checkSelectionNum));}if(this.sortEnabled){this._eventHandlers.push(dojo.connect(this,"onHeaderCellClick",this,function(e){if(dojo.hasClass(e.target,"dojoxGridSortBtnSingle")||dojo.hasClass(e.target,"dojoxGridSortBtnNested")){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}}));}this._eventHandlers.push(dojo.connect(this,"_onFetchComplete",this,function(){this.checkSelectionNum();}));this._eventHandlers.push(dojo.connect(this,"onKeyDown",this,function(e){this._set("state",this._getState());}));if(this.selectionMode==="single"){this._eventHandlers.push(dojo.connect(this.selection,"addToSelection",this,function(_246){if(this._lastSelectedIndex===_246){this.selection.deselectAll();this._lastSelectedIndex=undefined;}else{this._lastSelectedIndex=_246;}}));}this.errorMessageIcon=dojo.create("div",{"class":"errorMessageIcon","style":"display:none;"},this.viewsHeaderNode,"last");this._eventHandlers.push(dojo.connect(this,"onCellClick",this,this._onCellWidgetClick));this._setComparatorForColunm();},_onCellWidgetClick:function(e){if(e.cell._onClick){e.cell._onClick(e);}},_getState:function(){var _247=[];var _248=this.layout.cells;for(var i=0;i<_248.length;i++){if(_248[i].editable&&_248[i].widget){_247.push(_248[i].widget);}}var _249=dojo.map(_247,function(w){return w.get("state")||"";});return dojo.indexOf(_249,"Error")>=0||!this.SELECTION_VALID_STATE?"Error":dojo.indexOf(_249,"Incomplete")>=0?"Incomplete":"";},postMixInProperties:function(){this.inherited(arguments);var _24a=this;(function(obj){if(dojo.isArray(obj)){for(var i=0;i<obj.length;i++){arguments.callee(obj[i]);}}else{if(dojo.isObject(obj)){if(obj.name){obj.name=_24a.getI18NString(obj.name);}else{if(obj.cells){arguments.callee(obj.cells);}}}}})(this.structure);},setStoreData:function(_24b){this.setStore(new dojo.data.ItemFileWriteStore({data:{items:_24b}}));},_setStoreDataAttr:function(_24c){if(!this.store){this.store=new dojo.data.ItemFileWriteStore({data:{items:dojo.fromJson(_24c)}});}},_setComparatorForColunm:function(){var _24d;if(this.comparatorMap!=""){_24d=dojo.fromJson(this.comparatorMap);}else{_24d={};}for(var i=0;i<this.structure[0].length;i++){if(this.structure[0][i].type){var cell=this.getCellByField(this.structure[0][i].field);if(cell.comparator){_24d[this.structure[0][i].field]=dojo.hitch(cell,cell.comparator);}}}this.store.comparatorMap=_24d;},getEditableStroeData:function(){if(this.storeDataName){var _24e=this.layout.cells;var _24f=this.store;var _250=this.selectable;var _251=[];this.store.fetch({onComplete:function(_252,_253){for(var m=0;m<_252.length;m++){var _254={};var flag=false;for(var i=0;i<_24e.length;i++){if(_24e[i].editable){var name=_24e[i].field;var _255=_24f.getValue(_252[m],_24e[i].field);if(_255&&_255!==""&&typeof _255!="string"){if(_24e[i].editable&&_24e[i].widget&&_24e[i].widget.serialize){_255=_24e[i].widget.serialize(_255,_24e[i].widget.constraints);}}_254[name]=(_255===null||_255==="null"?"":_255);flag=true;}}if(flag){_251.push(_254);}}}});if(_251.length>0){return _251;}else{return;}}else{return;}},onFormSubmit:function(){if(this.disabled){return;}if(this.storeDataName){var _256=this.layout.cells;var _257=this.store;var _258=this.storeDataName;var node=this.domNode;var _259=this.selectable;dojo.query("> input[type=hidden]",node).forEach(function(node,_25a,_25b){dojo.destroy(node);});if(!(this.store instanceof dojox.data.QueryReadStore)){this.store.fetch({onComplete:function(_25c,_25d){for(var m=0;m<_25c.length;m++){for(var i=0;i<_256.length;i++){if(_257.getValue(_25c[m],_256[i].field)!=null){break;}}if(i==_256.length){continue;}for(var i=0;i<_256.length;i++){if(_256[i].editable){var _25e={};_25e.type="hidden";_25e.name=_258+"."+m+"."+_256[i].field;_25e.value=_257.getValue(_25c[m],_256[i].field);if(_25e.value&&_25e.value!==""&&typeof _25e.value!="string"){if(_256[i].editable&&_256[i].widget&&_256[i].widget.serialize){_25e.value=_256[i].widget.serialize(_25e.value,_256[i].widget.constraints);}}_25e.value=_25e.value===null?"":_25e.value;dojo.create("input",_25e,node,"last");}}}}});}if(this.name&&this.selectable){var _256=this.layout.cells;var name=this.name;var _257=this.store;var node=this.domNode;var _25f=this.selection.getSelected();for(var m=0;m<_25f.length;m++){var _260=this.selectionMode=="single";if(_260&&m==1){break;}var _261=_25f[m];dojo.forEach(_257.getAttributes(_261),function(_262){var _263={};_263.type="hidden";if(_260){_263.name=name+"."+_262;}else{_263.name=name+"."+m+"."+_262;}_263.value=_257.getValue(_261,_262);for(var i=0;i<_256.length;i++){if(_256[i].field==_262){if(_263.value&&_263.value!==""&&typeof _263.value!="string"){if(_256[i].editable&&_256[i].widget&&_256[i].widget.serialize){_263.value=_256[i].widget.serialize(_263.value,_256[i].widget.constraints);}}_263.value=_263.value===null?"":_263.value;dojo.create("input",_263,node,"last");break;}}console.debug("tempObj",_263);});}}}},_getValueAttr:function(_264){if(this.selectable){var _265=this.selection.getSelected();var _266=this.layout.cells;var _267=this.store;var _268=[];if(_265.length>0){for(var m=0;m<_265.length;m++){var _269=_265[m];var _26a={};dojo.forEach(_267.getAttributes(_269),function(_26b){for(var i=0;i<_266.length;i++){if(_266[i].field==_26b){_26a[_26b]=_267.getValue(_269,_26b);if(_26a[_26b]&&_26a[_26b]!==""&&typeof _26a[_26b]!="string"){if(_266[i].editable&&_266[i].widget&&(_266[i].widget instanceof com.ibm.btt.dijit.DateTextBox||_266[i].widget instanceof com.ibm.btt.dijit.NumberTextBox)&&_266[i].formatter){_26a[_26b]=_266[i].widget.serialize(_26a[_26b],_266[i].widget.constraints);}}_26a[_26b]=_26a[_26b]===null?"":_26a[_26b];break;}}});console.debug("tempObj",_26a);if(this.selectionMode=="single"){return _26a;}if(_26a&&_26a!==""){_268.push(_26a);}}return _268;}else{return null;}}else{if(this._cellEventRowData){return this._cellEventRowData;}else{return undefined;}}},_setVisibilityAttr:function(_26c){this.visibility=_26c;if(_26c=="gone"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}if(this._firstTimeLoaded){this._eventHandlers.push(dojo.connect(this,"startup",dojo.hitch(this,function(){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");})));}else{dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}}else{if(_26c=="hidden"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");this.update();}}this._firstTimeLoaded=false;},getValueInSelectedItem:function(_26d){return this.getValueInFirstSelectedItem(_26d);},getValueInFirstSelectedItem:function(_26e){var _26f=this.selection.getFirstSelected();if(_26f){return this.store.getValue(_26f,_26e);}else{return null;}},getLengthOfSelectedRows:function(){return this.selection.getSelected().length;},getSelectedItem:function(){return this.attr("value");},_setWidthAttr:function(_270){if(_270!=""){this.width=this.handleLenUint(_270);dojo.style(this.domNode,"width",this.width);}},_setHeightAttr:function(_271){if(_271!=""){this.height=this.handleLenUint(_271);}},canSort:function(){if(this.sortEnabled&&this.disabled==false){return this.inherited(arguments);}else{return false;}},validate:function(_272,_273,_274){},checkSelectionNum:function(){this.showErrorIcon("");var _275=this.selection.getSelected().length;var msg="";console.debug("this.selectionRequired",this.selectionRequired);console.debug("selectNum",_275);if(this.selectionRequired&&_275<1){if(this.selectionMode==="single"){msg=this._bundle.getMessage("rangeSingleMessage");this.SELECTION_VALID_STATE=false;}else{if(this.selectionMode==="extended"){msg=this._bundle.getMessage("rangeMultiMessage");this.SELECTION_VALID_STATE=false;}}}else{this.SELECTION_VALID_STATE=true;}this.showErrorIcon(msg);this._set("state",this._getState());},showErrorIcon:function(_276){if(_276){this.errorMessageIcon.title=_276;this.errorMessageIcon.style.display="";var hint=this.get("hint");if(hint!=undefined&&hint!=null&&hint!=""){this._hint=hint;this.set("hint",_276);}}else{this.errorMessageIcon.title="";this.errorMessageIcon.style.display="none";if(this._hint){this.set("hint",this._hint);delete this._hint;}}},isValid:function(){var _277=this._getState()=="";console.debug("isValid",_277);return _277;},reset:function(){if((this.readOnly===true)||(this.disabled===true)){this.removeSelectedRows();return;}if(this.store instanceof dojo.data.ItemFileReadStore){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}this.store.revert();}},_setReadOnlyAttr:function(_278){console.debug("_setReadOnlyAttr",_278);this.readOnly=_278;},_setDisabledAttr:function(_279){console.debug("_setDisabledAttr",_279);this.disabled=_279;if(this.disabled){this._disableCache={};if(this.selectionMode!="none"){this._disableCache.selectionMode=this.selectionMode;this.selectionMode="none";this.selection.setMode(this.selectionMode);}if(this.columnReordering){this._disableCache.columnReordering=this.columnReordering;this.columnReordering=false;if(this._pending_requests){this._refresh(true);}else{setTimeout(dojo.hitch(this,function(){this._refresh(true);}),1000);}}console.log("Grid attached events : ",this._attachEvents);dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_27a,arr){dojo.style(node,"overflow","hidden");});if(!dojo.query(".disabledGrid",this.id).length){var mask=dojo.create("div",{"class":"disabledGrid"},this.domNode);var _27b=function(e){e.preventDefault();e.stopPropagation();};mask.onclick=_27b;mask.onDblClick=_27b;mask.onmouseover=_27b;mask.onmousemove=_27b;mask.onmouseout=_27b;mask.onmouseleave=_27b;mask.onmouseenter=_27b;mask.onmouseup=_27b;mask.onmousedown=_27b;mask.onfocus=_27b;mask.onkeydown=_27b;mask.onkeyup=_27b;mask.onkeypress=_27b;mask.onblur=_27b;mask.onkeypress=_27b;_27b=undefined;}dojo.addClass(this.domNode,"dijitDisabled");}else{if(this._disableCache&&this._disableCache.selectionMode){this.selectionMode=this._disableCache.selectionMode;this.selection.setMode(this.selectionMode);delete this._disableCache.selectionMode;}if(this._disableCache&&this._disableCache.columnReordering){this.columnReordering=this._disableCache.columnReordering;delete this._disableCache.columnReordering;this._refresh(true);}dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_27c,arr){dojo.style(node,"overflow","auto");});dojo.query(".disabledGrid",this.id).forEach(function(node){dojo.destroy(node);});if(this._disableCache){delete this._disableCache;}dojo.removeClass(this.domNode,"dijitDisabled");}},focusOn:function(){if(!this.isFocusable()){console.info("can't focus on grid, because it's not focusable");return;}var _27d=(this.rowCount===0);if(!_27d){var _27e=0;var cell=this.getCell(_27e);if(cell.hidden){_27e=this.focus.isNavHeader()?this.focus._colHeadFocusIdx:0;}this.focus.setFocusIndex(0,_27e);}else{this.focus.focusHeader();}},canEdit:function(_27f,_280){console.debug("[this.readOnly,this.disabled]",this.readOnly,this.disabled);if((this.readOnly===true)||(this.disabled===true)){console.debug("can't edit");return false;}else{var _281=this.inherited(arguments);console.debug("canEdit:",_281);return _281;}},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){vs.onBeforeRow=function(_282,_283){if(_282<0){_283[0].hidden=false;return;}var item=this.grid.getItem(_282);if(!item){return;}var _284=this.grid.layout.cells;for(var i=0;i<_284.length;i++){if(this.grid.store.getValue(item,_284[i].field)!==null){_283[0].hidden=false;return;}}_283[0].hidden=true;};}this.inherited(arguments);},onFetchError:function(err,req){if(err.responseText){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:err.responseText})).show();}},getWidget:function(arg){var _285=this.layout.cells;for(var i=0;i<_285.length;i++){if(_285[i].id==arg){return _285[i];}}return undefined;},destroy:function(){dojo.forEach(this._eventHandlers,dojo.disconnect);this._eventHandlers=undefined;this.inherited(arguments);if(this.store&&this.store.destroy){this.store.destroy();}},_setClassAttr:function(arg){if(this.disabled){return;}else{this.inherited(arguments);}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){}});}if(!dojo._hasResource["com.ibm.btt.dijit.Message"]){dojo._hasResource["com.ibm.btt.dijit.Message"]=true;dojo.provide("com.ibm.btt.dijit.Message");dojo.requireLocalization("com.ibm.btt.dijit","Message", null, "ROOT,zh-cn");dojo.declare("com.ibm.btt.dijit.Message",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div><div dojoAttachPoint='staticHolder'><span dojoAttachPoint='staticMessageHolder' class='dijitLabelBase'></span><span dojoAttachPoint='closeHandler' style='margin:0 0 0 5px;text-decoration:underline;cursor:pointer'></span></div><div dojoAttachPoint='dialogHolder'><span dojoAttachPoint='popupMessageHolder' class='dijitLabelBase'></span></div></div>",level:"ERROR",text:"",styleClass:"",name:"",messageArray:"",_popupDialog:null,isNotSubmitted:true,displayMode:"STATIC",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{visibility:{node:"domNode"},value:{}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Message");},postCreate:function(){this._init();this._showHideCloseHandler(false);if(this.text){this.display(this.text,this.level);}else{if(this.messageArray){try{var _286=dojo.fromJson(this.messageArray);this.displayMessageArray(_286);}catch(e){}}}},_init:function(){this.closeHandler.innerHTML=this.bundle.getMessage("closeMessage");this.styleClass={"ERROR":"errorMessage","WARN":"warnMessage","INFO":"infoMessage"};dojo.connect(this.closeHandler,"onclick",this,"closeMessage");},display:function(text,_287){if((text==="")||(text===null)||(text===undefined)){console.info("[display] Need text message for displaying");this._showHideCloseHandler(false);return;}var _288=this._getMessageValue.apply(this,arguments);this.staticMessageHolder.innerHTML=_288;if(_287===undefined){_287=this.level;}this._switchModeAndStyles("STATIC",_287);this._showHideCloseHandler(true);},displayMessageArray:function(_289){if(_289.length>0){var _28a=[];for(var i=0;i<_289.length;i++){_28a.push((i+1)+" ");_28a.push(this._getMessageValue(_289[i]));if(i!=_289.length-1){_28a.push("<br>");}}var _28b=_28a.join("");if(this.displayMode==="STATIC"){this.display(_28b);}else{this.displayPopup(_28b);}}},_showHideCloseHandler:function(flag){if(flag){dojo.style(this.closeHandler,{"display":""});}else{dojo.style(this.closeHandler,{"display":"none"});}},displayPopup:function(text,_28c){if((text==="")||(text===null)||(text===undefined)){console.info("[displayPopup] Need text message for displaying");return;}var _28d=this._getMessageValue.apply(this,arguments);this.popupMessageHolder.innerHTML=_28d;if(_28c===undefined){_28c=this.level;}this._switchModeAndStyles("POPUP",_28c);if(this._popupDialog===null){var _28e=this.id+"messagePopup";this._popupDialog=new dijit.Dialog({id:_28e,title:this.bundle.getMessage("popupTitle")},this.dialogHolder);}this._popupDialog.show();},closeMessage:function(){if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":"none"});}else{if(this._popupDialog!==null){this._popupDialog.hide();}else{console.error("[Should have a popup dialog]");}}},_setTextWrapAttr:function(_28f){this.textWrap=_28f;this._setTextLabelStyle();},_setWidthAttr:function(_290){if(_290!=""&&_290!=null){this.width=_290;dojo.style(this.staticMessageHolder,"width",this.handleLenUint(this.width));dojo.style(this.popupMessageHolder,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_291){if(_291!=""&&_291!=null){this.height=_291;dojo.style(this.staticMessageHolder,"height",this.handleLenUint(this.height));dojo.style(this.popupMessageHolder,"height",this.handleLenUint(this.height));}},_switchModeAndStyles:function(mode,_292){this.displayMode=mode;if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":""});dojo.style(this.dialogHolder,{"display":"none"});if(this._popupDialog!==null){this._popupDialog.hide();}dojo.removeClass(this.staticMessageHolder);dojo.addClass(this.staticMessageHolder,this.styleClass[_292]);}else{dojo.style(this.dialogHolder,{"display":""});dojo.style(this.staticHolder,{"display":"none"});dojo.removeClass(this.popupMessageHolder);dojo.addClass(this.popupMessageHolder,this.styleClass[_292]);}this._setTextLabelStyle();},_setTextLabelStyle:function(){dojo.addClass(this.popupMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.popupMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.popupMessageHolder,"dijitLabelWrap");}dojo.addClass(this.staticMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.staticMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.staticMessageHolder,"dijitLabelWrap");}},_getMessageValue:function(text,_293){var _294="";if(arguments.length===1){_294=this.getI18NString(text);}else{if(arguments.length===2){_294=this.getI18NString(text);}else{if(arguments.length>2){var _295=[];for(var i=2;i<arguments.length;i++){_295.push(arguments[i]);}console.debug("display,dynamic attributes values",_295);_294=this.getI18NString(text,_295,true);}}}return _294;},_setValueAttr:function(_296){this.text=_296;},destroy:function(){this.inherited(arguments);if(this._popupDialog!==null){this._popupDialog.destroyRecursive();}}});}if(!dojo._hasResource["dojox.uuid.generateRandomUuid"]){dojo._hasResource["dojox.uuid.generateRandomUuid"]=true;dojo.provide("dojox.uuid.generateRandomUuid");dojox.uuid.generateRandomUuid=function(){var _297=16;function _298(){var _299=Math.floor((Math.random()%1)*Math.pow(2,32));var _29a=_299.toString(_297);while(_29a.length<8){_29a="0"+_29a;}return _29a;};var _29b="-";var _29c="4";var _29d="8";var a=_298();var b=_298();b=b.substring(0,4)+_29b+_29c+b.substring(5,8);var c=_298();c=_29d+c.substring(1,4)+_29b+c.substring(4,8);var d=_298();var _29e=a+_29b+b+_29b+c+d;_29e=_29e.toLowerCase();return _29e;};}if(!dojo._hasResource["com.ibm.btt.dijit.FileUpload"]){dojo._hasResource["com.ibm.btt.dijit.FileUpload"]=true;dojo.provide("com.ibm.btt.dijit.FileUpload");dojo.declare("com.ibm.btt.dijit.FileUpload",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/FileUpload.html","<div dojoAttachPoint=\"fileuploader\" class = \"fileupload_pane\">\r\n<!--\r\n/* \r\n *------------------------------------------------------------------- \r\n * Licensed Materials - Property of IBM\r\n * Restricted Materials of IBM\r\n * 5724-H82\r\n * (C) Copyright IBM Corp.2010 All Rights Reserved.\r\n * US Government Users Restricted Rights - Use, duplication or disclosure\r\n * restricted by GSA ADP Schedule Contract with IBM Corp\r\n -------------------------------------------------------------------\r\n */\r\n-->\r\n\t<span dojoAttachPoint=\"inputBox\"></span>\r\n\t<span dojoAttachPoint=\"browseBtn\"></span>\r\n\t<div dojoAttachPoint=\"uploadBtn\"></div>\r\n\t<span dojoAttachPoint=\"statusMessage\" class=\"loadingMsg\"></span>\r\n\t<div dojoAttachPoint=\"clearBtn\"></div>\r\n\t<span dojoAttachPoint=\"errorMessage\" class=\"errorMsg\"></span>\r\n</div>\r\n\r\n\r\n"),state:"Incomplete",required:false,disabled:false,_visibilityHolder:[],_isDisabled_uploadButton:false,tabIndex:"-1",width:"",_browse_width:null,inputText:null,f0:null,uploadButton:null,cancelButton:null,_state:"none",value:"",currentFileInfo:null,fileExtension:"",uploadUrl:"",storeDataName:"",bttParams:"",_bttParamJSON:null,_accessByKey:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","FileUpload"),postCreate:function(){this._bttParamJSON=dojo.fromJson(this.bttParams);this.createInsideWidgets();this.renderItems();this.connectEvents();this.onShow();this._tabSupport(false);this.inherited(arguments);},createInsideWidgets:function(){this.inputText=new dijit.form.TextBox({},this.inputBox);dojo.addClass(this.inputText.domNode,"inputBox");this.setReadOnly(this.inputText,true);this.inputText.reset=null;this.uploadButton=new dijit.form.Button({label:this._bundle.getMessage("UPLOAD_BUTTON_LABEL")},this.uploadBtn);this.cancelButton=new dijit.form.Button({label:this._bundle.getMessage("CANCEL_BUTTON_LABEL")},this.clearBtn);this.browseBtn.innerHTML=this._bundle.getMessage("BROWSE_BUTTON_LABEL");var _29f=this._buildParameter();var _2a0;if(dojo.isIE){dojo.addClass(this.uploadButton.domNode,"commonButton");dojo.addClass(this.cancelButton.domNode,"commonButton");}this.f0=new com.ibm.btt.dijit.FileUploader(dojo.mixin({force:"html",uploadUrl:this.uploadUrl+_29f,showProgress:false,selectMultipleFiles:false,uploadOnChange:false,tabIndex:-1},_2a0),this.browseBtn);dojo.style(this.f0.insideNode,{"width":"0px"});this._calculateWidth();},_buildParameter:function(){var _2a1="?dataName="+this.storeDataName;if(this._bttParamJSON.dse_processorId){_2a1+="&processId="+this._bttParamJSON.dse_processorId;}if(this._bttParamJSON.dse_sessionId){_2a1+="&sessionId="+this._bttParamJSON.dse_sessionId;}return _2a1;},_calculateWidth:function(){var _2a2=dojo.style(this.inputText.domNode,"width");var _2a3=dojo.style(this.uploadButton.domNode,"width");var _2a4=dojo.style(this.f0.domNode,"width");var _2a5=dojo.style(this.cancelButton.domNode,"width");var _2a6=35;var _2a7=_2a3+_2a4+_2a5+_2a6;var _2a8=_2a2+_2a7;if(this.width){var _2a9=this.width.substr(0,this.width.lastIndexOf("px"));if(_2a9&&_2a9>_2a8){if(this.width&&_2a9>_2a8){dojo.style(this.fileuploader,"width",this.width);dojo.style(this.inputText.domNode,"width",(_2a9-_2a7)+"px");}else{dojo.style(this.fileuploader,"width",_2a8+"px");}}}this._browse_width=dojo.style(this.f0.domNode,"width");},_tabSupport:function(_2aa){if(_2aa){}else{this.inputText.set("tabIndex","-1");this.f0.domNode.setAttribute("tabIndex","-1");this.f0.domNode.setAttribute("wairole","presentation");this.f0.domNode.setAttribute("role","presentation");this.f0.insideNode.setAttribute("wairole","presentation");this.f0.insideNode.setAttribute("role","presentation");this.f0._fileInput.setAttribute("tabIndex","0");}},renderItems:function(){console.debug("this.value",this.value);if(this.value){this._state="done";this._set("state","");try{this.currentFileInfo=dojo.fromJson(this.value);}catch(e){console.debug("error occurs",e);this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.value="";}}else{this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}}this._initRenderItems();this._initUIProperties();},_initRenderItems:function(){this.inputText.set("value","");this._clearMessage();if(this._state=="done"){console.debug("this.currentFileInfo",this.currentFileInfo);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width","0px");this.setVisibility(this.inputText.domNode,false,true);this.setVisibility(this.uploadButton.domNode,false,true);this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML=this.currentFileInfo.name;}else{dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.inputText.domNode,true);this.setVisibility(this.uploadButton.domNode,false,false);this.setVisibility(this.cancelButton.domNode,false,false);}},_initUIProperties:function(){this._visibilityHolder=[];if(this.visibility=="hidden"||this.visibility=="gone"){if(this._state=="none"){this._visibilityHolder.push({dijit:this.inputText.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});this.setVisibility(this.inputText.domNode,false,false);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}else{this._visibilityHolder.push({dijit:this.cancelButton.domNode,visibility:"visible"});this.setVisibility(this.cancelButton.domNode,false,true);this._visibilityHolder.push({dijit:this.statusMessage,visibility:"visible"});dojo.style(this.statusMessage,"visibility","hidden");}}},_clearMessage:function(){this.statusMessage.innerHTML="";this.errorMessage.innerHTML="";dojo.style(this.errorMessage,"display","none");this._showErrorInputBox(false);},connectEvents:function(){dojo.connect(this.f0,"onChange",this,this._handleSelect);dojo.connect(this.uploadButton,"onClick",this,this._handleUpload);dojo.connect(this.f0,"onComplete",this,function(_2ab){var _2ac=_2ab[0];console.debug("response",_2ac);var _2ad=_2ac.name;var _2ae=_2ac.errorCode;if(_2ad=="TypeError"||_2ae){this.handleError(_2ae);}else{this.handleSuccess(_2ac);}});dojo.connect(this.f0,"onCancel",this,function(){if(this.required){if(this._state=="none"&&(!this.f0._fileInput.value)){this._showErrorInputBox(true);this.displayMessage(this._bundle.getMessage("UPLOAD_REQUIRED"));}}});dojo.connect(this.f0,"onError",this,function(){console.debug("onError",this._state);if(this._state=="canceling"){}else{this.handleError();}});dojo.connect(this.cancelButton,"onClick",this,function(){this.reset();});},_handleSelect:function(data){this.setVisibility(this.cancelButton.domNode,true);this.setVisibility(this.uploadButton.domNode,true);this._clearMessage();var _2af=data[0];this.inputText.set("value",_2af.name);var mask=_2af.name.substr(_2af.name.lastIndexOf(".")+1).toLowerCase();if(this.fileExtension!=""&&this.fileExtension.indexOf(mask)==-1){this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.displayMessage(this._bundle.getMessage("UPLOAD_ERRORFILEMASK",{value:this.fileExtension}));this._showErrorInputBox(true);this._state="error";this._set("state","Error");this.validate();}else{this.setDisabled(this.uploadButton,false);this._isDisabled_uploadButton=false;this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.validate();}},_handleUpload:function(){this._state="uploading";this._set("state","Incomplete");this.setVisibility(this.uploadButton.domNode,false,true);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.domNode,"width","0px");dojo.fadeOut({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML="";var _2b0=document.createElement("img");var _2b1=dojo.moduleUrl("com.ibm.btt.dijit","images/loading.gif");_2b0.setAttribute("src",_2b1.path);this.statusMessage.appendChild(_2b0);var _2b2=document.createElement("span");_2b2.innerHTML="  "+this._bundle.getMessage("UPLOAD_UPLOADING");this.statusMessage.appendChild(_2b2);console.debug("before f0.upload");var uuid=this.getUUID();this.f0.fileUploadUUID=uuid;this.f0.upload();console.debug("after f0.upload");setTimeout(dojo.hitch(this,this._queryFileSizeFromServer),3000);this.onUpload();},getUUID:function(){return dojox.uuid.generateRandomUuid();},_queryFileSizeFromServer:function(){if(this._state=="uploading"&&this.f0.fileUploadUUID){var _2b3={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=querySize",handleAs:"json",load:dojo.hitch(this,function(data){if(data&&this._state=="uploading"){if(data.errorCode=="7"){this.f0.cancel();}}}),error:dojo.hitch(this,function(_2b4){if(this._state=="uploading"){this.reset();}})};dojo.xhrGet(_2b3);}},_clearFizeSizePendingOnServer:function(){if(this.f0.fileUploadUUID){var _2b5={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=cancelPending",handleAs:"json",load:dojo.hitch(this,function(data){console.debug("Cancel the file uploading pending on server successfully");}),error:dojo.hitch(this,function(_2b6){console.debug("Error when canceling the file uploading pending on server");})};dojo.xhrGet(_2b5);}},reset:function(){if(this._state=="done"){this._handleDelete();}else{this._handleCancel();}},_handleCancel:function(){if(this._state=="none"||this._state=="error"){this._resetUIforCancel();this.onCancel();}else{if(this._state=="uploading"){this._state="canceling";this._set("state","Incomplete");this.f0.cancel();this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();var _2b7=function(_2b8,args){this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();};var _2b9=function(_2ba,args){this.displayMessage(this._bundle.getMessage("CANCEL_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._clearFizeSizePendingOnServer();this._deleteFile(_2b7,_2b9);}}},_resetUIforCancel:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.f0._clearUserSelection();this._initRenderItems();},_handleDelete:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();var _2bb=function(_2bc,args){console.debug("sucess delete");this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();this.onDelete();};var _2bd=function(_2be,args){console.debug("error delete");this.displayMessage(this._bundle.getMessage("DELETE_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._deleteFile(_2bb,_2bd);},handleError:function(_2bf){this._state="error";this._set("state","Error");this.statusMessage.innerHTML="";this.setVisibility(this.inputText.domNode,true);this._showErrorInputBox(true);dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.uploadButton.domNode,true);this.setDisabled(this.f0,false);this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.setVisibility(this.cancelButton.domNode,true);if(_2bf=="7"){this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE_FILESIZE"));}else{this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE"));}this._clearFizeSizePendingOnServer();this.onError();},handleSuccess:function(_2c0){this._state="done";this._set("state","");this.statusMessage.innerHTML=_2c0.name;this.value=_2c0.name;this.currentFileInfo=_2c0;console.debug("currentFileInfo",this.currentFileInfo);this.setVisibility(this.inputText.domNode,false,true);this.onComplete();},_showErrorInputBox:function(_2c1){if(_2c1){dojo.removeClass(this.inputText.domNode,"inputBox");dojo.addClass(this.inputText.domNode,"errInputBox");}else{dojo.removeClass(this.inputText.domNode,"errInputBox");dojo.addClass(this.inputText.domNode,"inputBox");}},_deleteFile:function(_2c2,_2c3){if(this._bttParamJSON&&this.currentFileInfo){console.debug("currentFileInfo",this.currentFileInfo);var _2c4=this._buildParameter();_2c4+="&fileId="+this.currentFileInfo.fileId;dojo.xhrDelete({url:this.uploadUrl+_2c4,preventCache:true,error:dojo.hitch(this,function(_2c5,args){dojo.hitch(this,_2c3)(_2c5,args);}),load:dojo.hitch(this,function(_2c6,args){if(_2c6.errorCode){dojo.hitch(this,_2c3)(_2c6,args);}else{this.currentFileInfo=null;dojo.hitch(this,_2c2)(_2c6,args);}})});}},onUpload:function(){this.validate();},onComplete:function(){this.validate();},onCancel:function(){this.validate();},onError:function(){this.validate();},onDelete:function(){this.validate();},validate:function(){},getFileInfo:function(){return this.currentFileInfo;},reload:function(){this.value="";this.currentFileInfo=null;this._resetUIforCancel();},_setVisibilityAttr:function(_2c7){this.visibility=_2c7;if(_2c7=="gone"){this._allDisappear();dojo.style(this.domNode,"visibility","hidden");dojo.style(this.domNode,"display","none");}else{if(_2c7=="hidden"){this._allDisappear();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{this._allShowUp();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_allShowUp:function(){dojo.forEach(this._visibilityHolder,function(v){dojo.style(v.dijit,"visibility",v.visibility);});this._visibilityHolder=[];},_holdVisibilityFeatures:function(_2c8){this._visibilityHolder.push({dijit:_2c8,visibility:"visible"});},_allDisappear:function(){if(this.inputText){if(this.isVisible(this.inputText.domNode)){this._holdVisibilityFeatures(this.inputText.domNode);}dojo.style(this.inputText.domNode,"visibility","hidden");}if(this.f0){if(this.isVisible(this.f0.domNode)){this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});}dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}if(this.uploadButton){if(this.isVisible(this.uploadButton.domNode)){this._holdVisibilityFeatures(this.uploadButton.domNode);}dojo.style(this.uploadButton.domNode,"visibility","hidden");}if(this.cancelButton){if(this.isVisible(this.cancelButton.domNode)){this._holdVisibilityFeatures(this.cancelButton.domNode);}dojo.style(this.cancelButton.domNode,"visibility","hidden");}},displayMessage:function(_2c9){dojo.style(this.errorMessage,"display","");if(_2c9){this.errorMessage.innerHTML=_2c9;}},setVisibility:function(_2ca,_2cb,_2cc){if(_2cb){dojo.style(_2ca,"visibility","visible");dojo.style(_2ca,"display","");}else{dojo.style(_2ca,"visibility","hidden");if(_2cc){dojo.style(_2ca,"display","none");}}},isVisible:function(_2cd){var _2ce=dojo.style(_2cd,"visibility");if(_2ce=="visible"){return true;}else{if(_2ce=="inherit"&&dojo.style(this.domNode,"visibility")=="visible"){return true;}else{return false;}}},setDisabled:function(_2cf,_2d0){if(_2cf){_2cf.set("disabled",_2d0);}},setReadOnly:function(_2d1,_2d2){if(_2d1){_2d1.set("readOnly",_2d2);}},onFormSubmit:function(){if(dojo.isIE){this.f0._formNode.innerHTML="";}},_setDisabledAttr:function(_2d3){this.disabled=_2d3;this.inherited(arguments);this.setDisabled(this.f0,_2d3);if(!_2d3){this.setDisabled(this.uploadButton,this._isDisabled_uploadButton);}else{this.setDisabled(this.uploadButton,_2d3);}this.setDisabled(this.cancelButton,_2d3);}});dojo.declare("com.ibm.btt.dijit.FileUploader",[dojox.form.FileUploader],{dfd:null,trueFocus:false,isShowDialog:false,fileUploadUUID:"",cancel:function(){if(this.dfd){this.dfd.cancel();if(dojo.isIE){dojo.io.iframe._frame.contentWindow.document.location.replace("about:blank");}else{dojo.io.iframe._frame.contentWindow.stop();}}},uploadHTML:function(){if(this.selectMultipleFiles){dojo.destroy(this._fileInput);}this._setHtmlPostData();if(this.showProgress){this._animateProgress();}if(this.dfd){dojo.destroy(this.dfd);}this.dfd=dojo.io.iframe.send({url:this.fileUploadUUID?(this.uploadUrl+"&uuid="+this.fileUploadUUID):this.uploadUrl,form:this._formNode,handleAs:"json",error:dojo.hitch(this,function(err){console.debug("error",err.message);this._error("HTML Upload Error:"+err.message);}),load:dojo.hitch(this,function(data,_2d4,_2d5){this._complete(data);})});console.debug("dfd",this.dfd);},_clearUserSelection:function(){this.fileInputs=[];if(dojo.isIE){if(this._fileInput){this._disconnect();this._formNode.removeChild(this._fileInput);}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var nm=this.htmlFieldName;var _2d6=this.id;if(this.selectMultipleFiles){nm+=this.fileCount;_2d6+=this.fileCount;this.fileCount++;}dojo.attr(this._fileInput,{id:this.id,name:nm,type:"file",onKeyPress:function(){return !(window.event&&window.event.keyCode==13);}()});dojo.addClass(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);var real=dojo.marginBox(this._fileInput);dojo.style(this._fileInput,{position:"relative",left:(this.fhtml.nr.w-real.w)+"px",opacity:0});this._connectInput();}else{this._fileInput.value="";}},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:"insideNode"}),onFocusOnInputText:function(){},_connectInput:function(){this._disconnect();this._cons.push(dojo.connect(this._fileInput,"mouseover",this,function(evt){dojo.addClass(this.domNode,this.hoverClass);this.onMouseOver(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseout",this,function(evt){setTimeout(dojo.hitch(this,function(){dojo.removeClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseOut(evt);this._checkHtmlCancel("off");}),0);}));this._cons.push(dojo.connect(this._fileInput,"mousedown",this,function(evt){dojo.addClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseDown(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseup",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);this.onMouseUp(evt);this.onClick(evt);this._checkHtmlCancel("up");}));this._cons.push(dojo.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}]);}));if(this.tabIndex>=0){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this._cons.push(dojo.connect(this._fileInput,"focus",this,function(){if(!dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}else{this.trueFocus=true;}if(this.dialogIsOpen){if(dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}this.onCancel();}this.dialogIsOpen=false;}));if(dojo.isIE){this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.keyCode==dojo.keys.TAB&&this.trueFocus){dojo.addClass(this.domNode,this.activeClass);}else{if(evt.charCode==dojo.keys.SPACE&&this.trueFocus){this.dialogIsOpen=true;}else{if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);}}}}));}else{this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.charCode==dojo.keys.SPACE){this.dialogIsOpen=true;}}));}this._cons.push(dojo.connect(this._fileInput,"blur",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);if(dojo.isIE){this.trueFocus=false;}}));},applyAccessKey:function(){if(this.f0._fileInput&&this.accessKey){this.f0._fileInput.setAttribute("accessKey",this.accessKey);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Group"]){dojo._hasResource["com.ibm.btt.dijit.Group"]=true;dojo.provide("com.ibm.btt.dijit.Group");dojo.declare("com.ibm.btt.dijit.Group",[dijit._Widget,dijit._Templated,dijit._Container,dijit.layout._ContentPaneResizeMixin,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",parseOnLoad:true,isContainer:true,width:"",height:"",templateString:"<fieldset dojoAttachPoint='domNode' class='dijitGroupBase'><legend dojoAttachPoint='textNode'></legend><div dojoAttachPoint='containerNode'></div></fieldset>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"textNode"},width:{node:"containerNode"},height:{node:"containerNode"}}),_setTextAttr:function(_2d7){this.text=_2d7;this.textNode.innerHTML=StringUtil.escapeHTML(this.getI18NString(_2d7));},_setWidthAttr:function(_2d8){if(_2d8!=""){this.width=_2d8;dojo.style(this.domNode,"width",this.handleLenUint(this.width));dojo.style(this.domNode,"overflow","hidden");}},_setHeightAttr:function(_2d9){if(_2d9!=""){this.height=_2d9;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]){dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]=true;dojo.provide("com.ibm.btt.dijit.TabbedPane");dojo.declare("com.ibm.btt.dijit.TabbedPane",[dijit.layout.TabContainer,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"800",height:"600",constructor:function(){this._disableWatch={};},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"com.ibm.btt.dijit.ScrollingTabController":"com.ibm.btt.dijit.TabController";},startup:function(){this.inherited(arguments);this.set("visibility",this.visibility);var _2da=this.getChildren();dojo.forEach(_2da,function(_2db){this._disableWatch[_2db.id]=_2db.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_2db));},this);this._setInitialTabSelection();},_setVisibilityAttr:function(_2dc){this.inherited(arguments);if(typeof (this.tablist)!=="undefined"){if(_2dc=="gone"){dojo.style(this.tablist.domNode,"visibility","visible");}else{if(_2dc=="hidden"){dojo.style(this.tablist.domNode,"visibility","hidden");}else{dojo.style(this.tablist.domNode,"visibility","visible");}}}},closeChildByIndex:function(i){var _2dd=this.getChildren();this.closeChild(_2dd[i]);},closeChildById:function(id){var _2de=this.getChildren();for(var i=0;i<_2de.length;i++){if(id===_2de[i].id){this.closeChild(_2de[i]);}}},selectChildByIndex:function(i){var _2df=this.getChildren();this.selectChild(_2df[i]);},selectChildById:function(id){var _2e0=this.getChildren();for(var i=0;i<_2e0.length;i++){if(id===_2e0[i].id){this.selectChild(_2e0[i]);break;}}},closeChild:function(_2e1){if(_2e1.get("disabled")!=true){this.inherited(arguments);}},selectChild:function(_2e2){if(_2e2.get("disabled")!=true){this.inherited(arguments);}},hideTabByIndex:function(_2e3){var _2e4=this.getChildren();if(_2e3>-1&&_2e3<_2e4.length){var _2e5=this._getCurrentVisibleTabs();if(_2e5.length>1){var _2e6=_2e4[_2e3];var _2e7=this.tablist.pane2button[_2e6.id];dojo.style(_2e7.domNode,"display","none");_2e7._displayMark="hidden";if(_2e6.selected){var i;for(i=0;i<_2e5.length;i++){if(_2e5[i].id==_2e6.id){break;}}if(i+1<_2e5.length){this.selectChildById(_2e5[i+1].id);}else{this.selectChildById(_2e5[i-1].id);}}}}},showTabByIndex:function(_2e8){var _2e9=this.getChildren();if(_2e8>-1&&_2e8<_2e9.length){var _2ea=this.getChildren()[_2e8];this.showTabById(_2ea.id);}},hideTabById:function(id){var _2eb=this.getChildren();for(var i=0;i<_2eb.length;i++){if(id===_2eb[i].id){this.hideTabByIndex(i);break;}}},showTabById:function(id){var _2ec=this.tablist.pane2button[id];dojo.style(_2ec.domNode,"display","");_2ec._displayMark="visible";},removeChild:function(_2ed){this.inherited(arguments);this._disableWatch[_2ed.id].unwatch();delete this._disableWatch[_2ed.id];},addChild:function(_2ee,_2ef){this.inherited(arguments);this._disableWatch[_2ee.id]=_2ee.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_2ee));},_checkDisabedPane:function(_2f0,name,_2f1,_2f2){if(_2f2==true){var _2f3=this.tablist.pane2button[_2f0.id];_2f3.set("disabled",true);}else{var _2f3=this.tablist.pane2button[_2f0.id];_2f3.set("disabled",false);if(dojo.isIE){dojo.removeAttr(_2f0.domNode,"disabled");}}this._setTabSelection();},_setInitialTabSelection:function(){var _2f4=this._getCurrentVisibleTabs();var _2f5=0;for(var i=0;i<_2f4.length;i++){if(_2f4[i].get("disbaled")==true){_2f5++;}}if(_2f4.length>0&&_2f5==_2f4.length){_2f4[0].disable=false;this.selectChildByIndex(0);_2f4[0].disable=true;}else{this._setTabSelection();}},_setTabSelection:function(){var _2f6=this._getCurrentVisibleTabs();var _2f7=-1;for(var i=0;i<_2f6.length;i++){if(_2f6[i].selected){_2f7=i;}}if(_2f7>-1&&_2f6[_2f7].get("disabled")==true){for(var m=_2f7+1;m<_2f6.length;m++){if(_2f6[m].get("disabled")==false){this.selectChildById(_2f6[m].id);return;}}for(var m=_2f7-1;m>=0;m--){if(_2f6[m].get("disabled")==false){this.selectChildById(_2f6[m].id);return;}}}},_getCurrentVisibleTabs:function(){var _2f8=this.getChildren();var _2f9=[];for(var i=0;i<_2f8.length;i++){var _2fa=this.tablist.pane2button[_2f8[i].id];if(!_2fa._displayMark||_2fa._displayMark=="visible"){_2f9.push(_2f8[i]);}}return _2f9;},_setWidthAttr:function(_2fb){if(_2fb!=""){this.width=_2fb;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2fc){if(_2fc!=""){this.height=_2fc;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});dojo.declare("com.ibm.btt.dijit.ScrollingTabController",[dijit.layout.ScrollingTabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});dojo.declare("com.ibm.btt.dijit.TabController",[dijit.layout.TabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});}if(!dojo._hasResource["com.ibm.btt.dijit.ContentPane"]){dojo._hasResource["com.ibm.btt.dijit.ContentPane"]=true;dojo.provide("com.ibm.btt.dijit.ContentPane");dojo.declare("com.ibm.btt.dijit.ContentPane",[dijit.layout.ContentPane,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin],{disabled:false,_setDisabledAttr:function(_2fd){this._set("disabled",_2fd);},_setTitleAttr:function(_2fe){this.titleKey=_2fe;var _2ff=this.getI18NString(_2fe);this._set("title",_2ff);},_getTitleAttr:function(){return this.titleKey;}});}if(!dojo._hasResource["com.ibm.btt.dijit.Hidden"]){dojo._hasResource["com.ibm.btt.dijit.Hidden"]=true;dojo.provide("com.ibm.btt.dijit.Hidden");dojo.declare("com.ibm.btt.dijit.Hidden",[dijit._Widget,dijit._Templated],{value:"",name:"",state:"",type:"hidden",templateString:"<input type='${type}'/>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:{node:"domNode"},name:{node:"domNode"}}),_setValueAttr:function(_300){this.value=_300;this.domNode.value=_300;}});}if(!dojo._hasResource["com.ibm.btt.event.BaseMonitor"]){dojo._hasResource["com.ibm.btt.event.BaseMonitor"]=true;dojo.provide("com.ibm.btt.event.BaseMonitor");dojo.declare("com.ibm.btt.event.BaseMonitor",null,{oldEvent:null,monitorEvent:function(_301,rule){},monitorStartRule:function(_302,rule){},monitorEndRule:function(_303,rule){},monitorCondition:function(_304,rule,_305){},monitorStartAG:function(rule){},monitorEndAG:function(rule){},monitorAGCondition:function(rule,_306){},monitorCallFunctionAction:function(id,_307,_308){},monitorGetPropertyAction:function(id,_309,_30a){},monitorSetPropertyAction:function(id,_30b,_30c){}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridComparer"]){dojo._hasResource["com.ibm.btt.dijit.GridComparer"]=true;dojo.provide("com.ibm.btt.dijit.GridComparer");dojo.declare("com.ibm.btt.dijit.GridComparer",null,{compareNumber:function(_30d){var cons={};if(_30d["pattern"]){cons["pattern"]=_30d["pattern"];}return function(str1,str2){var num1=dojo.number.parse(str1,cons);if(isNaN(num1)){num1=Number(str1);}var num2=dojo.number.parse(str2,cons);if(isNaN(num2)){num2=Number(str1);}if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareCurrency:function(_30e){return function(str1,str2){var num1=parseFloat(str1);var num2=parseFloat(str2);if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareString:function(_30f){return function(str1,str2){if(str1>str2){return 1;}else{if(str1<str2){return -1;}else{return 0;}}};},compareDate:function(_310){return function(str1,str2){var _311="yyyy-MM-dd";if(_310){var _312=_310["pattern"];if(_312){_311=_312;}}var _313={selector:"date",datePattern:_311,fullYear:true};var _314=dojo.date.locale.parse(str1,_313);var _315=dojo.date.locale.parse(str2,_313);var _316=_314?_314:str1;var _317=_315?_315:str2;return dojo.date.compare(_316,_317);};}});(function(){if(com.ibm.btt.dijit.GridComparer.instance==undefined){com.ibm.btt.dijit.GridComparer.instance=new com.ibm.btt.dijit.GridComparer();}})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetSizeMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetSizeMixin",null,{width:"",height:"",_setWidthAttr:function(_318){if(_318!=""){this.width=_318;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_319){if(_319!=""){this.height=_319;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},handleLenUint:function(_31a){var _31b=function(src,_31c){var reg=new RegExp(_31c+"$");return reg.test(src);};if(_31b(_31a,"px")||_31b(_31a,"%")||_31b(_31a,"em")){return _31a;}else{return _31a+"px";}}});}if(!dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]){dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]=true;dojo.provide("com.ibm.btt.event.ConsoleMonitor");dojo.declare("com.ibm.btt.event.ConsoleMonitor",com.ibm.btt.event.BaseMonitor,{monitorStartRule:function(_31d,rule){console.debug("Start Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_31d.id+"."+_31d.e);},monitorEndRule:function(_31e,rule){console.debug("End Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_31e.id+"."+_31e.e);},monitorCondition:function(_31f,rule,_320){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_320);},monitorStartAG:function(rule){console.debug("Start Action Group : "+rule.name,rule);},monitorEndAG:function(rule){console.debug("End Action Group : "+rule.name,rule);},monitorAGCondition:function(rule,_321){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_321);},monitorCallFunctionAction:function(id,_322,args,_323){if(typeof (_323)!="undefined"&&_323!=null){console.debug("    CallFunction Action : ",id+"."+_322," , args=",args,", result=",_323);}else{console.debug("    CallFunction Action : ",id+"."+_322," , args=",args);}},monitorGetPropertyAction:function(id,_324,_325){console.debug("    GetProperty Action : ",id+"."+_324+"=="+_325);},monitorSetPropertyAction:function(id,_326,_327){console.debug("    SetProperty Action : ",id+"."+_326+"="+_327);}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]){dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]=true;dojo.provide("com.ibm.btt.util.GlobalFunctions");(function(){function _328(obj){return typeof (obj)=="undefined"||obj==null?true:false;};function _329(obj){if((obj.constructor===Number&&!isFinite(obj)&&!isNaN(obj))||/^[-+]?\d+$|^[-+]?\d+\.\d+$/.test(obj)){return true;}else{return false;}};function _32a(obj){if(obj.constructor===Number){return obj;}else{return Number(obj);}};function _32b(obj){if(obj.constructor===Date){return true;}else{return false;}};var _32c={getI18NString:function(arg){return I18nUtil.getI18nString(arg);},length:function(str){return _328(str)?undefined:str.toString().length;},subString:function(str,_32d,end){if(!_328(str)&&_329(_32d)&&_329(end)){_32d=_32a(_32d);end=_32a(end);if(_32d>end||_32d<0||end>str.toString().length){return undefined;}else{return str.toString().substring(_32d,end);}}else{return undefined;}},indexOf:function(str,_32e){return _328(str)||_328(_32e)?undefined:str.toString().indexOf(_32e.toString());},lastIndexOf:function(str,_32f){return _328(str)||_328(_32f)?undefined:str.toString().lastIndexOf(_32f.toString());},contains:function(str,str2){if(_328(str)||_328(str2)){return false;}else{return this.indexOf(str.toString(),str2.toString())>-1?true:false;}},replace:function(_330,str1,str2){return !_328(_330)&&!_328(str1)&&!_328(str1)?_330.toString().replace(new RegExp(str1.toString(),"g"),str2.toString()):_330;},trim:function(str){return _328(str)?undefined:str.toString().replace(/^(\s|\u00A0)+/,"").replace(/(\s|\u00A0)+$/,"");},concat:function(str1,str2){if(_328(str1)&&_328(str2)){return undefined;}else{if(_328(str1)){return str2.toString();}else{if(_328(str2)){return str1.toString();}else{return str1.toString().concat(str2.toString());}}}},upperCase:function(str){return _328(str)?undefined:str.toString().toUpperCase();},lowerCase:function(str){return _328(str)?undefined:str.toString().toLowerCase();},compare:function(str1,str2){if(_328(str1)||_328(str2)){return undefined;}if(str1.toString()>str2.toString()){return 1;}else{if(str1.toString()<str2.toString()){return -1;}else{return 0;}}},compareIgnoreCase:function(str1,str2){return _328(str1)||_328(str2)?undefined:str1.toString().toUpperCase().localeCompare(str2.toString().toUpperCase());}};var _331={today:function(){return new Date();},after:function(date,days,_332,_333){if(_328(date)||!_32b(date)){return undefined;}if(!_328(days)&&_329(days)){date.setDate(date.getDate()+_32a(days));}if(!_328(_332)&&_329(_332)){date.setMonth(date.getMonth()+_32a(_332));}if(!_328(_333)&&_329(_333)){date.setFullYear(date.getFullYear()+_32a(_333));}return date;},before:function(date,days,_334,_335){if(_328(date)||!_32b(date)){return undefined;}if(!_328(days)&&_329(days)){date.setDate(date.getDate()-_32a(days));}if(!_328(_334)&&_329(_334)){date.setMonth(date.getMonth()-_32a(_334));}if(!_328(_335)&&_329(_335)){date.setFullYear(date.getFullYear()-_32a(_335));}return date;},daysBetween:function(_336,_337){if(_328(_336)||_328(_337)||!_32b(_336)||!_32b(_337)){return undefined;}var _338=Date.UTC(_336.getFullYear(),_336.getMonth(),_336.getDate(),_336.getHours(),_336.getMinutes(),_336.getSeconds(),_336.getMilliseconds())-Date.UTC(_337.getFullYear(),_337.getMonth(),_337.getDate(),_337.getHours(),_337.getMinutes(),_337.getSeconds(),_337.getMilliseconds());return _338/(1000*60*60*24);},naturalDaysBetween:function(_339,_33a){if(_328(_339)||_328(_33a)||!_32b(_339)||!_32b(_33a)){return undefined;}var _33b=Date.UTC(_339.getFullYear(),_339.getMonth(),_339.getDate(),0,0,0,0)-Date.UTC(_33a.getFullYear(),_33a.getMonth(),_33a.getDate(),0,0,0,0);return _33b/(1000*60*60*24);},dayOfWeek:function(date){if(_328(date)||!_32b(date)){return undefined;}return date.getDay();},year:function(date){if(_328(date)||!_32b(date)){return undefined;}return date.getFullYear();},month:function(date){if(_328(date)||!_32b(date)){return undefined;}return date.getMonth();},day:function(date){if(_328(date)||!_32b(date)){return undefined;}return date.getDate();},parseDate:function(obj,_33c){if(_33c){var _33d={};_33d.formatLength="long";_33d.datePattern=_33c;_33d.selector="date";try{var _33e=dojo.date.locale.parse(obj,_33d);if(_33e!=null){return _33e;}else{return undefined;}}catch(ee){return undefined;}}else{if(_328(obj)||!(/^\d{4}-\d{2}-\d{2}$/.test(obj.toString()))){return undefined;}return new Date(obj);}},toString:function(obj){if(_328(obj)||!_32b(obj)){return undefined;}var _33f=obj.getMonth()+1;if(_33f<10){_33f="0"+_33f;}var day=obj.getDate();if(day<10){day="0"+day;}return obj.getFullYear()+"-"+_33f+"-"+day;}};var _340={round:function(num){if(_328(num)||!_329(num)){return undefined;}return Math.round(num);},truncate:function(num,flag){if(_328(num)||!_329(num)){return undefined;}if(flag){return Math.ceil(num);}else{return Math.floor(num);}},absolute:function(num){if(_328(num)||!_329(num)){return undefined;}return Math.abs(num);}};window.BTTStringFunctions=_32c;window.BTTDateFunctions=_331;window.BTTNumberFunctions=_340;})();}if(!dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]){dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]=true;dojo.provide("com.ibm.btt.dijit.plugins.Pagination");dojo.declare("com.ibm.btt.dijit.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"bttpagination",mode:"simple",timeout:500,keepSingleSelection:false,_paginateable:true,init:function(){this._initParams();this._createPaginators(this.option);this._regApis();if(this.initialMode=="client"){if(this.mode=="simple"){this._requestFirstPage();}else{this.gotoPage("initial");}}},_initParams:function(){var _341=this;var _342=function(_343,_344){return _341.option[_343]?_341.option[_343]:(_341.grid[_343]?_341.grid[_343]:_344);};var _345=function(arg,_346){var tmp=Number(arg);if(isNaN(tmp)){return _346;}else{return tmp;}};this.mode=_342("mode",this.mode);this.timeout=_345(_342("timeout",this.timeout),this.timeout);this.initialMode=_342("initialMode","server");this.totalRowNumber=_342("totalRowNumber",this.totalRowNumber);this.rowsPerPage=_342("rowsPerPage",this.rowsPerPage);this.bttParams=_342("bttParams",{});if(this.mode=="simple"){this._setPageSize(this.totalRowNumber);this.defaultRows=_342("defaultRows",25);this._currentPage=0;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");}if(this.mode=="nonePageSize"){var _347=function(arg){if(arg=="false"){return false;}else{if(arg=="true"){return true;}else{return arg;}}};this.prevBtnEnabled=_342("enablePrevious",false);this.prevBtnEnabled=_347(this.prevBtnEnabled);this.nextBtnEnabled=_342("enableNext",true);this.nextBtnEnabled=_347(this.nextBtnEnabled);}},_setPageSize:function(_348){if(typeof (_348)!="defined"&&_348!=null&&_348!="null"){this.totalRowNumber=_348;this._maxSize=this.totalRowNumber;this.pageSize=this.rowsPerPage;this.totalPageSize=Math.ceil(this.totalRowNumber/this.rowsPerPage);}},_createPaginators:function(_349){this.paginators=[];if(this.mode=="simple"){if(_349.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_349,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_349,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_349,{plugin:this}))];}}else{if(this.mode=="nonePageSize"){if(_349.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_349,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_349,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_349,{plugin:this}))];}}else{console.error("Unsupport pagination mode, please check the parameter definition.");}}dojo.forEach(this.paginators,function(f){f.update();});},_stopEvent:function(_34a){try{dojo.stopEvent(_34a);}catch(e){}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});this.paginators=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage+2);}if(this.mode=="nonePageSize"){this.gotoPage("next");}},prevPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage);}if(this.mode=="nonePageSize"){this.gotoPage("prev");}},gotoFirstPage:function(e){this.gotoPage(1);},gotoLastPage:function(e){this.gotoPage(this.totalPageSize);},gotoPage:function(e){if(this._paginateable==true){if(this.mode=="simple"&&e>=1&&e<=this.totalPageSize&&e!=(this._currentPage+1)){this._requestPageByNum(e);}if(this.mode=="nonePageSize"&&((e=="initial")||(e=="next"&&this.nextBtnEnabled)||(e=="prev"&&this.prevBtnEnabled))&&e!=(this._currentPage+1)){this._fetchData({"pageRequest.pageEvent":e,"mode":this.mode});}this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}},_requestPageByNum:function(e){this._fetchData({"pageRequest.pageEvent":"page","pageRequest.pageNumber":e,"mode":this.mode});this._currentPage=e-1;},_requestFirstPage:function(){this._fetchData({"pageRequest.pageEvent":"initial","pageRequest.pageNumber":1,"mode":this.mode});this._currentPage=0;},_fetchData:function(arg){console.log(this.bttParams);AjaxUtil.xhrPost({handleAs:"text",timeout:this.timeout,success:dojo.hitch(this,this._handleResponse),error:dojo.hitch(this,this._handleError)},dojo.mixin(this.bttParams,arg));},_handleResponse:function(arg){try{var data=dojo.fromJson(arg);if(data.items){if(this.grid.get("store")){var _34b=this.grid.get("store");_34b.close();}this.grid.set("store",new dojo.data.ItemFileWriteStore({data:{items:data.items}}));this.grid._refresh();if(this.mode=="simple"){this._setPageSize(data.totalRowNumber);}if(this.mode=="nonePageSize"){if(typeof (data.enableNext)!="undefined"){}this.nextBtnEnabled=this._setBtnState(data.enableNext);this.prevBtnEnabled=this._setBtnState(data.enablePrevious);}dojo.forEach(this.paginators,function(p){p.update();});}if(this.grid.selection.mode==="single"&&!this.keepSingleSelection){this.grid.selection.deselectAll();}if(data&&data.errMsg){this.grid.showErrorIcon(data.errMsg);}this.grid.onAsyncOK(arguments);}catch(e){(new dijit.Dialog({title:"",content:arg})).show();this.grid.onAsyncError(arguments);}this._paginateable=true;},_setBtnState:function(_34c){if(typeof (_34c)!="undefined"&&_34c!="null"&&_34c!=null){if(_34c==true||_34c=="true"){return true;}else{return false;}}return false;},_handleError:function(arg){console.error("An error occured when loading pagination data from "+AjaxUtil.ajaxOperationUrl);this._paginateable=true;if(arg.dojoType==="timeout"){this.grid.onAsyncTimeOut(arguments);}else{if(arg.status!==undefined){this.grid.onAsyncError(arguments);}}},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("com.ibm.btt.dijit.plugins.SimplePaginator",[dojox.grid.enhanced.plugins._Paginator],{pageSizes:undefined,showAll:true,_updateDescription:function(){},disableBtns:function(){var _34d=null,_34e=this._getCurrentPageNo(),_34f=this._getPageCount(),_350=0;var _351=function(node,_352,_353){var _354=node.value,_355=_352?"dojoxGrid"+_354+"Btn":"dojoxGridNumBtnDisabled",_356=_352?"dojoxGrid"+_354+"BtnDisable":"dojoxGridNumBtnDisabled";if(_353){dojo.addClass(node,_356);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_355);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _357=node.value=="prevPage"||node.value=="firstPage"?1:_34f;_351(node,true,true);}else{_34d=parseInt(node.value,10);_351(node,false,true);}},this);}});dojo.declare("com.ibm.btt.dijit.plugins.NonePageSizePaginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\r\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\r\n\t\t<tr>\r\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\r\n\t\t\t\t<div dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\r\n\t\t\t</td>\r\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\"></td>\r\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\r\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n",position:"bottom",_maxItemSize:10,description:true,pageStepper:"30em",constructor:function(_358){dojo.mixin(this,_358);this.grid=this.plugin.grid;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_359,_35a){self._changeSize=g._pendingChangeSize=_359;self._resultSize=g._pendingResultSize=_35a;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.nextBtnEnabled=this.plugin.nextBtnEnabled?this.plugin.nextBtnEnabled:this.grid.nextBtnEnabled;this.prevBtnEnabled=this.plugin.prevBtnEnabled?this.plugin.prevBtnEnabled:this.grid.prevBtnEnabled;this._updatePageStepper();},disableBtns:function(){var _35b=function(node,_35c,_35d){var _35e=node.value,_35f=_35c?"dojoxGrid"+_35e+"Btn":"dojoxGridInactived",_360=_35c?"dojoxGrid"+_35e+"BtnDisable":"dojoxGridActived";if(_35d){dojo.addClass(node,_360);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_35f);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");_35b(node,true,true);}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");_35b(node,true,true);}},this);},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _361=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var _362,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){_362=_361(flag,"px")||_361(flag,"%")||_361(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){_362=flag+"px";}}this[t]=_362?true:false;this[t+"Width"]=_362;},this);},_regFocusMgr:function(_363){this.grid.focus.addArea({name:"pagination"+_363,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_363){case "top":this.grid.focus.placeArea("pagination"+_363,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_363,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _364=dojo.trim(this.position.toLowerCase());switch(_364){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_365,_366){var g=this.grid;_365=_365||this._changeSize;_366=_366||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _367=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_367;}if(_366){_365=_366;}if(_365){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_367;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_367;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_367;dojo.style(g.viewsNode,"height",h+"px");var _368=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_368){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,_369,_36a){var _36b=this.grid.messagesNode;dojo.style(_36b,{"position":"absolute","top":top+"px","width":_369+"px","height":_36a+"px","z-Index":"100"});},_updateDescription:function(){},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(this.pageStepperDiv.childNodes.length<1){this._createWardBtns();}this._updatePageStepNodeClass();},_createWardBtns:function(){var self=this;var _36c={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _36d=function(_36e,_36f,_370){_36f=I18nUtil.getI18nString(_36f);var node=dojo.create("div",{value:_36e,title:_36f,tabindex:1},self.pageStepperDiv,_370);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));dijit.setWaiState(node,"label",_36f);var _371=dojo.create("span",{value:_36e,title:_36f,innerHTML:_36c[_36e]},node,_370);dojo.addClass(_371,"dojoxGridWardButtonInner");};_36d("prevPage","%com.ibm.btt.dijit.Grid/prevPageBtn","first");_36d("nextPage","%com.ibm.btt.dijit.Grid/nextPageBtn","last");},_updatePageStepNodeClass:function(){var _372=function(node,_373,_374){var _375=node.value,_376=_373?"dojoxGrid"+_375+"Btn":"dojoxGridInactived",_377=_373?"dojoxGrid"+_375+"BtnDisable":"dojoxGridActived";if(_374){dojo.addClass(node,_377);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_376);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.prevBtnEnabled){_372(node,true,false);}else{_372(node,true,true);}}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.nextBtnEnabled){_372(node,true,false);}else{_372(node,true,true);}}},this);},_onFocusPaginator:function(_378,step){if(!this._currentFocusNode){if(step!=0){return this._onFocusPageStepNode(_378);}else{return false;}}else{return false;}},_onFocusPageStepNode:function(_379){var _37a=this._getPageStepActivableNodes();if(_379&&_379.type!=="click"){if(_37a[0]){dijit.focus(_37a[0]);this._currentFocusNode=_37a[0];this.focusArea="pageStep";this.plugin._stopEvent(_379);return true;}else{return false;}}if(_379&&_379.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),_379.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(_379);return true;}}return false;},_onBlurPaginator:function(_37b,step){var _37c=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_37c.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(_37d,_37e){if(_37e){return;}if(_37d.altKey||_37d.metaKey){return;}var dk=dojo.keys;if(_37d.keyCode===dk.ENTER||_37d.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(_37d);}}this.plugin._stopEvent(_37d);},_moveFocus:function(_37f,_380,evt){var _381;if(this.focusArea=="pageStep"){_381=this._getPageStepActivableNodes();if(this.gotoPageDiv){_381.push(this.gotoPageDiv);}}if(_381.length<1){return;}var _382=dojo.indexOf(_381,this._currentFocusNode);var _383=_382+_380;if(_383>=0&&_383<_381.length){dijit.focus(_381[_383]);this._currentFocusNode=_381[_383];}this.plugin._stopEvent(evt);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageStepNodes:function(){var _384=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_384.push(this.pageStepperDiv.childNodes[i]);}return _384;},_onPageStep:function(e){var g=this.grid;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}switch(e.target.value){case "prevPage":if(e.target.className.indexOf("dojoxGridprevPageBtnDisable")<=0){g.prevPage();}break;case "nextPage":if(e.target.className.indexOf("dojoxGridnextPageBtnDisable")<=0){g.nextPage();}break;}}});dojox.grid.EnhancedGrid.registerPlugin(com.ibm.btt.dijit.plugins.Pagination);}if(!dojo._hasResource["com.ibm.btt.dijit.Dialog"]){dojo._hasResource["com.ibm.btt.dijit.Dialog"]=true;dojo.provide("com.ibm.btt.dijit.Dialog");dojo.declare("com.ibm.btt.dijit.Dialog",[dijit.Dialog,com.ibm.btt.dijit.AbstractWidgetMixin],{closable:false,_setClosableAttr:function(_385){this.closable=_385;if(this.closable){dojo.style(this.closeButtonNode,"display","");}else{dojo.style(this.closeButtonNode,"display","none");}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _386=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_386){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_386){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE&&this.closable){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]){dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]=true;dojo.provide("com.ibm.btt.dijit.ScreenCover");dojo.declare("com.ibm.btt.dijit.ScreenCover",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div class='dijitScreenCover' style='display:none;'><div dojoAttachPoint='containerNode' class='dijitScreenCoverContainer'><div dojoAttachPoint='imageNode' class='dijitScreenCoverImage'></div><div dojoAttachPoint='textNode' class='dijitScreenCoverText'></div></div></div>",text:"%com.ibm.btt.dijit.ScreenCover/waitingText",postCreate:function(){this.inherited(arguments);dojo.body().appendChild(this.domNode);this.domNode.style.display="none";this._events=[];this._events.push(dojo.connect(dojo.global,"onresize",this,this.layout));},layout:function(){var _387=dojo.window.getBox();var bb=dojo._getBorderBox(this.containerNode);var l=Math.floor(_387.l+(_387.w-bb.w)/2);var t=Math.floor(_387.t+(_387.h-bb.h)/2);dojo.style(this.domNode,{top:_387.t+"px",left:_387.l+"px",width:_387.w+"px",height:_387.h+"px"});dojo.style(this.containerNode,{left:l+"px",top:t+"px"});},_setTextAttr:function(_388){this.text=_388;this.textNode.innerHTML=this.getI18NString(_388);},show:function(){this.domNode.style.display="block";this.layout();},hide:function(){this.domNode.style.display="none";},destroy:function(){this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.event.NavigationEngine"]){dojo._hasResource["com.ibm.btt.event.NavigationEngine"]=true;dojo.provide("com.ibm.btt.event.NavigationEngine");dojo.declare("com.ibm.btt.event.NavigationEngine",[com.ibm.btt.event.Engine],{url:"Request",_commandMap:{},_contentPane:null,_dialog:null,_cover:null,constructor:function(){var _389=this;if(dojo._postLoad){this.postCreate();this.onLoad();}else{dojo.addOnLoad(function(){_389.postCreate();_389.onLoad();});}},postCreate:function(){this.registerCommand("render_page",dojo.hitch(this,this.renderPageHandler));this.registerCommand("popup_page",dojo.hitch(this,this.popupPageHandler));this.registerCommand("redirect",dojo.hitch(this,this.redirectPage));this.registerCommand("remote_flow",dojo.hitch(this,this.remoteFlowHandler));this.registerCommand("do_nothing",function(){console.info("do nothing is returned from server side.");});},onLoad:function(e){this._delegateAllFormSubmit();dojo.forEach(dojo.filter(dojo.query("form"),function(form){return form.title&&form.title!="";}),function(form){eval(form.title);});this._getCover().hide();},setUrl:function(_38a){this.url=_38a;},registerCommand:function(type,_38b){this._commandMap[type]=_38b;},_queryAllWidgets:function(node){if(!node){node=dojo.body();}return dojo.query("[widgetId]",node).map(dijit.byNode);},_disposeAllWidgets:function(){this.clearRules();if(this._contentPane){this._destroyContentPane();this._destroyDialog();}else{this._destroyDialog();this._destroyCover();var _38c=this._queryAllWidgets();_38c.forEach(function(_38d){try{_38d.destroy();}catch(e){console.error("An error occured, while destroying the widget. Error:"+e);}});dojo.empty(dojo.body());dijit._masterTT=undefined;}},_unregisterEvents:function(arg,flag){if(flag){while(arg.length>0){dojo.disconnect(arg.pop());}}else{dojo.disconnect(arg);}},_delegateAllFormSubmit:function(){var _38e=this;dojo.forEach(this._queryAllWidgets(),function(_38f){if(_38f.type!="undefined"&&(_38f.type=="save"||_38f.type=="cancel")){var _390=_38f._onButtonClick;_38f._onButtonClick=dojo.hitch(_38e,_38e._onButtonClick,_38f,_390);}if(_38f.domNode.nodeName==="A"){_38f.onClick=dojo.hitch(_38e,_38e._onLinkClick,_38f);}if(_38f.domNode.nodeName==="FORM"){_38f.onSubmit=dojo.hitch(_38f,function(e){if(e){if(e.preventDefault){e.preventDefault();}dojo.stopEvent(e);}if(_38f.validateOnSubmit){if(!_38f.isValid()||!_38f.xValid){return false;}}dojo.forEach(_38f.getDescendants(),function(_391){if(_391.onFormSubmit){try{_391.onFormSubmit();}catch(e){console.error("Error occured while excuting the onFormSubmit events before form submitted.");}}});var _392=_38f._querySubmitButton(e);if(_38f.onFormSubmit){_38f.onFormSubmit();}_38e._submitFormData(_38f,_392);return false;});}});},_onLinkClick:function(link,e){if(link.get("target")!=="_blank"){e.preventDefault();if(link.bttParams){this._submitData(dojo.fromJson(link.bttParams));}}},_onButtonClick:function(_393,_394,e){if(_393.type=="save"&&_393.get("disabled")==false){_393._onClick(e);e.preventDefault();var form=_393._getParentForm();if(form&&_393.bttParams){if(form.onFormSubmit){form.onFormSubmit();}this._submitData(dojo.mixin(form.get("validValue"),dojo.fromJson(_393.bttParams)));}}else{if(_393.type=="cancel"&&_393.get("disabled")==false){_393._onClick(e);e.preventDefault();if(_393.bttParams){this._submitData(dojo.fromJson(_393.bttParams));}}else{_394.apply(_393,[e]);}}},_submitFormData:function(form,_395){if(_395&&_395.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(_395.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{if(form.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(form.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{console.log("Do not find default BTT Params on form for user press enter operation.");}}},_submitData:function(data){AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:this.url,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},data);this._getCover().show();},_handleError:function(e,xhr){var _396;if(xhr){var _397=xhr.xhr.responseText;if(_397&&_397!=""){try{_397=dojo.fromJson(_397);if(_397["page"]){_396=_397["page"];}}catch(e){_396=_397;}}}if(!_396){if(e.message){_396=e.message;}else{_396="An error occured. Messsage : "+e;}}this._disposeAllWidgets();dojo.body().innerHTML=_396;this._getCover().hide();},_handleFormResponse:function(e){var _398;if(this._commandMap[e["command"]]){try{_398=this._commandMap[e["command"]](e);}catch(e){this._handleError("An error occured while excuting the handler:"+e["dse_clientCommand"]+" error:"+e);}}else{this._handleError("Can not find corresponding command handler for command type='"+e["dse_clientCommand"]+"'");}if(_398!==false){this._getCover().hide();}},createContentPane:function(){return new com.ibm.btt.dijit.ContentPane({"style":"padding:0px;",refreshOnShow:false},dojo.create("div",null,dojo.body(),"last"));},_getContentPane:function(data){if(!this._contentPane){this._contentPane=this.createContentPane();}if(this._cpOnLoadEvt){this._unregisterEvents(this._cpOnLoadEvt);}if(this._cpOnErrorEvt){this._unregisterEvents(this._cpOnErrorEvt);}this._cpOnErrorEvt=dojo.connect(this._contentPane,"onContentError",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));this._cpOnLoadEvt=dojo.connect(this._contentPane,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));return this._contentPane;},_destroyContentPane:function(){if(this._contentPane){this._unregisterEvents(this._cpOnLoadEvt);this._cpOnLoadEvt=undefined;this._unregisterEvents(this._cpOnErrorEvt);this._cpOnErrorEvt=undefined;try{this._contentPane.destroyDescendants();this._contentPane.destroy();}catch(e){}this._contentPane=undefined;}},createDialog:function(){var _399=dojo.window.getBox();return new com.ibm.btt.dijit.Dialog({title:"",style:"overflow-y:auto;overflow-x:auto;max-width:"+_399.w+"px;max-height:"+_399.h+"px",closable:false});},_getDialog:function(data){if(!this._dialog){var _39a=dojo.window.getBox();this._dialog=this.createDialog();}if(this._dialogOnLoadEvt){this._unregisterEvents(this._dialogOnLoadEvt);}this._dialogOnLoadEvt=dojo.connect(this._dialog,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._dialog));return this._dialog;},_destroyDialog:function(){if(this._dialog){this._unregisterEvents(this._dialogOnLoadEvt);this._dialogOnLoadEvt=undefined;this._dialog.hide();try{this._dialog.destroyDescendants();this._dialog.destroy();}catch(e){}this._dialog=undefined;}},_getCover:function(){if(!this._cover){this._cover=new com.ibm.btt.dijit.ScreenCover();}return this._cover;},_destroyCover:function(){if(this._cover){this._cover.destroy();this._cover=undefined;}},isECARuleFile:function(src,_39b){var _39c=function(src,_39d){var reg=new RegExp(_39d+"$");return reg.test(src);};return _39c(src,_39b+".js");},_afterPageLoaded:function(data,_39e){if(data["page_name"]){var _39f=this;dojo.query("script",_39e.domNode).forEach(dojo.hitch(this,function(_3a0){if(_3a0.src&&this.isECARuleFile(_3a0.src,data["page_name"])){_39f._registerECAEvent(data["page_name"],_3a0.src);}}));}this.onLoad(data,_39e);},_registerECAEvent:function(name,url){var _3a1={url:url,handleAs:"text",load:dojo.hitch(this,function(e){dojo.eval(e);if(window[name]){delete window[name];}})};dojo.xhrGet(_3a1);},_parsenextPageUrl:function(e){var data=dojo.fromJson(e.data);var url=["Request?dse_applicationId="+data["dse_applicationId"]];url.push("dse_processorId="+data["dse_processorId"]);url.push("dse_sessionId="+data["dse_sessionId"]);url.push("dse_processorState="+data["dse_processorState"]);url.push("dse_nextEventName="+data["dse_nextEventName"]);url.push("dse_operationName="+data["dse_operationName"]);url.push("dse_pageId="+data["dse_pageId"]);return url.join("&");},redirectPage:function(e){location.href=this._parsenextPageUrl(e);},popupPageHandler:function(data){var _3a2=this._getDialog(data);_3a2.destroyDescendants();_3a2.startup();if(!_3a2.get("open")){_3a2.show();}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_3a2.set("content",page);},renderPageHandler:function(data){this._getCover().show();this._disposeAllWidgets();if(this._dialog&&this._dialog.get("open")){this._dialog.hide();}var _3a3=this._getContentPane(data);var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_3a3.set("content",page);_3a3.startup();},remoteFlowHandler:function(data){this._getCover().show();var _3a4=dojo.fromJson(data["data"]);console.info("############ remoteFlowHandler : ",_3a4);if(_3a4.dse_remoteFlowID){this.url=_3a4.dse_RemoteRequest_URL;AjaxUtil.ajaxOperationUrl=_3a4.dse_RemoteAjaxOp_URL;}else{this.url=_3a4.dse_RemoteSubFlow_URL;AjaxUtil.ajaxOperationUrl=_3a4.dse_remote_parent_AjaxURL;}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:_3a4.dse_RemoteSubFlow_URL,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},_3a4);return false;},destroy:function(){this.inherited(arguments);this._commandMap=undefined;this._destroyContentPane();this._destroyCover();this._destroyDialog();}});}
