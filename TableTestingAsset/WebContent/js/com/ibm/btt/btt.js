/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["com.ibm.btt.util.I18nBundle"]){dojo._hasResource["com.ibm.btt.util.I18nBundle"]=true;dojo.provide("com.ibm.btt.util.I18nBundle");dojo.declare("com.ibm.btt.util.I18nBundle",null,{bundle:null,constructor:function(_1,_2,_3){try{dojo.requireLocalization(_1,_2,_3, "");this.bundle=dojo.i18n.getLocalization(_1,_2,_3);}catch(e){console.info("Can not load NLS resources. packageName="+_1+", bundleName="+_2+", locale="+_3);this.bundle=undefined;}},getMessage:function(_4,_5){if(typeof (this.bundle)!="undefined"&&typeof (_4)!="undefined"&&typeof (this.bundle[_4])!="undefined"){if((_5!==undefined)&&(dojo.isArray(_5))){var _6=this.bundle[_4];var i=0;_6=dojo.replace(_6,dojo.hitch(_5,function(_7,k){if(i<_5.length){if(_5[i]!==undefined&&_5[i++]!==null){return _5[i-1];}}return "{"+k+"}";}));return _6;}else{if(_5!==undefined&&_5!==null&&dojo.isObject(_5)){return dojo.replace(this.bundle[_4],dojo.hitch(_5,function(_8,k){var _9=dojo.getObject(k,false,_5);if(_9!==null&&_9!==undefined){return _9;}else{return "{"+k+"}";}}));}else{if(_5!==undefined&&_5!==null){var _a=[];for(var i=1;i<arguments.length;i++){_a.push(arguments[i]);}return arguments.callee.apply(this,[_4,_a]);}else{return this.bundle[_4];}}}}else{return undefined;}}});}if(!dojo._hasResource["com.ibm.btt.util.I18nUtil"]){dojo._hasResource["com.ibm.btt.util.I18nUtil"]=true;dojo.provide("com.ibm.btt.util.I18nUtil");(function(){I18nUtil={getI18nString:function(_b,_c){if((_b===null)||(_b===undefined)||(_b==="")){return _b;}var _d="%";var _e="/";_b=_b.toString();var _f=_b.substring(0,1);if(_b.substring(0,1)!=_d){return _b;}else{var _10=_b.replace(_d,"");var tmp=_10.split(_e);var _11=tmp[0].substring(0,tmp[0].lastIndexOf("."));var _12=tmp[0].substring(tmp[0].lastIndexOf(".")+1,tmp[0].length);var _13=tmp[1];if(typeof (_11)=="undefined"||typeof (_12)=="undefined"||_11==""||_12==""){return _b;}var _14=new com.ibm.btt.util.I18nBundle(_11,_12);var _15=_14.getMessage(_13,_c);if(_15==undefined||_15==null){return _b;}else{return _15;}}}};})();}if(!dojo._hasResource["com.ibm.btt.util.StringUtil"]){dojo._hasResource["com.ibm.btt.util.StringUtil"]=true;dojo.provide("com.ibm.btt.util.StringUtil");(function(){StringUtil={escapeHTML:function(_16){if(_16){var _17=_16.replace(new RegExp("\r\n","g"),"\n");_17=_17.replace(new RegExp("\n","g"),"<br/>");return StringUtil.replaceAll(_17," ","&nbsp;");}else{return _16;}},replaceAll:function(str,_18,_19){if(str&&_18&&_19){return str.replace(new RegExp(_18,"gm"),_19);}else{return str;}},removeWarp:function(str){if(str){var _1a=str.replace(new RegExp("\r","g"),"");_1a=_1a.replace(new RegExp("\n","g"),"");return _1a;}else{return str;}}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetMixin",null,{visibility:"visible",accessKey:"",hint:"",postCreate:function(){this.applyAccessKey();this.inherited(arguments);},getI18NString:function(key,_1b){return I18nUtil.getI18nString(key,_1b);},replaceWrap:function(){},_setVisibilityAttr:function(_1c){this.visibility=_1c;if(_1c=="gone"){dojo.style(this.domNode,"visibility","");dojo.style(this.domNode,"display","none");}else{if(_1c=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","");}}},_setHintAttr:function(_1d){this.hint=_1d;this.domNode.title=StringUtil.removeWarp(this.getI18NString(_1d));},isFocusable:function(){if(dojo.style(this.domNode,"visibility")=="hidden"){return false;}else{if(this.disabled){return false;}else{return this.inherited(arguments);}}},applyAccessKey:function(){if(this.focusNode&&this.accessKey){this.focusNode.setAttribute("accessKey",this.accessKey);}},handleLenUint:function(_1e){var _1f=function(src,_20){var reg=new RegExp(_20+"$");return reg.test(src);};if(_1f(_1e,"px")||_1f(_1e,"%")||_1f(_1e,"em")){return _1e;}else{return _1e+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Anchor"]){dojo._hasResource["com.ibm.btt.dijit.Anchor"]=true;dojo.provide("com.ibm.btt.dijit.Anchor");dojo.declare("com.ibm.btt.dijit.Anchor",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<a class='dijitLabelBase' dojoAttachEvent='onclick:_onClick'></a>",action:"#",target:"_parent",bttParams:"",text:"",tabIndex:"0",disabled:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{target:{node:"domNode"},tabIndex:{node:"domNode"},text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},disabled:{node:"domNode"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);},_parameterHandler:function(e){var _21="";var _22=dojo.fromJson(e);for(var _23 in _22){if(typeof (_23)!="undefined"){var _24=_22[_23];if(_21==""){_21+=_23+"="+_24;}else{_21+="&"+_23+"="+_24;}}}return _21;},_setActionAttr:function(_25){this.action=_25;var _26="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_26=this.action;if(this.bttParams!=""){if(_26.indexOf("?")==-1){_26+="?";}if(this.bttParams!=""){var _27=this._parameterHandler(this.bttParams);if(_26.substring(_26.length-1)=="?"){_26+=_27;}else{_26+="&"+_27;}}}}else{_26="javascript:void(0)";}this.domNode.href=_26;},_setTextAttr:function(_28){this.text=_28;this.domNode.innerHTML=this.getI18NString(_28);},_setDisabledAttr:function(_29){this.disabled=_29;},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}},onClick:function(e){},_setTextWrapAttr:function(_2a){this.textWrap=_2a;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setWidthAttr:function(_2b){if(this.width!=""){this.width=_2b;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2c){if(this.height!=""){this.height=_2c;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Button"]){dojo._hasResource["com.ibm.btt.dijit.Button"]=true;dojo.provide("com.ibm.btt.dijit.Button");dojo.declare("com.ibm.btt.dijit.Button",[dijit.form.Button,com.ibm.btt.dijit.AbstractWidgetMixin],{bttParams:"",icon:"",text:"",inValid:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.Button.prototype.attributeMap,{visibility:{node:"domNode"},text:{node:"textNode",type:"innerHTML"},icon:{node:"iconImageNode",type:"attribute",attribute:"src"},width:{node:"domNode"},height:{node:"domNode"}}),buildRendering:function(){this.inherited(arguments);this.iconImageNode=dojo.create("img",{"style":"display:none;"},this.containerNode,"last");this.textNode=dojo.create("span",{"class":"dijitLabelBase"},this.containerNode,"last");dojo.style(this.focusNode,"overflow","hidden");dojo.addClass(this.focusNode.parentNode,"dijitLabelBase");},postCreate:function(){this.inherited(arguments);this._setIconAttr(this.icon);},_setTextAttr:function(_2d){this.text=_2d;this.textNode.innerHTML=this.getI18NString(_2d);},_setTextWrapAttr:function(_2e){this.textWrap=_2e;if(this.textWrap){dojo.addClass(this.textNode,"dijitLabelWrap");}else{dojo.removeClass(this.textNode,"dijitLabelWrap");}},_setIconAttr:function(_2f){this.icon=_2f;this.iconImageNode.src=_2f;if(_2f===""||typeof (_2f)==="undefined"){dojo.style(this.iconImageNode,"display","none");}else{dojo.style(this.iconImageNode,"display","");}},_setWidthAttr:function(_30){if(_30!=""){this.width=_30;dojo.style(this.focusNode.parentNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_31){if(_31!=""){this.height=_31;dojo.style(this.focusNode.parentNode,"height",this.handleLenUint(this.height));}},_setInValidAttr:function(_32){this.inValid=_32;if(this.type=="submit"){var _33=this._getParentForm();if(_33&&_33.setSubmitButtonState){_33.setSubmitButtonState();}else{this.set("disabled",_32);}}else{this.set("disabled",_32);}},_onButtonClick:function(e){var _34=this._getParentForm();if(_34&&this.get("disabled")==false&&this.type=="cancel"){this._onClick(e);this._doCancelAction(_34);e.preventDefault();}else{if(_34&&this.get("disabled")==false&&this.type=="save"){this._onClick(e);this._doSaveAction(_34);e.preventDefault();}else{if(_34){_34._lastClickedButton=this;}this.inherited(arguments);}}},_getParentForm:function(){for(var _35=this.domNode;_35.parentNode;_35=_35.parentNode){var _36=dijit.byNode(_35);if(_36&&typeof _36._onSubmit=="function"){return _36;}}},_doCancelAction:function(_37){var _37=this._createHiddenForm(_37,dojo.fromJson(this.bttParams));_37.submit();},_doSaveAction:function(_38){var _38=this._getParentForm();if(_38.onFormSubmit){_38.onFormSubmit();}var _39=_38.get("validValue");var _38=this._createHiddenForm(_38,dojo.mixin(_39,dojo.fromJson(this.bttParams)));_38.submit();},_createHiddenForm:function(_3a,_3b){var _3a=dojo.create("form",{"style":"display:none;","action":_3a.get("action"),"method":_3a.get("method")},dojo.body(),"last");var _3c=[];for(var _3d in _3b){if(_3d!=undefined&&_3d!=null&&_3d!=""){_3c=_3c.concat(this._convertToKeyValuePair(_3d,_3b[_3d]));}}for(var i=0;i<_3c.length;i++){dojo.create("input",{"type":"hidden","name":_3c[i].key,"value":_3c[i].value},_3a,"last");}return _3a;},_convertToKeyValuePair:function(_3e,_3f){var res=[];if(dojo.isObject(_3f)){for(var key in _3f){if(key!=undefined&&key!=null&&key!=""){res=res.concat(this._convertToKeyValuePair(_3e+"."+key,_3f[key]));}}}else{if(dojo.isArray(_3f)){for(var i=0;i<_3f.length;i++){res=res.concat(this._convertToKeyValuePair(_3e+"."+i,_3f[i]));}}else{res.push({"key":_3e,"value":_3f});}}return res;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckBox"]){dojo._hasResource["com.ibm.btt.dijit.CheckBox"]=true;dojo.provide("com.ibm.btt.dijit.CheckBox");dojo.declare("com.ibm.btt.dijit.CheckBox",[dijit.form.CheckBox,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",visibility:"visible",uncheckedField:null,checkedValue:"true",unCheckedValue:"false",isChecked:false,checked:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.CheckBox.prototype.attributeMap,{isChecked:{node:"domNode",type:"attribute"},style:{node:"labelNode",type:"attribute"},visibility:{node:"domNode"},text:{node:"labelNode",type:"innerHTML"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");this.set("visibility",this.visibility);},postCreate:function(){this.inherited(arguments);this._setSubmitValue();this.set("value",this.checkedValue);if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},setUncheckedValue:function(arg){if(!this.get("name")){return;}if(arg==true){if(this.uncheckedField==null){this.uncheckedField=dojo.create("input",{type:"hidden",value:this.unCheckedValue,name:this.get("name")});}dojo.place(this.uncheckedField,this.focusNode,"after");}else{if(this.uncheckedField!=null){dojo.destroy(this.uncheckedField);}}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},_setSubmitValue:function(){if(this.get("isChecked")){this.setUncheckedValue(false);}else{this.setUncheckedValue(true);}},_setIsCheckedAttr:function(_40){this.set("checked",_40);},_setCheckedAttr:function(_41){if(_41==false||_41=="false"||_41==""){this.isChecked=false;}else{this.isChecked=true;}this._setSubmitValue();this.inherited(arguments);},_setTextAttr:function(_42){this.text=_42;this.labelNode.innerHTML=this.getI18NString(_42);},_setStyleAttr:function(_43){dojo.attr(this.labelNode,"style",_43);},_setClassAttr:function(_44){dojo.attr(this.labelNode,"class",_44);},_setHintAttr:function(_45){this.hint=_45;var _46=StringUtil.removeWarp(this.getI18NString(_45));this.domNode.title=_46;this.labelNode.title=_46;},_setVisibilityAttr:function(_47){this.visibility=_47;if(_47==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_47==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_48){this.inherited(arguments);if(_48==="true"||_48===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_setDisabledAttr:function(_49){this.inherited(arguments);if(this.uncheckedField!=null){dojo.attr(this.uncheckedField,"disabled",_49);}},_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}},_setTextWrapAttr:function(_4a){this.textWrap=_4a;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_4b){if(this.width!=""){this.width=_4b;var _4c=_4b.replace(new RegExp("px","gm"),"");try{_4c=Number(_4c);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_4b+" to number.");return;}var box=dojo.marginBox(this.domNode);var _4d=_4c-box.w;if(_4d<0){_4d=0;}dojo.style(this.labelNode,"width",_4d+"px");}},_setHeightAttr:function(_4e){if(this.height!=""){this.height=_4e;var _4f=_4e.replace(new RegExp("px","gm"),"");try{_4f=Number(_4f);}catch(e){console.error("Illegal input argument. Can not convert input height:"+_4e+" to number.");return;}var box=dojo.marginBox(this.domNode);var _50=_4f-box.h;if(_50<0){_50=0;}dojo.style(this.labelNode,"height",_50+"px");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]){dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]=true;dojo.provide("com.ibm.btt.dijit.ValidationTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.ValidationTextBox",[dijit.form.ValidationTextBox,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",errorDisplayer:null,singleFieldErrorMessage:"",attributeMap:dojo.delegate(dijit.form.ValidationTextBox.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},startup:function(){this.inherited(arguments);if(this.singleFieldErrorMessage){try{var _51=dojo.fromJson(this.singleFieldErrorMessage);if(dojo.isArray(_51)){this.showErrorMessage(_51);}}catch(e){this.showErrorMessage(this.singleFieldErrorMessage);}}},validator:function(_52,_53){var _54=typeof (this.regExpGen(_53))!="undefined"&&this.testRegularExpression(this.regExpGen(_53),_52);if(!_54){this.invalidMessage=this.bundle.getMessage("regularExpressionMessage");return false;}else{var res=(!this.required||!this._isEmpty(_52))&&(this._isEmpty(_52)||this.parse(_52,_53)!==undefined);if(res){return true;}else{this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}}},testRegularExpression:function(reg,_55){return (new RegExp("^(?:"+reg+")"+(this.required?"":"?")+"$")).test(_55);},_setWidthAttr:function(_56){if(_56!=""){this.width=_56;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setVisibilityAttr:function(_57){this.visibility=_57;var _58;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[0])!="undefined"){_58=this.domNode.children[0].children[0];}else{_58=null;}if(_57=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_58!=null){dojo.style(_58,"visibility","");}}else{if(_57=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_58!=null){dojo.style(_58,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_58!=null){dojo.style(_58,"visibility","");}}}},_onFocus:function(by){this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);},onShowErrorFlag:false,showErrorMessage:function(_59){if(dojo.isArray(_59)){var _5a=[];for(var i=0;i<_59.length;i++){var _5b=this.getI18NString(_59[i]);if(_5b==null){_5b=_59[i];}_5a.push(_5b);}if(_5a.length!=0){var _5c=_5a.join(" ");}else{var _5c="";}}else{var _5d=[];var _5e=[];if(arguments.length==0){arguments[0]="";_59="";}for(var i=1;i<arguments.length;i++){_5e[i-1]=arguments[i];}_5d[0]=arguments[0];_5d[1]=_5e;_5d[2]=true;var _5c=this.getI18NString.apply(this,_5d);if(_5c==null){_5c=_59;}}if(_59!=""){this._message=_59;dijit.hideTooltip(this.domNode);dojo.window.scrollIntoView(this.focusNode);this.onShowErrorFlag=true;if(!this.errorDisplayer){this.errorDisplayer=new dijit._MasterTooltip();}this.errorDisplayer.show(_5c,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}}this._refreshState();},validate:function(_5f){if(this.onShowErrorFlag){this.state="Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",false?"false":"true");if(_5f){if(this.state=="Error"){message=this.getErrorMessage(true);}else{message=this.getPromptMessage(true);}this._maskValidSubsetError=true;}return false;}else{return this.inherited(arguments);}},destroy:function(){this.displayMessage("");if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);if(this.errorDisplayer){this.errorDisplayer.destroy();this.errorDisplayer=undefined;}}});dojo.declare("com.ibm.btt.dijit.MappedTextBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.MappedTextBox],{});dojo.declare("com.ibm.btt.dijit.RangeBoundTextBox",[com.ibm.btt.dijit.MappedTextBox,dijit.form.RangeBoundTextBox],{postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},rangeCheck:function(_60,_61){if("min" in _61&&this.compare(_60,_61.min)<0){this.rangeMessage=this.bundle.getMessage("rangeMinMessage",{value:_61.min});return false;}if("max" in _61&&this.compare(_60,_61.max)>0){this.rangeMessage=this.bundle.getMessage("rangeMaxMessage",{value:_61.max});return false;}return true;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ComboBox"]){dojo._hasResource["com.ibm.btt.dijit.ComboBox"]=true;dojo.provide("com.ibm.btt.dijit.ComboBox");dojo.declare("com.ibm.btt.dijit.ComboBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.ComboBox,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",storeURL:"",labelField:"label",storeDataFormat:{itemLabel:this.labelField},asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.ComboBox.prototype.attributeMap,{visibility:{node:"domNode"}}),postMixInProperties:function(){this.storeDataFormat.itemLabel=this.labelField;this.searchAttr=this.storeDataFormat.itemLabel;var _62=this.srcNodeRef;var _63={label:this.storeDataFormat.itemLabel,items:[]};var _64=this.storeDataFormat.itemLabel;var _65=this;dojo.query("> option",_62).forEach(function(_66){var _67={};_67[_64]=_65.getI18NString(dojo.trim(_66.innerHTML));_63.items.push(_67);});if(_63.items.length==0){if(this.storeData){_63=this._formatStoreData(this.storeData);}}this.store=new dojo.data.ItemFileReadStore({data:_63});this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){this.loadStoreFromURL(this.storeURL);}},setStoreData:function(_68){var _68=this._formatStoreData(_68);this.store.clearOnClose=true;this.store.data=_68;this.store._jsonData=null;this.store.close();},_formatStoreData:function(_69){var _6a={label:this.storeDataFormat.itemLabel,items:[]};if(_69 instanceof Array){for(var i=0;i<_69.length;i++){if(_69[i]!=null){var _6b={};if(dojo.isObject(_69[i])){if(_69[i][_6a.label]!=null){_6b[_6a.label]=this.getI18NString(_69[i][_6a.label]);}}else{if(dojo.isString(_69[i])){_6b[_6a.label]=this.getI18NString(_69[i]);}else{_6b[_6a.label]=_69[i].toString();}}if(_6b[_6a.label]){_6a.items.push(_6b);}}}}else{if(_69 instanceof Object){for(var p in _69){var _6b={};_6b[_6a.label]=this.getI18NString(p);_6a.items.push(_6b);}}}return _6a;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _6c={url:this.storeURL,handleAs:"json",load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_6c);},_handleStoreLoadingResponse:function(_6d){this.setStoreData(_6d);this.onAsyncOK();},_setVisibilityAttr:function(_6e){this.visibility=_6e;var _6f;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_6f=this.domNode.children[0].children[1];}else{_6f=null;}if(_6e=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_6f!=null){dojo.style(_6f,"visibility","");}}else{if(_6e=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_6f!=null){dojo.style(_6f,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_6f!=null){dojo.style(_6f,"visibility","");}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]){dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]=true;dojo.provide("com.ibm.btt.dijit.NumberTextBox");dojo.declare("com.ibm.btt.dijit.NumberTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.NumberTextBox],{numberType:"",minimumNumber:NaN,maximumNumber:NaN,locale:dojo.locale,pattern:"",decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);if(this.numberType=="byte"||this.numberType=="int"||this.numberType=="short"||this.numberType=="integer"||this.numberType=="long"||this.numberType=="bigInteger"){this.fractional=false;}else{this.fractional=true;}if(!isNaN(this.minimumNumber)){if(this.fractional){this.constraints.min=Number(this.minimumNumber);}else{this.constraints.min=parseInt(this.minimumNumber);}}if(!isNaN(this.maximumNumber)){if(this.fractional){this.constraints.max=Number(this.maximumNumber);}else{this.constraints.max=parseInt(this.maximumNumber);}}this.constraints.locale=this.locale;if(this.pattern!=""){this.constraints.pattern=this.pattern;}this.constraints.fractional=this.fractional;if(!isNaN(this.decimalPlaces)){this.decimalPlaces=Number(this.decimalPlaces);}if(this.fractional&&this.decimalPlaces>0){this.constraints.places=this.decimalPlaces;}this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},isNumber:function(_70){return /^-?\d+(\.\d+)?$/.test(_70);},validator:function(_71,_72){var _73;if(this.isNumber(_71)){_73=_71;}else{_73=this.parse(_71,this.constraints);if(!this.isNumber(_73)&&_71!=""){this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}else{if(new RegExp("^[+-]?\\d+$").test(_73)&&this.decimalPlaces>0){var con={};con["max"]=this.constraints["max"];con["min"]=this.constraints["min"];con["places"]=this.constraints["places"];con["fractional"]=this.constraints["fractional"];con["locale"]=this.constraints["locale"];_73+=".";for(var i=0;i<this.decimalPlaces;i++){_73+="0";}}}}if(this.isNumber(_73)&&this.fractional&&this.decimalPlaces>0&&!(new RegExp("^[+-]?.+[.,]\\d{"+this.decimalPlaces+"}$").test(_71))){this.invalidMessage=this.bundle.getMessage("decimalPlacesMessage",{value:this.decimalPlaces});return false;}if(this.isNumber(_73)&&this.numberType=="byte"&&(_73>127||_73<-128)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:127,min:-128});return false;}if(this.isNumber(_73)&&this.numberType=="short"&&(_73>32767||_73<-32768)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:32767,min:-32768});return false;}if(this.isNumber(_73)&&this.numberType=="int"&&(_73>2147483647||_73<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_73)&&this.numberType=="integer"&&(_73>2147483647||_73<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_73)&&this.numberType=="long"&&(_73>9223372036854776000||_73<-9223372036854776000)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:9223372036854776000,min:-9223372036854776000});return false;}if(_73.toString().replace(new RegExp(".","g"),"").length>16){this.invalidMessage=this.bundle.getMessage("numberOutOfRange");return false;}return this.inherited(arguments);},_setValueAttr:function(_74,_75,_76){if(typeof _74==="string"&&_74!==""){var _77=Number(_74);if(isNaN(_77)&&_74&&_74!=""){var _78={};if(this.constraints["pattern"]){_78["pattern"]=this.constraints["pattern"];}_74=this.parse(_74,_78);}else{_74=_77;}}this.inherited(arguments);},create:function(_79,_7a){this.inherited(arguments);var _7b=dojo.attr(_7a,"value");if(_7b&&_7b!=""){var _7c={};if(this.constraints["pattern"]){_7c["pattern"]=this.constraints["pattern"];}_79.value=this.parse(_7b,_7c);if(isNaN(_79.value)){_79.value=Number(_7b);}this.set("value",_79.value);}},serialize:function(val,_7d){return this.format(val,_7d);}});}if(!dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]){dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]=true;dojo.provide("com.ibm.btt.dijit.CurrencyTextBox");dojo.declare("com.ibm.btt.dijit.CurrencyTextBox",[com.ibm.btt.dijit.NumberTextBox,dijit.form.CurrencyTextBox],{decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);this.decimalPlaces=this.constraints.places;},serialize:function(val,_7e){return isNaN(val)?"":(val.toString?val.toString():"");}});}if(!dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]){dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]=true;dojo.provide("com.ibm.btt.dijit.DateTextBox");dojo.declare("com.ibm.btt.dijit.DateTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.DateTextBox],{maximumDate:"",minimumDate:"",locale:dojo.locale,pattern:"",postMixInProperties:function(){this.inherited(arguments);this.lang=this.locale;this.constraints.locale=this.locale;if(this.minimumDate!=""){if(this.isToday(this.minimumDate)){this.constraints.min=this.parseToday(this.minimumDate);}else{this.constraints.min=dojo.date.stamp.fromISOString(this.minimumDate);}}if(this.maximumDate!=""){if(this.isToday(this.maximumDate)){this.constraints.max=this.parseToday(this.maximumDate);}else{this.constraints.max=dojo.date.stamp.fromISOString(this.maximumDate);}}if(this.pattern!=""){this.constraints.datePattern=this.pattern;}},create:function(_7f,_80){if(_7f.value==null){if(_80.value!=null&&_80.value!=""&&_7f.pattern!=null&&_7f.pattern!=""){try{var _81={selector:"date",datePattern:_7f.pattern,fullYear:true};var val=dojo.date.locale.parse(_80.value,_81);_7f.value=val;}catch(e){}}}this.inherited(arguments);},serialize:function(val,_82){if(val.toGregorian){val=val.toGregorian();}if(this.pattern!=""){return this.format(val,_82);}else{return dojo.date.stamp.toISOString(val,_82);}},isToday:function(_83){if(_83.replace(" ","").toLowerCase().indexOf("today")>-1){return true;}else{return false;}},parseToday:function(_84){var _85=_84.replace("today","");var _86="";var _87=0;var _88=0;var day=0;var _89=new Date();_89.setHours(0);_89.setMinutes(0);_89.setSeconds(0);_89.setMilliseconds(0);if(_85.indexOf("+")>-1){_86="plus";_85=_85.replace("+","#");}if(_85.indexOf("-")>-1){_86="sub";_85=_85.replace("-","#");}if(_85.indexOf("y")>-1){_87=_85.substring(_85.lastIndexOf("#")+1,_85.indexOf("y"));_85=_85.replace("y","#");}if(_85.indexOf("m")>-1){_88=_85.substring(_85.lastIndexOf("#")+1,_85.indexOf("m"));_85=_85.replace("m","#");}if(_85.indexOf("d")>-1){day=_85.substring(_85.lastIndexOf("#")+1,_85.indexOf("d"));}if("plus"==_86){_89=dojo.date.add(_89,"year",+_87);_89=dojo.date.add(_89,"month",+_88);_89=dojo.date.add(_89,"day",+day);}else{_89=dojo.date.add(_89,"year",-_87);_89=dojo.date.add(_89,"month",-_88);_89=dojo.date.add(_89,"day",-day);}return _89;},_setValueAttr:function(_8a,_8b,_8c){if(typeof (_8a)=="string"||_8a instanceof String){var val=null;if(this.pattern==""){_8a=dojo.date.stamp.fromISOString(_8a);}else{var _8d={selector:"date",datePattern:this.pattern,fullYear:true};_8a=dojo.date.locale.parse(_8a,_8d);}}this.inherited(arguments);},_getValueAttr:function(){if(this.textbox.value==""){return null;}else{return this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.util.AjaxUtil"]){dojo._hasResource["com.ibm.btt.util.AjaxUtil"]=true;dojo.provide("com.ibm.btt.util.AjaxUtil");(function(){AjaxUtil={ajaxOperationUrl:"Ajax",constants:{"BTT_OPERATIONNAME":"dse_operationName","BTT_PAGEID":"dse_pageId","BTT_SESSIONID":"dse_sessionId","BTT_ERRORPAGE":"dse_errorPage","BTT_PROCESSORID":"dse_processorId"},xhrPost:function(_8e,_8f){_8e.postData=dojo.toJson(_8f);if(typeof _8e.url=="undefined"){_8e.url=this.ajaxOperationUrl;}if(typeof _8e.handleAs=="undefined"){_8e.handleAs="text";}if(typeof _8e.success=="undefined"){_8e.load=function(e){console.info("Ajax request response from ajax channel. "+e);};}else{_8e.load=_8e.success;delete _8e.success;}if(typeof _8e.error=="undefined"){_8e.error=function(e){console.info("Ajax request error. "+e);};}dojo.xhrPost(_8e);},prepareBTTParams:function(_90){var obj={};if(_90!=undefined){if(_90[this.constants.BTT_ERRORPAGE]){obj[this.constants.BTT_ERRORPAGE]=_90[this.constants.BTT_ERRORPAGE];}if(_90[this.constants.BTT_OPERATIONNAME]){obj[this.constants.BTT_OPERATIONNAME]=_90[this.constants.BTT_OPERATIONNAME];}if(_90[this.constants.BTT_PAGEID]){obj[this.constants.BTT_PAGEID]=_90[this.constants.BTT_PAGEID];}else{obj[this.constants.BTT_PAGEID]="-1";}if(_90[this.constants.BTT_PROCESSORID]){obj[this.constants.BTT_PROCESSORID]=_90[this.constants.BTT_PROCESSORID];}if(_90[this.constants.BTT_SESSIONID]){obj[this.constants.BTT_SESSIONID]=_90[this.constants.BTT_SESSIONID];}}return obj;}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractAjaxMixin");dojo.declare("com.ibm.btt.dijit.AbstractAjaxMixin",null,{_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Form"),bttParams:"",asyncCode:"",asyncStatus:0,asyncErrorMessage:"",asyncOperation:"",callAsyncOperation:function(_91,_92,_93,_94){var _95=this.get("value");var _96=dojo.fromJson(this.bttParams);_96[AjaxUtil.constants.BTT_OPERATIONNAME]=_91;_96=AjaxUtil.prepareBTTParams(_96);AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_92,_94),error:dojo.hitch(this,"_handleOperationError",_92),"timeout":_93},dojo.mixin(_95,_96));},_handleOperationResponse:function(_97,_98,_99){try{var _9a=dojo.fromJson(_99||null);_99=_9a;}catch(e){this._handleHTMLResponse(_99);return;}this.asyncCode=_97;var _9b=null;var _9c=null;var _9d=null;if(dojo.isArray(_99)){_9b=_99[0].data;if(_99[0].validationError){_9c=_99[0].singleFieldErrors;_9d=_99[0].crossFieldErrors;}}else{_9b=_99;}if(_9b){if(_98&&dijit.byId(_98)){dijit.byId(_98).set("value",_9b);}else{this.set("value",_9b);}}if((_9c&&_9c.length!=0)||(_9d&&_9d.length!=0)){var _9e=this._getWidgetMap();this._handleSingleFieldErrors(_9c,_9e);this._handleCrossFieldErrors(_9d,_9e);}this.onAsyncOK();},_handleHTMLResponse:function(_9f){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:_9f})).show();},_getWidgetMap:function(){var map={};dojo.forEach(this.getDescendants(),function(_a0){if(!_a0.name){return;}var _a1=map[_a0.name]||(map[_a0.name]=[]);_a1.push(_a0);});return map;},_handleSingleFieldErrors:function(_a2,_a3){if(_a2!=null){for(var i=0;i<_a2.length;i++){if(_a3[_a2[i].id]){var _a4=_a3[_a2[i].id];if(_a4){for(var j=0;j<_a4.length;j++){if(_a4[j].showErrorMessage){_a4[j].showErrorMessage(_a2[i].msg);}}}}}}},_handleCrossFieldErrors:function(_a5,_a6){if(_a5!=null){var _a7=_a6["dse_errorMessages"];if(_a7){for(var j=0;j<_a7.length;j++){_a7[j].displayMessageArray(_a5);}}}},setStoreData:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_a8){if(!_a8.name){return;}var _a9=map[_a8.name]||(map[_a8.name]=[]);_a9.push(_a8);});for(var _aa in map){if(!map.hasOwnProperty(_aa)){continue;}var _ab=map[_aa],_ac=dojo.getObject(_aa,false,obj);if(_ac===undefined){continue;}if(!dojo.isArray(_ac)){_ac=[_ac];}dojo.forEach(_ab,function(w,i){if(w.setStoreData){w.setStoreData(_ac[i]);}});}},_handleOperationError:function(_ad,_ae){if(_ae.dojoType==="timeout"){this.asyncCode=_ad;this.asyncStatus=0;this.asyncErrorMessage=_ae.message;this.onAsyncTimeOut();}else{if(_ae.status!==undefined){this.asyncCode=_ad;this.asyncStatus=_ae.status;this.asyncErrorMessage=_ae.message;this.onAsyncError();}}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},_getValueAttr:function(){var obj={};var _af=this;dojo.forEach(this.getDescendants(),function(_b0){var _b1=_b0.name;if((!_b1||_b0.disabled||_b0.isNotSubmitted)&&(!_b0.storeDataName||!_b0.getEditableStroeData||((_b0 instanceof com.ibm.btt.dijit.Grid)&&_b0.readOnly))){return;}if(typeof (_b0.ajaxSubmit)!="undefined"&&_b0.ajaxSubmit==false){return;}if(_b0.storeDataName&&_b0.getEditableStroeData&&((_b0 instanceof com.ibm.btt.dijit.Grid)&&_b0.editable&&!_b0.readOnly)&&_b0.getEditableStroeData()){dojo.setObject(_b0.storeDataName,_af._convertValueToString(_b0.getEditableStroeData()),obj);}var _b2=_b0.get("value");if(_b2===undefined){return;}if(_b2==null){_b2="";}if(typeof _b0.checked!=="undefined"){if(/Radio/.test(_b0.declaredClass)){if(_b2!==false){dojo.setObject(_b1,_af._convertValueToString(_b2),obj);}else{_b2=dojo.getObject(_b1,false,obj);if(_b2===undefined){dojo.setObject(_b1,null,obj);}}}else{if(_b2!==false){dojo.setObject(_b1,_af._convertValueToString(_b2),obj);}}}else{if(typeof _b2=="number"&&_b0.serialize){_b2=_b0.serialize(_b2,_b0.constraints);}else{if(_b2!=null&&_b2 instanceof Date){if(_b0.serialize){_b2=_b0.serialize(_b2,_b0.constraints);}else{_b2=_b2.getFullYear()+"-"+(_b2.getMonth()+1)+"-"+_b2.getDate();}}}_b2=_af._convertValueToString(_b2);var _b3=dojo.getObject(_b1,false,obj);if(typeof _b3!="undefined"){if(dojo.isArray(_b3)){_b3.push(_b2);}else{dojo.setObject(_b1,[_b3,_b2],obj);}}else{dojo.setObject(_b1,_b2,obj);}}});return obj;},_convertValueToString:function(_b4){if(_b4===null){return null;}if(typeof _b4==="string"){return _b4;}else{if(typeof _b4==="number"||typeof _b4==="boolean"){return String(_b4);}else{if(typeof _b4==="object"){if(dojo.isArray(_b4)){for(var i=0;i<_b4.length;i++){_b4[i]=arguments.callee(_b4[i]);}}else{for(var p in _b4){_b4[p]=arguments.callee(_b4[p]);}}return _b4;}else{return null;}}}},_setValueAttr:function(obj){var map={};var _b5={};dojo.forEach(this.getDescendants(),function(_b6){if(_b6.storeDataName){var _b7=_b5[_b6.storeDataName]||(_b5[_b6.storeDataName]=[]);_b7.push(_b6);}if(!_b6.name){return;}var _b8=map[_b6.name]||(map[_b6.name]=[]);_b8.push(_b6);});for(var _b9 in _b5){var _ba=_b5[_b9];var _bb=dojo.getObject(_b9,false,obj);if(_bb!==undefined){dojo.forEach(_ba,function(w,i){w.setStoreData(i==0?_bb:dojo.clone(_bb));});}}for(var _b9 in map){if(!map.hasOwnProperty(_b9)){continue;}var _ba=map[_b9],_bc=dojo.getObject(_b9,false,obj);if(_bc===undefined){continue;}if(!dojo.isArray(_bc)){_bc=[_bc];}if(typeof _ba[0].checked!=="undefined"){dojo.forEach(_ba,function(w,i){w.set("value",dojo.indexOf(_bc,w.value)!=-1);});}else{if(_ba[0].multiple){_ba[0].set("value",_bc);}else{dojo.forEach(_ba,function(w,i){w.set("value",_bc[i]);});}}}},validValue:null,_getValidValueAttr:function(){var obj={};var _bd=this;dojo.forEach(this.getDescendants(),function(_be){var _bf=_be.name;if((!_bf||_be.disabled||_be.isNotSubmitted)&&(!_be.storeDataName||!_be.getEditableStroeData||((_be instanceof com.ibm.btt.dijit.Grid)&&_be.readOnly&&!_be.disabled))){return;}if(_be.state&&!(_be.get("state")==""||_be.get("state")=="Normal")){return;}if(typeof (_be.ajaxSubmit)!="undefined"&&_be.ajaxSubmit==false){return;}if(_be.storeDataName&&_be.getEditableStroeData&&((_be instanceof com.ibm.btt.dijit.Grid)&&!_be.readOnly)){var _c0=_be.getEditableStroeData();if(_c0){dojo.setObject(_be.storeDataName,_bd._convertValueToString(_c0),obj);}}var _c1=_be.get("value");if(_c1===undefined){return;}if(_c1==null){_c1="";}if(typeof _be.checked!=="undefined"){if(/Radio/.test(_be.declaredClass)){if(_c1!==false){dojo.setObject(_bf,_bd._convertValueToString(_c1),obj);}else{_c1=dojo.getObject(_bf,false,obj);if(_c1===undefined){dojo.setObject(_bf,null,obj);}}}else{if(_c1!==false){dojo.setObject(_bf,_bd._convertValueToString(_c1),obj);}}}else{if(typeof _c1=="number"&&_be.serialize){_c1=_be.serialize(_c1,_be.constraints);}else{if(_c1!=null&&_c1 instanceof Date){if(_be.serialize){_c1=_be.serialize(_c1,_be.constraints);}else{_c1=_c1.getFullYear()+"-"+(_c1.getMonth()+1)+"-"+_c1.getDate();}}}_c1=_bd._convertValueToString(_c1);if(_be.type!=="hidden"&&((_be.params.value&&_be.params.value==_c1)||(!_be.params.value&&""==_c1))){return;}var _c2=dojo.getObject(_bf,false,obj);if(typeof _c2!="undefined"){if(dojo.isArray(_c2)){_c2.push(_c1);}else{dojo.setObject(_bf,[_c2,_c1],obj);}}else{dojo.setObject(_bf,_c1,obj);}}});return obj;}});}if(!dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]){dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]=true;dojo.provide("com.ibm.btt.dijit._FormXValidationMixin");dojo.declare("com.ibm.btt.dijit._FormXValidationMixin",null,{xValidations:[],xValid:true,_xHintWidget:null,getPW:function(id,_c3){var _c4=dijit.byId(id).get(_c3);return _c4;},getW:function(id){return dijit.byId(id);},runWF:function(id,_c5,_c6){var _c7=dijit.byId(id);var _c8=[];for(var i=2;i<arguments.length;i++){_c8[i-2]=arguments[i];}var _c9=_c7[_c5].apply(_c7,_c8);return _c9;},xValidate:function(_ca){if(!_ca||_ca.length==0){return "";}var _cb=null;for(var i=0;i<_ca.length;i++){if(!_ca[i].cond.call(this)){_cb=_ca[i];break;}}return _cb;},_getActiveXValidationsForWidget:function(_cc){return this._getActiveXValidations(this._getXValidationRuleByWidget(_cc),_cc);},_getActiveXValidations:function(_cd,_ce){return dojo.filter(_cd,function(_cf){return dojo.every(_cf.widgets,function(id){return ((id==_ce)||(id!=_ce&&dijit.byId(id).get("value")!=""));});});},_getXValidationRuleByWidget:function(_d0){var _d1=dojo.filter(this.xValidations,function(_d2){return dojo.indexOf(_d2.widgets,_d0)>=0;});return _d1;},showXValidationMsg:function(_d3,_d4){if(_d4){this._hideXHint();this._xHintWidget=_d4;dijit.showTooltip(this.getI18NString(_d3),_d4.domNode);}},_hideXHint:function(){if(this._xHintWidget){_xHintWidget=null;dijit.hideTooltip(this._xHintWidget.domNode);}},destroy:function(){this.inherited(arguments);this._hideXHint();}});}if(!dojo._hasResource["com.ibm.btt.dijit.Form"]){dojo._hasResource["com.ibm.btt.dijit.Form"]=true;dojo.provide("com.ibm.btt.dijit.Form");dojo.declare("com.ibm.btt.dijit.Form",[dijit.form.Form,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin,com.ibm.btt.dijit._FormXValidationMixin],{bttErrorPage:"",validateOnSubmit:true,hiddenParamHandle:{},_isStarted:false,attributeMap:dojo.delegate(dijit.form.Form.prototype.attributeMap,{visibility:{node:"domNode"}}),create:function(){this.submitButton=new Array();this.submitButtonOS=new Array();this.inherited(arguments);this._events=[];this._events.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));},onLoaded:function(){},onFormSubmit:function(){},_setXValidationsAttr:function(_d5){this.xValidations=_d5;if(this.xValidate(this.xValidations)){this.xValid=false;this.setSubmitButtonState();}},_xValidateByWidget:function(_d6){var _d7=this.xValidate(this._getActiveXValidationsForWidget(_d6.get("id")));var _d8=_d6;if(!_d7){_d7=this.xValidate(this._getActiveXValidations(this.xValidations));_d8=_d7?dijit.byId(_d7.widgets[0]):_d6;}if(_d7){this.showXValidationMsg(_d7.hint,_d8);}var _d9;if(_d9=this.xValidate(this.xValidations)){if(!_d7){this.showXValidationMsg(_d9.hint,dijit.byId(_d9.widgets[0]));}this.xValid=false;}else{this.xValid=true;this._hideXHint();}this.setSubmitButtonState();},fireWidgetBlurEvent:function(_da){this._xValidateByWidget(_da);},fireWidgetChangeEvent:function(_db){this._xValidateByWidget(_db);this.onWidgetChange();},onWidgetChange:function(){},connectChildren:function(_dc){this.inherited(arguments);var _dd=this._childConnections;var _de=this;var _df=this.getDescendants();dojo.forEach(dojo.filter(_df,function(_e0){return _e0.onChange;}),function(_e1){_dd.push(_de.connect(_e1,"onChange",dojo.hitch(_de,"fireWidgetChangeEvent",_e1)));_dd.push(_de.connect(_e1,"onBlur",dojo.hitch(_de,"fireWidgetBlurEvent",_e1)));});},_onWidgetValidateStatesChange:function(_e2){if(this.isValid()&&!this.xValid){if((inValidRule=this.xValidate(this.xValidations))){this.xValid=false;this.showXValidationMsg(inValidRule.hint,dijit.byId(inValidRule.widgets[0]));}else{this.xValid=true;this._hideXHint();}}this.setSubmitButtonState();},onSubmit:function(e){var _e3=this._querySubmitButton(e);this.handleButtonSubmit(_e3);if(this.validateOnSubmit){if(!this.isValid()||!this.xValid){return false;}}dojo.forEach(this.getDescendants(),function(_e4){if(_e4.onFormSubmit){_e4.onFormSubmit();}});if(this.onFormSubmit){this.onFormSubmit();}return true;},_querySubmitButton:function(e){if(this._lastClickedButton){return this._lastClickedButton;}},setSubmitButtonState:function(){if(this.validateOnSubmit){if((this.get("state")==""||this.get("state")=="Normal")&&this.xValid){for(var i=0;i<this.submitButton.length;i++){var btn=this.submitButton[i];btn.set("disabled",btn.get("inValid"));}}else{for(var i=0;i<this.submitButton.length;i++){this.submitButton[i].set("disabled",true);}}}},handleButtonSubmit:function(_e5){if(_e5&&_e5.bttParams&&_e5.bttParams!=""){this.parameterHandler(_e5.bttParams);}},startup:function(){if(this._isStarted){return;}this._isStarted=true;this.inherited(arguments);var _e6=this;watches=this._childWatches;var _e7=this._childConnections;dojo.forEach(dojo.filter(this.getDescendants(),function(_e8){return _e8.get("type")&&_e8.get("type").toLowerCase()=="submit";}),function(_e9){_e6.submitButton.push(_e9);_e6.submitButtonOS.push(_e9.attr("disabled"));watches.push(_e9.watch("isValid",function(_ea,_eb,_ec){_e6.setSubmitButtonState();}));});if(this.bttParams!=null&&this.bttParams!=""){this.parameterHandler(this.bttParams);}if(this.bttErrorPage!=null&&this.bttErrorPage!=""){this.errorPageHandler();}this.watch("state",this._onWidgetValidateStatesChange);this.onWidgetChange();this.setSubmitButtonState();},parameterHandler:function(e){var _ed=dojo.fromJson(e);this.destroyHiddenParams();for(var _ee in _ed){if(typeof (_ee)!="undefined"){var _ef=_ed[_ee];this.hiddenParamHandle[_ee]=dojo.create("input",{type:"hidden",name:_ee,value:_ef});dojo.place(this.hiddenParamHandle[_ee],this.containerNode,"last");}}},destroyHiddenParams:function(){for(var _f0 in this.hiddenParamHandle){dojo.destroy(this.hiddenParamHandle[_f0]);}this.hiddenParamHandle={};},errorPageHandler:function(){var _f1=dojo.create("input",{type:"hidden",name:AjaxUtil.constants["BTT_ERRORPAGE"],value:this.bttErrorPage});dojo.place(_f1,this.containerNode,"last");},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var _f2=evt.target;if(evt.charOrCode===dk.ENTER){while(_f2){if(_f2==this.domNode){this.submit();}_f2=_f2.parentNode;}}}},destroy:function(){this.destroyHiddenParams();this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Image"]){dojo._hasResource["com.ibm.btt.dijit.Image"]=true;dojo.provide("com.ibm.btt.dijit.Image");dojo.declare("com.ibm.btt.dijit.Image",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<img >",location:"",width:"",height:"",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{location:{node:"domNode",type:"attribute",attribute:"src"},width:{node:"domNode",type:"attribute"},height:{node:"domNode",type:"attribute"},visibility:{node:"domNode"}}),_setLocationAttr:function(_f3){this.location=_f3;this.domNode.src=_f3;},_setWidthAttr:function(_f4){if(_f4!=""){this.width=_f4;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_f5){if(_f5!=""){this.height=_f5;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Label"]){dojo._hasResource["com.ibm.btt.dijit.Label"]=true;dojo.provide("com.ibm.btt.dijit.Label");dojo.declare("com.ibm.btt.dijit.Label",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<label class='dijitLabelBase' dojoAttachPoint='labelContainer' ${nameAttrSetting} ></label>",text:"",name:"","for":"",width:"",height:"",textWrap:false,isNotSubmitted:true,fieldReference:"",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},"for":{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(this.hint==undefined||this.hint==null||this.hint==""){this.set("hint",this.text);}},_setTextAttr:function(_f6){this.text=_f6;this.domNode.innerHTML=this.getI18NString(_f6);},_setTextWrapAttr:function(_f7){this.textWrap=_f7;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setValueAttr:function(_f8){this.set("text",_f8);},_getValueArrt:function(_f9){return this.get("text");},_setForAttr:function(_fa){this.domNode.htmlFor=_fa;},_setWidthAttr:function(_fb){if(this.width!=""){this.width=_fb;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_fc){if(this.height!=""){this.height=_fc;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.RadioButton"]){dojo._hasResource["com.ibm.btt.dijit.RadioButton"]=true;dojo.provide("com.ibm.btt.dijit.RadioButton");dojo.declare("com.ibm.btt.dijit.RadioButton",[dijit.form.RadioButton,com.ibm.btt.dijit.AbstractWidgetMixin],{isChecked:false,text:"",visibility:"visible",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.RadioButton.prototype.attributeMap,{text:{node:"labelNode"},isChecked:{node:"domNode"},visibility:{node:"domNode"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},_setIsCheckedAttr:function(_fd){this.set("checked",_fd);},_setCheckedAttr:function(_fe){if(_fe==false||_fe=="false"||_fe==""){this.isChecked=false;}else{this.isChecked=true;}this.inherited(arguments);},_setTextAttr:function(_ff){this.text=_ff;this.labelNode.innerHTML=this.getI18NString(_ff);},_setStyleAttr:function(_100){dojo.attr(this.labelNode,"style",_100);},_setClassAttr:function(_101){dojo.attr(this.labelNode,"class",_101);},_setHintAttr:function(_102){this.hint=_102;var _103=StringUtil.removeWarp(this.getI18NString(_102));this.domNode.title=_103;this.labelNode.title=_103;},_setVisibilityAttr:function(_104){this.visibility=_104;if(_104==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_104==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_105){this.inherited(arguments);if(_105==="true"||_105===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_onClick:function(e){this.inherited(arguments);if(dojo.isIE&&this.readOnly&&this.focusNode.form){dojo.stopEvent(e);dojo.query("INPUT[type=radio]",this.focusNode.form).forEach(dojo.hitch(this,function(_106){if(_106.name==this.name&&_106.form==this.focusNode.form){var _107=dijit.getEnclosingWidget(_106);if(_107&&"checked" in _107){_107.set("checked",_107.checked);}}}));}},_setTextWrapAttr:function(_108){this.textWrap=_108;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_109){if(this.width!=""){this.width=_109;var _10a=_109.replace(new RegExp("px","gm"),"");try{_10a=Number(_10a);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_109+" to number.");return;}var box=dojo.marginBox(this.domNode);var _10b=_10a-box.w;if(_10b<0){_10b=0;}dojo.style(this.labelNode,"width",_10b+"px");}},_setHeightAttr:function(_10c){if(this.height!=""){this.height=_10c;var _10d=_10c.replace(new RegExp("px","gm"),"");try{_10d=Number(_10d);}catch(e){console.error("Illegal input argument. Can not convert input height:"+_10c+" to number.");return;}var box=dojo.marginBox(this.domNode);var _10e=_10d-box.h;if(_10e<0){_10e=0;}dojo.style(this.labelNode,"height",_10e+"px");}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]){dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]=true;dojo.provide("com.ibm.btt.dijit.RichTextEditor");dojo.declare("com.ibm.btt.dijit.RichTextEditor",[dijit.Editor,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",readOnly:false,attributeMap:dojo.delegate(dijit.Editor.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},readOnly:{node:"domNode"}}),_setReadOnlyAttr:function(_10f){this.set("disabled",_10f);},_getReadOnlyAttr:function(){return this.get("disabled");},postCreate:function(){var _110=this.name;this.inherited(arguments);this._setWidthAttr(this.width);this._setHintAttr(this.hint);this._setVisibilityAttr(this.visibility);this.resetContent=this.get("savedContent");if(_110==""||_110==null||_110==undefined){this.name=null;}},_setWidthAttr:function(_111){if(_111!=""){this.width=_111;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHintAttr:function(_112){this.hint=_112;if(typeof (this.editingArea)!="undefined"&&this.editingArea!=null){this.editingArea.parentNode.title=StringUtil.removeWarp(this.getI18NString(_112));}},_getValueAttr:function(){var _113=this.inherited(arguments);if(dojo.isFF&&(_113=="<br _moz_editor_bogus_node=\"TRUE\" />"||_113=="<br />")){return "";}else{return _113;}},reset:function(e){this.set("value",this.resetContent);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Select"]){dojo._hasResource["com.ibm.btt.dijit.Select"]=true;dojo.provide("com.ibm.btt.dijit.Select");dojo.declare("com.ibm.btt.dijit.Select",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.FilteringSelect,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",width:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.FilteringSelect.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){if(this.params.value){this.value=this.params.value;this._lastValueReported=this.params.value;this._resetValue=this.params.value;}this.loadStoreFromURL(this.storeURL);}this._setWidthAttr(this.width);},postMixInProperties:function(){var root=this.srcNodeRef;var _114={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _115=this;dojo.query("> option",root).forEach(dojo.hitch(this,function(node,i){var item={};item[this.storeDataFormat.itemLabel]=_115.getI18NString(dojo.trim(node.innerHTML));var _116=dojo.attr(node,"value");if(_116==""){_116="#";}item[this.storeDataFormat.itemValue]=_116;_114.items.push(item);}));if(_114.items.length==0&&this.storeData){_114=this._formatStoreData(this.storeData);}_114=this.prepareStoreData(_114);this.item=null;if(this.params.value){for(var i=0;i<_114.items.length;i++){if(this.params.value==_114.items[i].value){this.item=_114.items[i];}}}if(_114.items.length==0){var item={};item[this.storeDataFormat.itemValue]="#";item[this.storeDataFormat.itemLabel]="";_114.items.push(item);this._lastValueReported="#";this.value="#";}if(!this.item){this.item=_114.items[0];this.value=this.item.value;this._lastValueReported=this.item.value;}this.store=new dojo.data.ItemFileReadStore({data:_114});this.inherited(arguments);},setStoreData:function(data){this._onChangeActive=false;var _117=this.prepareStoreData(this._formatStoreData(data));this.store.clearOnClose=true;this.store.data=_117;this.searchAttr=_117.label;this.store.close();this.set("value",this.value);this._setBlurValue();this._onChangeActive=true;},prepareStoreData:function(data){return data;},_formatStoreData:function(data){var _118={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(data instanceof Array){for(var i=0;i<data.length;i++){if(data[i]!=null&&data[i][this.valueField]!=null&&data[i][this.labelField]!=null){var item={};item[this.storeDataFormat.itemValue]=data[i][this.valueField];item[this.storeDataFormat.itemLabel]=this.getI18NString(data[i][this.labelField]);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_118.items.push(item);}}}else{if(data instanceof Object){for(var p in data){if(data[p]!=null){var item={};item[this.storeDataFormat.itemValue]=data[p];item[this.storeDataFormat.itemLabel]=this.getI18NString(p);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_118.items.push(item);}}}}return _118;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _119={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_119);},_handleStoreLoadingResponse:function(data){this.setStoreData(data);this.onAsyncOK();},_setVisibilityAttr:function(_11a){this.visibility=_11a;var _11b;if(typeof (this.domNode.children)!="undefined"&&typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_11b=this.domNode.children[0].children[1];}else{_11b=null;}if(_11a=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_11b!=null){dojo.style(_11b,"visibility","");}}else{if(_11a=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_11b!=null){dojo.style(_11b,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_11b!=null){dojo.style(_11b,"visibility","");}}}},_setWidthAttr:function(_11c){if(_11c!=""){this.width=_11c;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setValueAttr:function(_11d){var _11e=false;this.store.fetchItemByIdentity({identity:_11d,onItem:function(item){if(item){_11e=true;}}});var _11f=this.store._getItemsArray();if(_11f){dojo.some(_11f,function(item){if(item.value&&item.value[0]&&item.value[0]==_11d){_11e=true;return false;}});}if(!_11e){var _11f=this.store._getItemsArray();if(_11f.length==0){_11d="";}else{var id=this.store.getIdentity(_11f[0]);this.store.fetchItemByIdentity({identity:id,onItem:dojo.hitch(this,function(item){if(item){_11e=true;_11d=item.value&&item.value[0]?item.value[0]:null;this.set("item",item);}})});}this.value=_11d;this._lastValueReported=_11d;}this.inherited(arguments);},_getValueAttr:function(){var _120=this.inherited(arguments);if(_120==null||_120=="#"){return "";}else{return _120;}},_setItemAttr:function(){this.inherited(arguments);this.valueNode.value=this.get("value");}});}if(!dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]){dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]=true;dojo.provide("com.ibm.btt.dijit.StringTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.StringTextBox",[com.ibm.btt.dijit.ValidationTextBox],{maximumLength:NaN,minimumLength:NaN,validCharacters:"",password:false,postMixInProperties:function(){this.inherited(arguments);if(this.password){this.type="password";}},postCreate:function(){this.inherited(arguments);this.attr("value",this.attr("value"));},validator:function(_121,_122){var _123=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(this.attr("value")!=""&&(!isNaN(this.minimumLength))&&this.attr("value").length<this.minimumLength){this.invalidMessage=_123.getMessage("stringMinMessage",{value:this.minimumLength});return false;}else{if(this.attr("value")!=""&&(!isNaN(this.maximumLength))&&this.attr("value").length>this.maximumLength){this.invalidMessage=_123.getMessage("stringMaxMessage",{value:this.maximumLength});return false;}else{return this.inherited(arguments);}}},_setValueAttr:function(_124){if(_124!=null&&_124!=undefined){_124=this.getI18NString(_124);_124=_124.replace(/&amp;/g,"&").replace(/&lt;/g,"<");this.value=_124;this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TextArea"]){dojo._hasResource["com.ibm.btt.dijit.TextArea"]=true;dojo.provide("com.ibm.btt.dijit.TextArea");dojo.declare("com.ibm.btt.dijit.TextArea",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.SimpleTextarea],{width:"",height:"",attributeMap:dojo.delegate(dijit.form.SimpleTextarea.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},height:{node:"domNode"}}),validator:function(_125,_126){if(!(!this.required||!this._isEmpty(_125))){return false;}return true;},_setVisibilityAttr:function(_127){this.visibility=_127;if(_127=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}else{if(_127=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_setWidthAttr:function(_128){if(_128!=""){this.width=_128;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_129){if(_129!=""){this.height=_129;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setValueAttr:function(_12a){_12a=this.getI18NString(_12a);this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Tree"]){dojo._hasResource["com.ibm.btt.dijit.Tree"]=true;dojo.provide("com.ibm.btt.dijit.Tree");dojo.declare("com.ibm.btt.dijit.Tree",[dijit.Tree,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",name:"",storeData:null,showRoot:false,value:"",_selectedItem:null,width:"",height:"",persist:false,templateString:dojo.cache("com.ibm.btt.dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" waiRole=\"tree\" style=\"overflow:auto\"\r\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\r\n\t<input type=\"hidden\" dojoAttachPoint=\"formNode\"/>\r\n</div>\r\n"),attributeMap:dojo.delegate(dijit.Tree.prototype.attributeMap,{visibility:{node:"domNode"},name:{node:"formNode"},value:{node:"formNode"},width:{node:"formNode"},height:{node:"formNode"}}),postMixInProperties:function(){this.inherited(arguments);this.loadStoreData();},postCreate:function(){this.inherited(arguments);this.treeEvents=[];var _12b=this;this.treeEvents.push(dojo.connect(this,"onClick",this,function(item){_12b.set("value",item.id[0]);}));this._lastValue=this.value;},onLoad:function(){this.inherited(arguments);this._expandNode(this.tree.rootNode.getChildren()[0],false);this.reset();if(this.value!=""){var _12c=this.value.split(".");var _12d=_12c[0];for(var i=1;i<_12c.length;i++){var n=this._itemNodesMap[_12d];if(n){this._expandNode(n[0],false);}_12d+="."+_12c[i];}var _12e=this._itemNodesMap[this.value];this._expandNode(_12e[0],false);_12e[0].setSelected(true);}},_parseStoreData:function(_12f,data){this.firstSelectedItem=null;var _130=[];for(var name in data){var item={};if(_12f!=null&&typeof (_12f.id)!="undefined"){item.id=_12f.id+"."+name;}else{item.id=name;}item.label=data[name]["label"];item.value=data[name]["value"];if(data[name]["children"]){item.children=this._parseStoreData(item,data[name]["children"]);}_130.push(item);}return _130;},getLabel:function(item){return I18nUtil.getI18nString(this.inherited(arguments));},loadStoreData:function(){var _131=this._parseStoreData(null,this.storeData);if(!this.model){var data={"identifier":"id","label":"label","items":_131};var _132=new dojo.data.ItemFileWriteStore({"data":data});this.model=new dijit.tree.ForestStoreModel({"store":_132});}else{var tree=this;var _132=this.model.store;this.model.store.fetch({queryOptions:{deep:true},onComplete:function(_133,_134){for(var i=_133.length-1;i>=0;i--){_132.deleteItem(_133[i]);}}});_132.save();(function(_135,_136){for(var i=0;i<_135.length;i++){var _137;if(_135[i].children&&_135[i].children.length){_137=_135[i].children;_135[i].children=[];}else{_137=null;}if(_136){var _138=_132.newItem(_135[i],{parent:_136,attribute:"children"});}else{var _138=_132.newItem(_135[i]);}if(_137){arguments.callee(_137,_138);}}})(_131);_132.save();}},setStoreData:function(data){var _139={};_139[this.storeDataName]=data;this.storeData=_139;this.loadStoreData();if(this.dndController){this.dndController.destroy();var _13a={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_13a[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController.constructor(this,_13a);}this.set("paths",[]);},destroy:function(){this.inherited(arguments);for(var i=0;this.treeEvents.length;i++){dojo.disconnect(this.treeEvents.pop());}this.treeEvents=null;},_setValueAttr:function(_13b){dojo.forEach(this.get("selectedNodes"),function(_13c){_13c.setSelected(false);});if(this._lastValue){var node=this._itemNodesMap[this._lastValue];if(node){node[0].setSelected(false);}}this.set("paths",[]);var _13d=this._itemNodesMap[_13b];this.value=_13b;this.formNode.value=_13b;if(_13d){this.set("selectedNodes",_13d);this._selectedItem=_13d[0].item;}},getSelectedLabel:function(){if(this._selectedItem){return this._selectedItem.label[0];}else{return undefined;}},getSelectedLabelNLS:function(){if(this._selectedItem){return I18nUtil.getI18nString(this._selectedItem.label[0]);}else{return undefined;}},getSelectedValue:function(){if(this._selectedItem){return this._selectedItem.value[0];}else{return undefined;}},isFocusable:function(){return (!this.disabled)&&(!this.readOnly)&&(dojo.style(this.domNode,"display")!=="none")&&(dojo.style(this.domNode,"visibility")!=="hidden");},reset:function(){this.inherited(arguments);if(this.params.value){this.set("value",this.params.value);}else{this.set("value","");}},getTooltip:function(item){var tip=this.getI18NString(this.hint);if(tip==undefined){tip="";}this.hint=tip;return tip;},_setHintAttr:function(_13e){this.hint=_13e;var _13f=StringUtil.removeWarp(this.getI18NString(_13e));this.domNode.title=_13f;if(this.rootNode){this._setHintForAllChild(this.rootNode,_13f);}},_setHintForAllChild:function(root,hint){var _140=this;root.set("tooltip",hint);root.set("hint",hint);if(root.hasChildren()){dojo.forEach(root.getChildren(),function(_141,idx){_140._setHintForAllChild(_141,hint);});}},_setWidthAttr:function(_142){if(_142!=""){this.width=_142;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_143){if(_143!=""){this.height=_143;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setVisibilityAttr:function(_144){this.inherited(arguments);this.resize();}});}if(!dojo._hasResource["com.ibm.btt.event._ConditionMixin"]){dojo._hasResource["com.ibm.btt.event._ConditionMixin"]=true;dojo.provide("com.ibm.btt.event._ConditionMixin");dojo.declare("com.ibm.btt.event._ConditionMixin",null,{_conditionMap:{},registerCond:function(url){if(url){var _145={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadCond"),error:dojo.hitch(this,"_loadCondError",url)};dojo.xhrGet(_145);}else{console.error("The argument can not be null.");}},_loadCond:function(cond){if(cond){for(var name in cond){if(name&&cond[name]&&typeof (cond[name])=="function"){this._conditionMap[name]=cond[name];}}}},_loadCondError:function(url,_146){console.error("Fail to load the condition on "+url+", error : "+_146);},executeCond:function(){var name=arguments[0];var args=[];var _147=Number(arguments.length);var i=1;while(i<_147){args.push(arguments[i]);i++;}try{if(this._conditionMap[name]){return this._conditionMap[name].apply(this,args);}else{console.error("Condition with specified name is not found. condition="+name);}}catch(e){console.error("An error occured while executing the condition "+name+", error "+e);}},executeDeprecatedCond:function(){var name=arguments[0];console.warn("The condition ["+name+"] is deprecated.");this.executeCond(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event.Engine"]){dojo._hasResource["com.ibm.btt.event.Engine"]=true;dojo.provide("com.ibm.btt.event.Engine");dojo.declare("com.ibm.btt.event.Engine",[com.ibm.btt.event._ConditionMixin],{monitor:null,_ruleEvents:[],_ruleMaps:{},setMonitor:function(_148){this.monitor=_148;},registerRules:function(_149){this._formOnLoaded=[];for(var i=0;i<_149.length;i++){if(_149[i].evts){for(var j=0;j<_149[i].evts.length;j++){this._registerEvent(_149[i],_149[i].evts[j]);}}if(_149[i].type&&_149[i].type=="AG"){this._ruleMaps[_149[i].name]=_149[i];}}for(var i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i].onLoaded){this._formOnLoaded[i].onLoaded();}}this._formOnLoaded=undefined;delete this._formOnLoaded;},_registerEvent:function(rule,_14a){var obj;if(_14a.id.lastIndexOf(".")==-1){obj=dijit.byId(_14a.id);}else{var _14b=_14a.id.substring(0,_14a.id.indexOf("."));var _14c=_14a.id.substring(_14a.id.indexOf(".")+1,_14a.id.length);obj=dijit.byId(_14b);if(obj&&obj.getWidget){obj=obj.getWidget(_14c);}else{console.error("Failed to register event '"+_14a.id+"', "+"parent widget mush provide getWidget(id) widget to support subwidget listening funcion.");return;}}var _14d=dojo.connect(obj,_14a.e,this,function(evt){if(this.monitor!=null){this.monitor.monitorStartRule(_14a,rule);}var _14e=this._executeCondition(rule,evt);if(this.monitor!=null){this.monitor.monitorCondition(_14a,rule,_14e);}this._executeAction(_14e,rule,evt);if(this.monitor!=null){this.monitor.monitorEndRule(_14a,rule);}});if(_14a.e==="onLoaded"){var i;for(i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i]==obj){break;}}if(i==this._formOnLoaded.length){this._formOnLoaded.push(obj);}}this._ruleEvents.push(_14d);},_executeCondition:function(rule,evt){var _14f=true;if(rule&&rule.cond){try{_14f=rule.cond.call(this,evt);}catch(e){console.error("An error occured while ECA condition excuting."+e.toString());}}return _14f;},_executeAction:function(_150,rule,evt){if(_150){if(rule.onTrue){try{rule.onTrue.call(this,evt);}catch(e){console.error("An error occured while ECA on true state excuting."+e.toString());}}}else{if(rule.onFalse){try{rule.onFalse.call(this,evt);}catch(e){console.error("An error occured while ECA on false state excuting."+e.toString());}}}},executeAG:function(name){if(name){var rule=this._ruleMaps[name];if(rule){if(this.monitor&&this.monitor.monitorStartAG){this.monitor.monitorStartAG(rule);}var _151=this._executeCondition(rule);if(this.monitor&&this.monitor.monitorAGCondition){this.monitor.monitorAGCondition(rule,_151);}this._executeAction(_151,rule);if(this.monitor&&this.monitor.monitorEndAG){this.monitor.monitorEndAG(rule);}}else{console.error("can not find corresponding action group with given name '"+name+"'");}}else{console.error("Input argument name to execute an action group can not be null or undefined or empty.");}},clearRules:function(){while(this._ruleEvents.length>0){dojo.disconnect(this._ruleEvents.pop());}this._ruleMaps={};},setPW:function(id,_152,_153){if(this.monitor!=null){this.monitor.monitorSetPropertyAction(id,_152,_153);}dijit.byId(id).set(_152,_153);},getPW:function(id,_154){var _155=dijit.byId(id).get(_154);if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_154,_155);}return _155;},getW:function(id){return dijit.byId(id);},runWF:function(id,_156,_157){var _158=dijit.byId(id);var args=[];for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i];}var _159=_158[_156].apply(_158,args);if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_156,args,_159);}return _159;},destroy:function(){this.clearRules();this._ruleEvents=undefined;this.monitor=undefined;this._ruleMaps=undefined;}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridDijit"]){dojo._hasResource["com.ibm.btt.dijit.GridDijit"]=true;dojo.provide("com.ibm.btt.dijit.GridDijit");dojo.declare("dojox.btt.grid.cells.BaseCellWidget",dojox.grid.cells._Widget,{createWidget:function(_15a,_15b,_15c){var _15d=this.inherited(arguments);var _15e=this;_15d.watch("state",function(attr,_15f,_160){_15e.grid._set("state",_15e.grid._getState());});return _15d;}});dojo.declare("dojox.btt.grid.cells.Label",dojox.btt.grid.cells.BaseCellWidget,{formatter:function(_161){return I18nUtil.getI18nString(_161);}});dojo.declare("dojox.btt.grid.cells.DateTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.DateTextBox,formatter:function(_162){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if(typeof _162=="string"){this.widget.attr("value",this.widget.parse(_162,this.widget.constraints));}else{this.widget.attr("value",_162);}return this.widget.format(this.widget.attr("value"),this.widget.constraints);},getWidgetProps:function(_163){return dojo.mixin(this.inherited(arguments),{value:new Date(_163)});},setValue:function(_164,_165){if(this.widget){if(typeof _165=="string"){this.widget.attr("value",this.widget.parse(_165,this.widget.constraints));}else{this.widget.attr("value",_165);}}else{this.inherited(arguments);}},getValue:function(_166){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CurrencyTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CurrencyTextBox,formatter:function(_167){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if(_167===null){return "";}if(typeof _167=="string"){_167=Number(_167);}this.widget.attr("value",_167);return dojo.number.format(_167,this.widget.constraints);},getWidgetProps:function(_168){return dojo.mixin(this.inherited(arguments),{value:new Number(_168)});},getValue:function(_169){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.NumberTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.NumberTextBox,formatter:function(_16a){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if(_16a===null){return "";}this.widget.set("value",_16a);if(typeof _16a=="string"){var _16b=this.widget.parse(_16a,this.widget.constraints);if(isNaN(_16b)){_16b=Number(_16a);}if(isNaN(_16b)){return _16a;}else{return this.widget.format(_16b,this.widget.constraints);}}else{return this.widget.format(_16a,this.widget.constraints);}},getWidgetProps:function(_16c){return dojo.mixin(this.inherited(arguments),{value:new Number(_16c)});},getValue:function(_16d){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CheckBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CheckBox,getValue:function(){return this.widget.attr("value");},setValue:function(_16e,_16f){if(this.widget){if(_16f.toString()==this.widget.checkedValue.toString()){this.widget.attr("isChecked",true);}else{this.widget.attr("isChecked",false);}}else{this.inherited(arguments);}},sizeWidget:function(_170,_171,_172){return;}});dojo.declare("dojox.btt.grid.cells.StringTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.StringTextBox,getValue:function(_173){if(this.widget.isValid()){return this.widget.attr("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},formatter:function(_174){return I18nUtil.getI18nString(_174);}});dojo.declare("dojox.btt.grid.cells.ComboBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.ComboBox,getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");}});dojo.declare("dojox.btt.grid.cells.Select",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Select,comparator:function(_175,_176){var _177=this.widget.store;var _178=_177._itemsByIdentity[_175];var v1=_178?_178.label[0]:_175;var _179=_177._itemsByIdentity[_176];var v2=_179?_179.label[0]:_176;if(v1>v2){return 1;}else{if(v1<v2){return -1;}else{return 0;}}},formatter:function(_17a){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if((_17a===null)||(_17a==="")){return "";}var _17b=this.widget.store;var item=_17b._itemsByIdentity[_17a];if(item){this.widget.set("value",_17a);return item.label[0];}else{return _17a;}}});dojo.declare("dojox.btt.grid.cells.Image",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Image,formatter:function(_17c){var html="<img src=\""+_17c+"\"";if(this.widgetProps&&this.widgetProps.imageWidth){html+=" width=\""+this.grid.handleLenUint(this.widgetProps.imageWidth)+"\"";}if(this.widgetProps&&this.widgetProps.imageHeight){html+=" height=\""+this.grid.handleLenUint(this.widgetProps.imageHeight)+"\"";}html+="/>";return html;}});dojo.declare("dojox.btt.grid.cells.LabelFromList",dojox.btt.grid.cells.BaseCellWidget,{constructor:function(prop){var _17d=this;if(prop.storeData){_17d.storeData=prop.storeData;}else{var _17e=prop.storeURL?prop.storeURL:prop.widgetProps.storeURL;if(_17e){var _17f={url:_17e,handleAs:"json",sync:true,load:function(arg){_17d.storeData=arg;},error:function(e){console.error("dojox.btt.grid.cells.LabelFromList: Failed to get the list file from "+_17e);}};dojo.xhrGet(_17f);}else{_17d.storeData={};}}if(_17d.storeData){var _180={};for(var key in _17d.storeData){if(_17d.storeData[key]!=null&&typeof (_17d.storeData[key])!="undefined"){_180[_17d.storeData[key]]=key;}}_17d.storeData=_180;}},formatter:function(_181){if(this.storeData&&this.storeData[_181]){return "<label>"+I18nUtil.getI18nString(this.storeData[_181])+"</label>";}else{if(_181&&_181===null&&_181==="null"){return "";}else{return "<label>"+_181+"</label>";}}}});dojo.declare("dojox.btt.grid.cells._LinkMixin",null,{constructor:function(prop){if(prop.widgetProps.action=="op"||prop.widgetProps.action=="flow"){var _182=dojo.fromJson(prop.widgetProps.bttParams);var url=["Request?"];for(var key in _182){if(_182[key]!=null){url.push(key);url.push("=");url.push(_182[key]);url.push("&");}}url.pop();this.widgetProps.baseUrl=url.join("");}},onClick:function(e){},_onClick:function(e){if(e.target.tagName==this._tagartTagName){var _183=function(src,str){var reg=new RegExp("^"+str);return reg.test(src);};var data=this.grid.store._arrayOfAllItems[e.rowIndex];var _184={};for(var key in data){if(data[key]!=null&&!_183(key,"_")){_184[key]=data[key][0];}}this.grid._cellEventRowData=_184;this.onClick(e);if(this.widgetProps&&this.widgetProps.action==="link"){window.open(this.widgetProps.links[e.rowIndex]);}else{if(this.widgetProps&&(this.widgetProps.action==="op"||this.widgetProps.action==="flow")){var _185=[];for(var key in _184){if(_184[key]!=null){_185.push(key);_185.push("=");_185.push(_184[key]);_185.push("&");}}_185.pop();var url=this.widgetProps.baseUrl+"&"+_185.join("");window.open(url);}else{}}}}});dojo.declare("dojox.btt.grid.cells.Link",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"A",formatter:function(_186,arg1,arg2,arg3){if(this.field){if(_186!=null&&_186!=undefined&&_186!=""&&_186!="null"){return "<a href='#"+arg1+"'>"+_186+"</a>";}else{return "";}}else{if(this.widgetProps&&this.widgetProps.label){return "<a href='#"+arg1+"'>"+this.grid.getI18NString(this.widgetProps.label)+"</a>";}else{return "";}}}});dojo.declare("dojox.btt.grid.cells.Button",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"SPAN",formatter:function(_187){if(this.field){if(_187!=null&&_187!=undefined&&_187!=""&&_187!="null"){return "<span class=\"dijit dijitReset dijitInline dijitButton\"><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+_187+"</span></div></span></span>";}else{return "";}}else{if(this.widgetProps&&this.widgetProps.label){_187=this.grid.getI18NString(this.widgetProps.label);return "<span class=\"dijit dijitReset dijitInline dijitButton\"><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+_187+"</span></div></span></span>";}else{return "";}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]){dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]=true;dojo.provide("com.ibm.btt.dijit.QueryReadStore");dojo.declare("com.ibm.btt.dijit.QueryReadStore",dojox.data.QueryReadStore,{bttParams:{},_fetchItems:function(_188,_189,_18a){var _18b=_188.serverQuery||_188.query||{};if(!this.doClientPaging){_18b.start=(_188.start||0).toString();if(_188.count){_18b.count=_188.count.toString();}}if(!this.doClientSorting&&_188.sort){var _18c=[];dojo.forEach(_188.sort,function(sort){if(sort&&sort.attribute){_18c.push((sort.descending?"-":"")+sort.attribute);}});_18b.sort=_18c.join(",");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_18b)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_189(this._items,_188,this._numRows);}else{var _18d=dojo.xhrPost;dojo.safeMixin(_18b,this.bttParams);var _18e=_18d({url:this.url,handleAs:"text",postData:dojo.toJson(_18b),failOk:true});_188.abort=function(){_18e.cancel();};_18e.addCallback(dojo.hitch(this,function(_18f){try{data=dojo.fromJson(_18f||null);this._xhrFetchHandler(data,_188,_189,_18a);}catch(err){console.error(err);}}));_18e.addErrback(function(_190){_18a(_190,_188);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_18b);}}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]){dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]=true;dojo.provide("dojox.grid.enhanced.plugins.AutoScroll");dojo.declare("dojox.grid.enhanced.plugins.AutoScroll",dojox.grid.enhanced._Plugin,{name:"autoScroll",autoScrollInterval:1000,autoScrollMargin:30,constructor:function(grid,args){this.grid=grid;this.readyForAutoScroll=false;this._scrolling=false;args=dojo.isObject(args)?args:{};if("interval" in args){this.autoScrollInterval=args.interval;}if("margin" in args){this.autoScrollMargin=args.margin;}this._initEvents();this._mixinGrid();},_initEvents:function(){var g=this.grid;this.connect(g,"onCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onHeaderCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onRowSelectorMouseDown",function(){this.readyForAutoScroll=true;});this.connect(dojo.doc,"onmouseup",function(evt){this._manageAutoScroll(true);this.readyForAutoScroll=false;});this.connect(dojo.doc,"onmousemove",function(evt){if(this.readyForAutoScroll){this._event=evt;var _191=dojo.position(g.domNode),hh=g._getHeaderHeight(),_192=this.autoScrollMargin,ey=evt.clientY,ex=evt.clientX,gy=_191.y,gx=_191.x,gh=_191.h,gw=_191.w;if(ex>=gx&&ex<=gx+gw){if(ey>=gy+hh&&ey<gy+hh+_192){this._manageAutoScroll(false,true,false);return;}else{if(ey>gy+gh-_192&&ey<=gy+gh){this._manageAutoScroll(false,true,true);return;}else{if(ey>=gy&&ey<=gy+gh){var _193=dojo.some(g.views.views,function(view,i){if(view instanceof dojox.grid._RowSelector){return false;}var _194=dojo.position(view.domNode);if(ex<_194.x+_192&&ex>=_194.x){this._manageAutoScroll(false,false,false,view);return true;}else{if(ex>_194.x+_194.w-_192&&ex<_194.x+_194.w){this._manageAutoScroll(false,false,true,view);return true;}}return false;},this);if(_193){return;}}}}}this._manageAutoScroll(true);}});},_mixinGrid:function(){var g=this.grid;g.onStartAutoScroll=function(){};g.onEndAutoScroll=function(){};},_fireEvent:function(_195,args){var g=this.grid;switch(_195){case "start":g.onStartAutoScroll.apply(g,args);break;case "end":g.onEndAutoScroll.apply(g,args);break;}},_manageAutoScroll:function(_196,_197,_198,view){if(_196){this._scrolling=false;clearInterval(this._handler);}else{if(!this._scrolling){this._scrolling=true;this._fireEvent("start",[_197,_198,view]);this._autoScroll(_197,_198,view);this._handler=setInterval(dojo.hitch(this,"_autoScroll",_197,_198,view),this.autoScrollInterval);}}},_autoScroll:function(_199,_19a,view){var g=this.grid,_19b=null;if(_199){var _19c=g.scroller.firstVisibleRow+(_19a?1:-1);if(_19c>=0&&_19c<g.rowCount){g.scrollToRow(_19c);_19b=_19c;}}else{_19b=this._scrollColumn(_19a,view);}if(_19b!==null){this._fireEvent("end",[_199,_19a,view,_19b,this._event]);}},_scrollColumn:function(_19d,view){var node=view.scrollboxNode,_19e=null;if(node.clientWidth<node.scrollWidth){var _19f=dojo.filter(this.grid.layout.cells,function(cell){return !cell.hidden;});var _1a0=dojo.position(view.domNode);var _1a1,edge,_1a2,i;if(_19d){_1a1=node.clientWidth;for(i=0;i<_19f.length;++i){_1a2=dojo.position(_19f[i].getHeaderNode());edge=_1a2.x-_1a0.x+_1a2.w;if(edge>_1a1){_19e=_19f[i].index;node.scrollLeft+=edge-_1a1+10;break;}}}else{_1a1=0;for(i=_19f.length-1;i>=0;--i){_1a2=dojo.position(_19f[i].getHeaderNode());edge=_1a2.x-_1a0.x;if(edge<_1a1){_19e=_19f[i].index;node.scrollLeft+=edge-_1a1-10;break;}}}}return _19e;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.AutoScroll);}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]){dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]=true;dojo.provide("dojox.grid.enhanced.plugins.Selector");(function(){var _1a3=0,_1a4=1,_1a5=2,_1a6={col:"row",row:"col"},_1a7=function(type,_1a8,_1a9,end,_1aa){if(type!=="cell"){_1a8=_1a8[type];_1a9=_1a9[type];end=end[type];if(typeof _1a8!=="number"||typeof _1a9!=="number"||typeof end!=="number"){return false;}return _1aa?((_1a8>=_1a9&&_1a8<end)||(_1a8>end&&_1a8<=_1a9)):((_1a8>=_1a9&&_1a8<=end)||(_1a8>=end&&_1a8<=_1a9));}else{return _1a7("col",_1a8,_1a9,end,_1aa)&&_1a7("row",_1a8,_1a9,end,_1aa);}},_1ab=function(type,v1,v2){try{if(v1&&v2){switch(type){case "col":case "row":return v1[type]==v2[type]&&typeof v1[type]=="number"&&!(_1a6[type] in v1)&&!(_1a6[type] in v2);case "cell":return v1.col==v2.col&&v1.row==v2.row&&typeof v1.col=="number"&&typeof v1.row=="number";}}}catch(e){}return false;},_1ac=function(evt){try{if(evt&&evt.preventDefault){dojo.stopEvent(evt);}}catch(e){}},_1ad=function(type,_1ae,_1af){switch(type){case "col":return {"col":typeof _1af=="undefined"?_1ae:_1af,"except":[]};case "row":return {"row":_1ae,"except":[]};case "cell":return {"row":_1ae,"col":_1af};}return null;};dojo.declare("dojox.grid.enhanced.plugins.Selector",dojox.grid.enhanced._Plugin,{name:"selector",constructor:function(grid,args){this.grid=grid;this._config={row:_1a5,col:_1a5,cell:_1a5};this.setupConfig(args);if(grid.selectionMode==="single"){this._config.row=_1a4;}this._enabled=true;this._selecting={};this._selected={"col":[],"row":[],"cell":[]};this._startPoint={};this._currentPoint={};this._lastAnchorPoint={};this._lastEndPoint={};this._lastSelectedAnchorPoint={};this._lastSelectedEndPoint={};this._keyboardSelect={};this._lastType=null;this._selectedRowModified={};this._hacks();this._initEvents();this._initAreas();this._mixinGrid();},destroy:function(){this.inherited(arguments);},setupConfig:function(_1b0){if(!_1b0||!dojo.isObject(_1b0)){return;}var _1b1=["row","col","cell"];for(var type in _1b0){if(dojo.indexOf(_1b1,type)>=0){if(!_1b0[type]||_1b0[type]=="disabled"){this._config[type]=_1a3;}else{if(_1b0[type]=="single"){this._config[type]=_1a4;}else{this._config[type]=_1a5;}}}}var mode=["none","single","extended"][this._config.row];this.grid.selection.setMode(mode);},isSelected:function(type,_1b2,_1b3){return this._isSelected(type,_1ad(type,_1b2,_1b3));},toggleSelect:function(type,_1b4,_1b5){this._startSelect(type,_1ad(type,_1b4,_1b5),this._config[type]===_1a5,false);this._endSelect(type);},select:function(type,_1b6,_1b7){if(!this.isSelected(type,_1b6,_1b7)){this.toggleSelect(type,_1b6,_1b7);}},deselect:function(type,_1b8,_1b9){if(this.isSelected(type,_1b8,_1b9)){this.toggleSelect(type,_1b8,_1b9);}},selectRange:function(type,_1ba,end,_1bb){this.grid._selectingRange=true;var _1bc=type=="cell"?_1ad(type,_1ba.row,_1ba.col):_1ad(type,_1ba),_1bd=type=="cell"?_1ad(type,end.row,end.col):_1ad(type,end);this._startSelect(type,_1bc,false,false,false,_1bb);this._highlight(type,_1bd,_1bb===undefined?true:_1bb);this._endSelect(type);this.grid._selectingRange=false;},clear:function(type){this._clearSelection(type||"all");},isSelecting:function(type){if(typeof type=="undefined"){return this._selecting.col||this._selecting.row||this._selecting.cell;}return this._selecting[type];},selectEnabled:function(_1be){if(typeof _1be!="undefined"&&!this.isSelecting()){this._enabled=!!_1be;}return this._enabled;},getSelected:function(type,_1bf){switch(type){case "cell":return dojo.map(this._selected[type],function(item){return item;});case "col":case "row":return dojo.map(_1bf?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;}),function(item){return _1bf?item:item[type];});}return [];},getSelectedCount:function(type,_1c0){switch(type){case "cell":return this._selected[type].length;case "col":case "row":return (_1c0?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;})).length;}return 0;},getSelectedType:function(){var s=this._selected;return ["","cell","row","row|cell","col","col|cell","col|row","col|row|cell"][(!!s.cell.length)|(!!s.row.length<<1)|(!!s.col.length<<2)];},getLastSelectedRange:function(type){return this._lastAnchorPoint[type]?{"start":this._lastAnchorPoint[type],"end":this._lastEndPoint[type]}:null;},_hacks:function(){var g=this.grid;var _1c1=function(e){if(e.cellNode){g.onMouseUp(e);}g.onMouseUpRow(e);};var _1c2=dojo.hitch(g,"onMouseUp");var _1c3=dojo.hitch(g,"onMouseDown");var _1c4=function(e){e.cellNode.style.border="solid 1px";};dojo.forEach(g.views.views,function(view){view.content.domouseup=_1c1;view.header.domouseup=_1c2;if(view.declaredClass=="dojox.grid._RowSelector"){view.domousedown=_1c3;view.domouseup=_1c2;view.dofocus=_1c4;}});g.selection.clickSelect=function(){};this._oldDeselectAll=g.selection.deselectAll;var _1c5=this;g.selection.selectRange=function(from,to){_1c5.selectRange("row",from,to,true);if(g.selection.preserver){g.selection.preserver._updateMapping(true,true,false,from,to);}g.selection.onChanged();};g.selection.deselectRange=function(from,to){_1c5.selectRange("row",from,to,false);if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,false,from,to);}g.selection.onChanged();};g.selection.deselectAll=function(){g._selectingRange=true;_1c5._oldDeselectAll.apply(g.selection,arguments);_1c5._clearSelection("row");g._selectingRange=false;if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,true);}g.selection.onChanged();};var _1c6=g.views.views[0];if(_1c6 instanceof dojox.grid._RowSelector){_1c6.doStyleRowNode=function(_1c7,_1c8){dojo.removeClass(_1c8,"dojoxGridRow");dojo.addClass(_1c8,"dojoxGridRowbar");dojo.addClass(_1c8,"dojoxGridNonNormalizedCell");dojo.toggleClass(_1c8,"dojoxGridRowbarOver",g.rows.isOver(_1c7));dojo.toggleClass(_1c8,"dojoxGridRowbarSelected",!!g.selection.isSelected(_1c7));};}this.connect(g,"updateRow",function(_1c9){dojo.forEach(g.layout.cells,function(cell){if(this.isSelected("cell",_1c9,cell.index)){this._highlightNode(cell.getNode(_1c9),true);}},this);});},_mixinGrid:function(){var g=this.grid;g.setupSelectorConfig=dojo.hitch(this,this.setupConfig);g.onStartSelect=function(){};g.onEndSelect=function(){};g.onStartDeselect=function(){};g.onEndDeselect=function(){};g.onSelectCleared=function(){};},_initEvents:function(){var g=this.grid,_1ca=this,dp=dojo.partial,_1cb=function(type,e){if(type==="row"){_1ca._isUsingRowSelector=true;}if(_1ca.selectEnabled()&&_1ca._config[type]&&e.button!=2){if(_1ca._keyboardSelect.col||_1ca._keyboardSelect.row||_1ca._keyboardSelect.cell){_1ca._endSelect("all");_1ca._keyboardSelect.col=_1ca._keyboardSelect.row=_1ca._keyboardSelect.cell=0;}if(_1ca._usingKeyboard){_1ca._usingKeyboard=false;}var _1cc=_1ad(type,e.rowIndex,e.cell&&e.cell.index);_1ca._startSelect(type,_1cc,e.ctrlKey,e.shiftKey);}},_1cd=dojo.hitch(this,"_endSelect");this.connect(g,"onHeaderCellMouseDown",dp(_1cb,"col"));this.connect(g,"onHeaderCellMouseUp",dp(_1cd,"col"));this.connect(g,"onRowSelectorMouseDown",dp(_1cb,"row"));this.connect(g,"onRowSelectorMouseUp",dp(_1cd,"row"));this.connect(g,"onCellMouseDown",function(e){if(e.cell&&e.cell.isRowSelector){return;}if(g.singleClickEdit){_1ca._singleClickEdit=true;g.singleClickEdit=false;}_1cb(_1ca._config["cell"]==_1a3?"row":"cell",e);});this.connect(g,"onCellMouseUp",function(e){if(_1ca._singleClickEdit){delete _1ca._singleClickEdit;g.singleClickEdit=true;}_1cd("all",e);});this.connect(g,"onCellMouseOver",function(e){if(_1ca._curType!="row"&&_1ca._selecting[_1ca._curType]&&_1ca._config[_1ca._curType]==_1a5){_1ca._highlight("col",_1ad("col",e.cell.index),_1ca._toSelect);if(!_1ca._keyboardSelect.cell){_1ca._highlight("cell",_1ad("cell",e.rowIndex,e.cell.index),_1ca._toSelect);}}});this.connect(g,"onHeaderCellMouseOver",function(e){if(_1ca._selecting.col&&_1ca._config.col==_1a5){_1ca._highlight("col",_1ad("col",e.cell.index),_1ca._toSelect);}});this.connect(g,"onRowMouseOver",function(e){if(_1ca._selecting.row&&_1ca._config.row==_1a5){_1ca._highlight("row",_1ad("row",e.rowIndex),_1ca._toSelect);}});this.connect(g,"onSelectedById","_onSelectedById");this.connect(g,"_onFetchComplete",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(g.scroller,"buildPage",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(dojo.doc,"onmouseup",dp(_1cd,"all"));this.connect(g,"onEndAutoScroll",function(_1ce,_1cf,view,_1d0){var _1d1=_1ca._selecting.cell,type,_1d2,dir=_1cf?1:-1;if(_1ce&&(_1d1||_1ca._selecting.row)){type=_1d1?"cell":"row";_1d2=_1ca._currentPoint[type];_1ca._highlight(type,_1ad(type,_1d2.row+dir,_1d2.col),_1ca._toSelect);}else{if(!_1ce&&(_1d1||_1ca._selecting.col)){type=_1d1?"cell":"col";_1d2=_1ca._currentPoint[type];_1ca._highlight(type,_1ad(type,_1d2.row,_1d0),_1ca._toSelect);}}});this.subscribe("dojox/grid/rearrange/move/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/copy/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/change/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/insert/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/remove/"+g.id,"clear");this.connect(g,"onSelected",function(_1d3){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.select("row",_1d3);}}});this.connect(g,"onDeselected",function(_1d4){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.deselect("row",_1d4);}}});},_onSelectedById:function(id,_1d5,_1d6){if(this.grid._noInternalMapping){return;}var _1d7=[this._lastAnchorPoint.row,this._lastEndPoint.row,this._lastSelectedAnchorPoint.row,this._lastSelectedEndPoint.row];_1d7=_1d7.concat(this._selected.row);var _1d8=false;dojo.forEach(_1d7,function(item){if(item){if(item.id===id){_1d8=true;item.row=_1d5;}else{if(item.row===_1d5&&item.id){item.row=-1;}}}});if(!_1d8&&_1d6){dojo.some(this._selected.row,function(item){if(item&&!item.id&&!item.except.length){item.id=id;item.row=_1d5;return true;}return false;});}_1d8=false;_1d7=[this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell];_1d7=_1d7.concat(this._selected.cell);dojo.forEach(_1d7,function(item){if(item){if(item.id===id){_1d8=true;item.row=_1d5;}else{if(item.row===_1d5&&item.id){item.row=-1;}}}});},onSetStore:function(){this._clearSelection("all");},_onInternalRearrange:function(type,_1d9){try{this._refresh("col",false);dojo.forEach(this._selected.row,function(item){dojo.forEach(this.grid.layout.cells,function(cell){this._highlightNode(cell.getNode(item.row),false);},this);},this);dojo.query(".dojoxGridRowSelectorSelected").forEach(function(node){dojo.removeClass(node,"dojoxGridRowSelectorSelected");dojo.removeClass(node,"dojoxGridRowSelectorSelectedUp");dojo.removeClass(node,"dojoxGridRowSelectorSelectedDown");});var _1da=function(item){if(item){delete item.converted;}},_1db=[this._lastAnchorPoint[type],this._lastEndPoint[type],this._lastSelectedAnchorPoint[type],this._lastSelectedEndPoint[type]];if(type==="cell"){this.selectRange("cell",_1d9.to.min,_1d9.to.max);var _1dc=this.grid.layout.cells;dojo.forEach(_1db,function(item){if(item.converted){return;}for(var r=_1d9.from.min.row,tr=_1d9.to.min.row;r<=_1d9.from.max.row;++r,++tr){for(var c=_1d9.from.min.col,tc=_1d9.to.min.col;c<=_1d9.from.max.col;++c,++tc){while(_1dc[c].hidden){++c;}while(_1dc[tc].hidden){++tc;}if(item.row==r&&item.col==c){item.row=tr;item.col=tc;item.converted=true;return;}}}});}else{_1db=this._selected.cell.concat(this._selected[type]).concat(_1db).concat([this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell]);dojo.forEach(_1db,function(item){if(item&&!item.converted){var from=item[type];if(from in _1d9){item[type]=_1d9[from];}item.converted=true;}});dojo.forEach(this._selected[_1a6[type]],function(item){for(var i=0,len=item.except.length;i<len;++i){var from=item.except[i];if(from in _1d9){item.except[i]=_1d9[from];}}});}dojo.forEach(_1db,_1da);this._refreshSelected(true);this._focusPoint(type,this._lastEndPoint);}catch(e){console.warn("Selector._onInternalRearrange() error",e);}},_onExternalChange:function(type,_1dd){var _1de=type=="cell"?_1dd.min:_1dd[0],end=type=="cell"?_1dd.max:_1dd[_1dd.length-1];this.selectRange(type,_1de,end);},_refresh:function(type,_1df){if(!this._keyboardSelect[type]){dojo.forEach(this._selected[type],function(item){this._highlightSingle(type,_1df,item,undefined,true);},this);}},_refreshSelected:function(){this._refresh("col",true);this._refresh("row",true);this._refresh("cell",true);},_initAreas:function(){var g=this.grid,f=g.focus,_1e0=this,dk=dojo.keys,_1e1=1,_1e2=2,_1e3=function(type,_1e4,_1e5,_1e6,evt){var ks=_1e0._keyboardSelect;if(evt.shiftKey&&ks[type]){if(ks[type]===_1e1){if(type==="cell"){var item=_1e0._lastEndPoint[type];if(f.cell!=g.layout.cells[item.col+_1e6]||f.rowIndex!=item.row+_1e5){ks[type]=0;return;}}_1e0._startSelect(type,_1e0._lastAnchorPoint[type],true,false,true);_1e0._highlight(type,_1e0._lastEndPoint[type],_1e0._toSelect);ks[type]=_1e2;}var _1e7=_1e4(type,_1e5,_1e6,evt);if(_1e0._isValid(type,_1e7,g)){_1e0._highlight(type,_1e7,_1e0._toSelect);}_1ac(evt);}},_1e8=function(type,_1e9,evt,_1ea){if(_1ea&&_1e0.selectEnabled()&&_1e0._config[type]!=_1a3){switch(evt.keyCode){case dk.SPACE:_1e0._startSelect(type,_1e9(),evt.ctrlKey,evt.shiftKey);_1e0._endSelect(type);break;case dk.SHIFT:if(_1e0._config[type]==_1a5&&_1e0._isValid(type,_1e0._lastAnchorPoint[type],g)){_1e0._endSelect(type);_1e0._keyboardSelect[type]=_1e1;_1e0._usingKeyboard=true;}}}},_1eb=function(type,evt,_1ec){if(_1ec&&evt.keyCode==dojo.keys.SHIFT&&_1e0._keyboardSelect[type]){_1e0._endSelect(type);_1e0._keyboardSelect[type]=0;}};if(g.views.views[0] instanceof dojox.grid._RowSelector){this._lastFocusedRowBarIdx=0;f.addArea({name:"rowHeader",onFocus:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _1ed=view.getCellNode(_1e0._lastFocusedRowBarIdx,0);if(_1ed){dojo.toggleClass(_1ed,f.focusClass,false);}if(evt&&"rowIndex" in evt){if(evt.rowIndex>=0){_1e0._lastFocusedRowBarIdx=evt.rowIndex;}else{if(!_1e0._lastFocusedRowBarIdx){_1e0._lastFocusedRowBarIdx=0;}}}_1ed=view.getCellNode(_1e0._lastFocusedRowBarIdx,0);if(_1ed){dijit.focus(_1ed);dojo.toggleClass(_1ed,f.focusClass,true);}f.rowIndex=_1e0._lastFocusedRowBarIdx;_1ac(evt);return true;}return false;},onBlur:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _1ee=view.getCellNode(_1e0._lastFocusedRowBarIdx,0);dojo.toggleClass(_1ee,f.focusClass,false);_1ac(evt);}return true;},onMove:function(_1ef,_1f0,evt){var view=g.views.views[0];if(_1ef&&view instanceof dojox.grid._RowSelector){var next=_1e0._lastFocusedRowBarIdx+_1ef;if(next>=0&&next<g.rowCount){_1ac(evt);var _1f1=view.getCellNode(_1e0._lastFocusedRowBarIdx,0);dojo.toggleClass(_1f1,f.focusClass,false);var sc=g.scroller;var _1f2=sc.getLastPageRow(sc.page);var rc=g.rowCount-1,row=Math.min(rc,next);if(next>_1f2){g.setScrollTop(g.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(_1e0._lastFocusedRowBarIdx));}_1f1=view.getCellNode(next,0);dijit.focus(_1f1);dojo.toggleClass(_1f1,f.focusClass,true);_1e0._lastFocusedRowBarIdx=next;f.cell=_1f1;f.cell.view=view;f.cell.getNode=function(_1f3){return f.cell;};f.rowIndex=_1e0._lastFocusedRowBarIdx;f.scrollIntoView();f.cell=null;}}}});f.placeArea("rowHeader","before","content");}f.addArea({name:"cellselect",onMove:dojo.partial(_1e3,"cell",function(type,_1f4,_1f5,evt){var _1f6=_1e0._currentPoint[type];return _1ad("cell",_1f6.row+_1f4,_1f6.col+_1f5);}),onKeyDown:dojo.partial(_1e8,"cell",function(){return _1ad("cell",f.rowIndex,f.cell.index);}),onKeyUp:dojo.partial(_1eb,"cell")});f.placeArea("cellselect","below","content");f.addArea({name:"colselect",onMove:dojo.partial(_1e3,"col",function(type,_1f7,_1f8,evt){var _1f9=_1e0._currentPoint[type];return _1ad("col",_1f9.col+_1f8);}),onKeyDown:dojo.partial(_1e8,"col",function(){return _1ad("col",f.getHeaderIndex());}),onKeyUp:dojo.partial(_1eb,"col")});f.placeArea("colselect","below","header");f.addArea({name:"rowselect",onMove:dojo.partial(_1e3,"row",function(type,_1fa,_1fb,evt){return _1ad("row",f.rowIndex);}),onKeyDown:dojo.partial(_1e8,"row",function(){return _1ad("row",f.rowIndex);}),onKeyUp:dojo.partial(_1eb,"row")});f.placeArea("rowselect","below","rowHeader");},_clearSelection:function(type,_1fc){if(type=="all"){this._clearSelection("cell",_1fc);this._clearSelection("col",_1fc);this._clearSelection("row",_1fc);return;}this._isUsingRowSelector=true;dojo.forEach(this._selected[type],function(item){if(!_1ab(type,_1fc,item)){this._highlightSingle(type,false,item);}},this);this._blurPoint(type,this._currentPoint);this._selecting[type]=false;this._startPoint[type]=this._currentPoint[type]=null;this._selected[type]=[];if(type=="row"&&!this.grid._selectingRange){this._oldDeselectAll.call(this.grid.selection);this.grid.selection._selectedById={};}this.grid.onEndDeselect(type,null,null,this._selected);this.grid.onSelectCleared(type);},_startSelect:function(type,_1fd,_1fe,_1ff,_200,_201){if(!this._isValid(type,_1fd)){return;}var _202=this._isSelected(type,this._lastEndPoint[type]),_203=this._isSelected(type,_1fd);this._toSelect=_200?_203:!_203;if(!_1fe||(!_203&&this._config[type]==_1a4)){this._clearSelection("all",_1fd);this._toSelect=_201===undefined?true:_201;}this._selecting[type]=true;this._currentPoint[type]=null;if(_1ff&&this._lastType==type&&_202==this._toSelect){if(type==="row"){this._isUsingRowSelector=true;}this._startPoint[type]=this._lastEndPoint[type];this._highlight(type,this._startPoint[type]);this._isUsingRowSelector=false;}else{this._startPoint[type]=_1fd;}this._curType=type;this._fireEvent("start",type);this._isStartFocus=true;this._isUsingRowSelector=true;this._highlight(type,_1fd,this._toSelect);this._isStartFocus=false;},_endSelect:function(type){if(type==="row"){delete this._isUsingRowSelector;}if(type=="all"){this._endSelect("col");this._endSelect("row");this._endSelect("cell");}else{if(this._selecting[type]){this._addToSelected(type);this._lastAnchorPoint[type]=this._startPoint[type];this._lastEndPoint[type]=this._currentPoint[type];if(this._toSelect){this._lastSelectedAnchorPoint[type]=this._lastAnchorPoint[type];this._lastSelectedEndPoint[type]=this._lastEndPoint[type];}this._startPoint[type]=this._currentPoint[type]=null;this._selecting[type]=false;this._lastType=type;this._fireEvent("end",type);}}},_fireEvent:function(_204,type){switch(_204){case "start":this.grid[this._toSelect?"onStartSelect":"onStartDeselect"](type,this._startPoint[type],this._selected);break;case "end":this.grid[this._toSelect?"onEndSelect":"onEndDeselect"](type,this._lastAnchorPoint[type],this._lastEndPoint[type],this._selected);break;}},_calcToHighlight:function(type,_205,_206,_207){if(_207!==undefined){var sltd;if(this._usingKeyboard&&!_206){var last=this._isInLastRange(this._lastType,_205);if(last){sltd=this._isSelected(type,_205);if(_207&&sltd){return false;}if(!_207&&!sltd&&this._isInLastRange(this._lastType,_205,true)){return true;}}}return _206?_207:(sltd||this._isSelected(type,_205));}return _206;},_highlightNode:function(node,_208){if(node){var _209="dojoxGridRowSelected";var _20a="dojoxGridCellSelected";dojo.toggleClass(node,_209,_208);dojo.toggleClass(node,_20a,_208);}},_highlightHeader:function(_20b,_20c){var _20d=this.grid.layout.cells;var node=_20d[_20b].getHeaderNode();var _20e="dojoxGridHeaderSelected";dojo.toggleClass(node,_20e,_20c);},_highlightRowSelector:function(_20f,_210){var _211=this.grid.views.views[0];if(_211 instanceof dojox.grid._RowSelector){var node=_211.getRowNode(_20f);if(node){var _212="dojoxGridRowSelectorSelected";dojo.toggleClass(node,_212,_210);}}},_highlightSingle:function(type,_213,_214,_215,_216){var _217=this,toHL,g=_217.grid,_218=g.layout.cells;switch(type){case "cell":toHL=this._calcToHighlight(type,_214,_213,_215);var c=_218[_214.col];if(!c.hidden&&!c.notselectable){this._highlightNode(_214.node||c.getNode(_214.row),toHL);}break;case "col":toHL=this._calcToHighlight(type,_214,_213,_215);this._highlightHeader(_214.col,toHL);dojo.query("td[idx='"+_214.col+"']",g.domNode).forEach(function(_219){var _21a=_218[_214.col].view.content.findRowTarget(_219);if(_21a){var _21b=_21a[dojox.grid.util.rowIndexTag];_217._highlightSingle("cell",toHL,{"row":_21b,"col":_214.col,"node":_219});}});break;case "row":toHL=this._calcToHighlight(type,_214,_213,_215);this._highlightRowSelector(_214.row,toHL);dojo.forEach(_218,function(cell){_217._highlightSingle("cell",toHL,{"row":_214.row,"col":cell.index,"node":cell.getNode(_214.row)});});this._selectedRowModified=true;if(!_216){g.selection.setSelected(_214.row,toHL);}}},_highlight:function(type,_21c,_21d){if(this._selecting[type]&&_21c!==null){var _21e=this._startPoint[type],_21f=this._currentPoint[type],_220=this,_221=function(from,to,toHL){_220._forEach(type,from,to,function(item){_220._highlightSingle(type,toHL,item,_21d);},true);};switch(type){case "col":case "row":if(_21f!==null){if(_1a7(type,_21c,_21e,_21f,true)){_221(_21f,_21c,false);}else{if(_1a7(type,_21e,_21c,_21f,true)){_221(_21f,_21e,false);_21f=_21e;}_221(_21c,_21f,true);}}else{this._highlightSingle(type,true,_21c,_21d);}break;case "cell":if(_21f!==null){if(_1a7("row",_21c,_21e,_21f,true)||_1a7("col",_21c,_21e,_21f,true)||_1a7("row",_21e,_21c,_21f,true)||_1a7("col",_21e,_21c,_21f,true)){_221(_21e,_21f,false);}}_221(_21e,_21c,true);}this._currentPoint[type]=_21c;this._focusPoint(type,this._currentPoint);}},_focusPoint:function(type,_222){if(!this._isStartFocus){var _223=_222[type],f=this.grid.focus;if(type=="col"){f._colHeadFocusIdx=_223.col;f.focusArea("header");}else{if(type=="row"){f.focusArea("rowHeader",{"rowIndex":_223.row});}else{if(type=="cell"){f.setFocusIndex(_223.row,_223.col);}}}}},_blurPoint:function(type,_224){var f=this.grid.focus;if(type=="col"){f._blurHeader();}else{if(type=="cell"){f._blurContent();}}},_addToSelected:function(type){var _225=this._toSelect,_226=this,_227=[],_228=[],_229=this._startPoint[type],end=this._currentPoint[type];if(this._usingKeyboard){this._forEach(type,this._lastAnchorPoint[type],this._lastEndPoint[type],function(item){if(!_1a7(type,item,_229,end)){(_225?_228:_227).push(item);}});}this._forEach(type,_229,end,function(item){var _22a=_226._isSelected(type,item);if(_225&&!_22a){_227.push(item);}else{if(!_225){_228.push(item);}}});this._add(type,_227);this._remove(type,_228);dojo.forEach(this._selected.row,function(item){if(item.except.length>0){this._selectedRowModified=true;this.grid.selection.setSelected(item.row,false);}},this);},_forEach:function(type,_22b,end,func,_22c){if(!this._isValid(type,_22b,true)||!this._isValid(type,end,true)){return;}switch(type){case "col":case "row":_22b=_22b[type];end=end[type];var dir=end>_22b?1:-1;if(!_22c){end+=dir;}for(;_22b!=end;_22b+=dir){func(_1ad(type,_22b));}break;case "cell":var _22d=end.col>_22b.col?1:-1,_22e=end.row>_22b.row?1:-1;for(var i=_22b.row,p=end.row+_22e;i!=p;i+=_22e){for(var j=_22b.col,q=end.col+_22d;j!=q;j+=_22d){func(_1ad(type,i,j));}}}},_makeupForExceptions:function(type,_22f){var _230=[];dojo.forEach(this._selected[type],function(v1){dojo.forEach(_22f,function(v2){if(v1[type]==v2[type]){var pos=dojo.indexOf(v1.except,v2[_1a6[type]]);if(pos>=0){v1.except.splice(pos,1);}_230.push(v2);}});});return _230;},_makeupForCells:function(type,_231){var _232=[];dojo.forEach(this._selected.cell,function(v1){dojo.some(_231,function(v2){if(v1[type]==v2[type]){_232.push(v1);return true;}return false;});});this._remove("cell",_232);dojo.forEach(this._selected[_1a6[type]],function(v1){dojo.forEach(_231,function(v2){var pos=dojo.indexOf(v1.except,v2[type]);if(pos>=0){v1.except.splice(pos,1);}});});},_addException:function(type,_233){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_233,function(v2){v1.except.push(v2[_1a6[type]]);});});},_addCellException:function(type,_234){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_234,function(v2){if(v1[type]==v2[type]){v1.except.push(v2[_1a6[type]]);}});});},_add:function(type,_235){var _236=this.grid.layout.cells;if(type=="cell"){var _237=this._makeupForExceptions("col",_235);var _238=this._makeupForExceptions("row",_235);_235=dojo.filter(_235,function(item){return dojo.indexOf(_237,item)<0&&dojo.indexOf(_238,item)<0&&!_236[item.col].hidden&&!_236[item.col].notselectable;});}else{if(type=="col"){_235=dojo.filter(_235,function(item){return !_236[item.col].hidden&&!_236[item.col].notselectable;});}this._makeupForCells(type,_235);this._selected[type]=dojo.filter(this._selected[type],function(v){return dojo.every(_235,function(item){return v[type]!==item[type];});});}if(type!="col"&&this.grid._hasIdentity){dojo.forEach(_235,function(item){var _239=this.grid._by_idx[item.row];if(_239){item.id=_239.idty;}},this);}this._selected[type]=this._selected[type].concat(_235);},_remove:function(type,_23a){var comp=dojo.partial(_1ab,type);this._selected[type]=dojo.filter(this._selected[type],function(v1){return !dojo.some(_23a,function(v2){return comp(v1,v2);});});if(type=="cell"){this._addCellException("col",_23a);this._addCellException("row",_23a);}else{this._addException(_1a6[type],_23a);}},_isCellNotInExcept:function(type,item){var attr=item[type],_23b=item[_1a6[type]];return dojo.some(this._selected[type],function(v){return v[type]==attr&&dojo.indexOf(v.except,_23b)<0;});},_isSelected:function(type,item){if(!item){return false;}var res=dojo.some(this._selected[type],function(v){var ret=_1ab(type,item,v);if(ret&&type!=="cell"){return v.except.length===0;}return ret;});if(!res&&type==="cell"){res=(this._isCellNotInExcept("col",item)||this._isCellNotInExcept("row",item));if(type==="cell"){res=res&&!this.grid.layout.cells[item.col].notselectable;}}return res;},_isInLastRange:function(type,item,_23c){var _23d=this[_23c?"_lastSelectedAnchorPoint":"_lastAnchorPoint"][type],end=this[_23c?"_lastSelectedEndPoint":"_lastEndPoint"][type];if(!item||!_23d||!end){return false;}return _1a7(type,item,_23d,end);},_isValid:function(type,item,_23e){if(!item){return false;}try{var g=this.grid,_23f=item[type];switch(type){case "col":return _23f>=0&&_23f<g.layout.cells.length&&dojo.isArray(item.except)&&(_23e||!g.layout.cells[_23f].notselectable);case "row":return _23f>=0&&_23f<g.rowCount&&dojo.isArray(item.except);case "cell":return item.col>=0&&item.col<g.layout.cells.length&&item.row>=0&&item.row<g.rowCount&&(_23e||!g.layout.cells[item.col].notselectable);}}catch(e){}return false;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.Selector,{"dependency":["autoScroll"]});})();}if(!dojo._hasResource["com.ibm.btt.dijit.Grid"]){dojo._hasResource["com.ibm.btt.dijit.Grid"]=true;dojo.provide("com.ibm.btt.dijit.Grid");dojo.declare("com.ibm.btt.dijit.Grid",[dojox.grid.EnhancedGrid,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",templateString:dojo.cache("com.ibm.btt.dijit","templates/Grid.html","<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\r\n\t\r\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridErroressages\" style=\"display: none;\" dojoAttachPoint=\"errorMessageNode\"></div>\r\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\r\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\r\n\t\r\n</div>\r\n"),name:"",width:"",storeData:"",comparatorMap:"",height:"300",sortEnabled:false,_firstTimeLoaded:true,SELECTION_VALID_STATE:true,selectionMode:"none",selectionRequired:false,selectable:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Grid"),readOnly:false,disabled:false,create:function(){this._eventHandlers=[];this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.selectable){console.debug("grid",this);this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(this.pagination){this._eventHandlers.push(dojo.connect(this.pagination.plugin,"gotoPage",this,function(){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}));}}));this._eventHandlers.push(dojo.connect(this,"onSelectionChanged",this,this.checkSelectionNum));}if(this.sortEnabled){this._eventHandlers.push(dojo.connect(this,"onHeaderCellClick",this,function(e){if(dojo.hasClass(e.target,"dojoxGridSortBtnSingle")||dojo.hasClass(e.target,"dojoxGridSortBtnNested")){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}}));}this._eventHandlers.push(dojo.connect(this,"_onFetchComplete",this,function(){this.checkSelectionNum();}));this._eventHandlers.push(dojo.connect(this,"onKeyDown",this,function(e){this._set("state",this._getState());}));if(this.selectionMode==="single"){this._eventHandlers.push(dojo.connect(this.selection,"addToSelection",this,function(_240){if(this._lastSelectedIndex===_240){this.selection.deselectAll();this._lastSelectedIndex=undefined;}else{this._lastSelectedIndex=_240;}}));}this.errorMessageIcon=dojo.create("div",{"class":"errorMessageIcon","style":"display:none;"},this.viewsHeaderNode,"last");this._eventHandlers.push(dojo.connect(this,"onCellClick",this,this._onCellWidgetClick));this._setComparatorForColunm();},_onCellWidgetClick:function(e){if(e.cell._onClick){e.cell._onClick(e);}},_getState:function(){var _241=[];var _242=this.layout.cells;for(var i=0;i<_242.length;i++){if(_242[i].editable&&_242[i].widget){_241.push(_242[i].widget);}}var _243=dojo.map(_241,function(w){return w.get("state")||"";});return dojo.indexOf(_243,"Error")>=0||!this.SELECTION_VALID_STATE?"Error":dojo.indexOf(_243,"Incomplete")>=0?"Incomplete":"";},postMixInProperties:function(){this.inherited(arguments);var _244=this;(function(obj){if(dojo.isArray(obj)){for(var i=0;i<obj.length;i++){arguments.callee(obj[i]);}}else{if(dojo.isObject(obj)){if(obj.name){obj.name=_244.getI18NString(obj.name);}else{if(obj.cells){arguments.callee(obj.cells);}}}}})(this.structure);},setStoreData:function(_245){this.setStore(new dojo.data.ItemFileWriteStore({data:{items:_245}}));},_setStoreDataAttr:function(_246){if(!this.store){this.store=new dojo.data.ItemFileWriteStore({data:{items:dojo.fromJson(_246)}});}},_setComparatorForColunm:function(){var _247;if(this.comparatorMap!=""){_247=dojo.fromJson(this.comparatorMap);}else{_247={};}for(var i=0;i<this.structure[0].length;i++){if(this.structure[0][i].type){var cell=this.getCellByField(this.structure[0][i].field);if(cell.comparator){_247[this.structure[0][i].field]=dojo.hitch(cell,cell.comparator);}}}this.store.comparatorMap=_247;},getEditableStroeData:function(){if(this.storeDataName){var _248=this.layout.cells;var _249=this.store;var _24a=this.selectable;var _24b=[];this.store.fetch({onComplete:function(_24c,_24d){for(var m=0;m<_24c.length;m++){var _24e={};var flag=false;for(var i=0;i<_248.length;i++){if(_248[i].editable){var name=_248[i].field;var _24f=_249.getValue(_24c[m],_248[i].field);if(typeof _24f!="string"){if(_248[i].editable&&_248[i].widget&&_248[i].widget.serialize){_24f=_248[i].widget.serialize(_24f,_248[i].widget.constraints);}}_24e[name]=(_24f===null||_24f==="null"?"":_24f);flag=true;}}if(flag){_24b.push(_24e);}}}});if(_24b.length>0){return _24b;}else{return;}}else{return;}},onFormSubmit:function(){if(this.disabled){return;}if(this.storeDataName){var _250=this.layout.cells;var _251=this.store;var _252=this.storeDataName;var node=this.domNode;var _253=this.selectable;dojo.query("> input[type=hidden]",node).forEach(function(node,_254,_255){dojo.destroy(node);});if(!(this.store instanceof dojox.data.QueryReadStore)){this.store.fetch({onComplete:function(_256,_257){for(var m=0;m<_256.length;m++){for(var i=0;i<_250.length;i++){if(_251.getValue(_256[m],_250[i].field)!=null){break;}}if(i==_250.length){continue;}for(var i=0;i<_250.length;i++){if(_250[i].editable){var _258={};_258.type="hidden";_258.name=_252+"."+m+"."+_250[i].field;_258.value=_251.getValue(_256[m],_250[i].field);if(typeof _258.value!="string"){if(_250[i].editable&&_250[i].widget&&_250[i].widget.serialize){_258.value=_250[i].widget.serialize(_258.value,_250[i].widget.constraints);}}_258.value=_258.value===null?"":_258.value;dojo.create("input",_258,node,"last");}}}}});}if(this.name&&this.selectable){var _250=this.layout.cells;var name=this.name;var _251=this.store;var node=this.domNode;var _259=this.selection.getSelected();for(var m=0;m<_259.length;m++){var _25a=this.selectionMode=="single";if(_25a&&m==1){break;}var _25b=_259[m];dojo.forEach(_251.getAttributes(_25b),function(_25c){var _25d={};_25d.type="hidden";if(_25a){_25d.name=name+"."+_25c;}else{_25d.name=name+"."+m+"."+_25c;}_25d.value=_251.getValue(_25b,_25c);for(var i=0;i<_250.length;i++){if(_250[i].field==_25c){if(typeof _25d.value!="string"){if(_250[i].editable&&_250[i].widget&&_250[i].widget.serialize){_25d.value=_250[i].widget.serialize(_25d.value,_250[i].widget.constraints);}}_25d.value=_25d.value===null?"":_25d.value;dojo.create("input",_25d,node,"last");break;}}console.debug("tempObj",_25d);});}}}},_getValueAttr:function(_25e){if(this.selectable){var _25f=this.selection.getSelected();var _260=this.layout.cells;var _261=this.store;var _262=[];if(_25f.length>0){for(var m=0;m<_25f.length;m++){var _263=_25f[m];var _264={};dojo.forEach(_261.getAttributes(_263),function(_265){for(var i=0;i<_260.length;i++){if(_260[i].field==_265){_264[_265]=_261.getValue(_263,_265);if(typeof _264[_265]!="string"){if(_260[i].editable&&_260[i].widget&&(_260[i].widget instanceof com.ibm.btt.dijit.DateTextBox||_260[i].widget instanceof com.ibm.btt.dijit.NumberTextBox)&&_260[i].formatter){_264[_265]=_260[i].formatter(_264[_265]);}}break;}}});console.debug("tempObj",_264);if(this.selectionMode=="single"){return _264;}_262.push(_264);}return _262;}else{return null;}}else{if(this._cellEventRowData){return this._cellEventRowData;}else{return undefined;}}},_setVisibilityAttr:function(_266){this.visibility=_266;if(_266=="gone"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}if(this._firstTimeLoaded){this._eventHandlers.push(dojo.connect(this,"startup",dojo.hitch(this,function(){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");})));}else{dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}}else{if(_266=="hidden"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");this.update();}}this._firstTimeLoaded=false;},getValueInSelectedItem:function(_267){return this.getValueInFirstSelectedItem(_267);},getValueInFirstSelectedItem:function(_268){var _269=this.selection.getFirstSelected();if(_269){return this.store.getValue(_269,_268);}else{return null;}},getLengthOfSelectedRows:function(){return this.selection.getSelected().length;},getSelectedItem:function(){return this.attr("value");},_setWidthAttr:function(_26a){if(_26a!=""){this.width=this.handleLenUint(_26a);dojo.style(this.domNode,"width",this.width);}},_setHeightAttr:function(_26b){if(_26b!=""){this.height=this.handleLenUint(_26b);}},canSort:function(){if(this.sortEnabled&&this.disabled==false){return this.inherited(arguments);}else{return false;}},validate:function(_26c,_26d,_26e){},checkSelectionNum:function(){this.showErrorIcon("");var _26f=this.selection.getSelected().length;var msg="";console.debug("this.selectionRequired",this.selectionRequired);console.debug("selectNum",_26f);if(this.selectionRequired&&_26f<1){if(this.selectionMode==="single"){msg=this._bundle.getMessage("rangeSingleMessage");this.SELECTION_VALID_STATE=false;}else{if(this.selectionMode==="extended"){msg=this._bundle.getMessage("rangeMultiMessage");this.SELECTION_VALID_STATE=false;}}}else{this.SELECTION_VALID_STATE=true;}this.showErrorIcon(msg);this._set("state",this._getState());},showErrorIcon:function(_270){if(_270){this.errorMessageIcon.title=_270;this.errorMessageIcon.style.display="";var hint=this.get("hint");if(hint!=undefined&&hint!=null&&hint!=""){this._hint=hint;this.set("hint",_270);}}else{this.errorMessageIcon.title="";this.errorMessageIcon.style.display="none";if(this._hint){this.set("hint",this._hint);delete this._hint;}}},isValid:function(){var _271=this._getState()=="";console.debug("isValid",_271);return _271;},reset:function(){if((this.readOnly===true)||(this.disabled===true)){this.removeSelectedRows();return;}if(this.store instanceof dojo.data.ItemFileReadStore){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}this.store.revert();}},_setReadOnlyAttr:function(_272){console.debug("_setReadOnlyAttr",_272);this.readOnly=_272;},_setDisabledAttr:function(_273){console.debug("_setDisabledAttr",_273);this.disabled=_273;if(this.disabled){this._disableCache={};if(this.selectionMode!="none"){this._disableCache.selectionMode=this.selectionMode;this.selectionMode="none";this.selection.setMode(this.selectionMode);}if(this.columnReordering){this._disableCache.columnReordering=this.columnReordering;this.columnReordering=false;if(this._pending_requests){this._refresh(true);}else{setTimeout(dojo.hitch(this,function(){this._refresh(true);}),1000);}}console.log("Grid attached events : ",this._attachEvents);dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_274,arr){dojo.style(node,"overflow","hidden");});if(!dojo.query(".disabledGrid",this.id).length){var mask=dojo.create("div",{"class":"disabledGrid"},this.domNode);var _275=function(e){e.preventDefault();e.stopPropagation();};mask.onclick=_275;mask.onDblClick=_275;mask.onmouseover=_275;mask.onmousemove=_275;mask.onmouseout=_275;mask.onmouseleave=_275;mask.onmouseenter=_275;mask.onmouseup=_275;mask.onmousedown=_275;mask.onfocus=_275;mask.onkeydown=_275;mask.onkeyup=_275;mask.onkeypress=_275;mask.onblur=_275;mask.onkeypress=_275;_275=undefined;}dojo.addClass(this.domNode,"dijitDisabled");}else{if(this._disableCache&&this._disableCache.selectionMode){this.selectionMode=this._disableCache.selectionMode;this.selection.setMode(this.selectionMode);delete this._disableCache.selectionMode;}if(this._disableCache&&this._disableCache.columnReordering){this.columnReordering=this._disableCache.columnReordering;delete this._disableCache.columnReordering;this._refresh(true);}dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_276,arr){dojo.style(node,"overflow","auto");});dojo.query(".disabledGrid",this.id).forEach(function(node){dojo.destroy(node);});if(this._disableCache){delete this._disableCache;}dojo.removeClass(this.domNode,"dijitDisabled");}},focusOn:function(){if(!this.isFocusable()){console.info("can't focus on grid, because it's not focusable");return;}var _277=(this.rowCount===0);if(!_277){var _278=0;var cell=this.getCell(_278);if(cell.hidden){_278=this.focus.isNavHeader()?this.focus._colHeadFocusIdx:0;}this.focus.setFocusIndex(0,_278);}else{this.focus.focusHeader();}},canEdit:function(_279,_27a){console.debug("[this.readOnly,this.disabled]",this.readOnly,this.disabled);if((this.readOnly===true)||(this.disabled===true)){console.debug("can't edit");return false;}else{var _27b=this.inherited(arguments);console.debug("canEdit:",_27b);return _27b;}},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){vs.onBeforeRow=function(_27c,_27d){if(_27c<0){_27d[0].hidden=false;return;}var item=this.grid.getItem(_27c);if(!item){return;}var _27e=this.grid.layout.cells;for(var i=0;i<_27e.length;i++){if(this.grid.store.getValue(item,_27e[i].field)!==null){_27d[0].hidden=false;return;}}_27d[0].hidden=true;};}this.inherited(arguments);},onFetchError:function(err,req){if(err.responseText){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:err.responseText})).show();}},getWidget:function(arg){var _27f=this.layout.cells;for(var i=0;i<_27f.length;i++){if(_27f[i].id==arg){return _27f[i];}}return undefined;},destroy:function(){dojo.forEach(this._eventHandlers,dojo.disconnect);this._eventHandlers=undefined;this.inherited(arguments);if(this.store&&this.store.destroy){this.store.destroy();}},_setClassAttr:function(arg){if(this.disabled){return;}else{this.inherited(arguments);}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){}});}if(!dojo._hasResource["com.ibm.btt.dijit.Message"]){dojo._hasResource["com.ibm.btt.dijit.Message"]=true;dojo.provide("com.ibm.btt.dijit.Message");dojo.requireLocalization("com.ibm.btt.dijit","Message", null, "ROOT,zh-cn");dojo.declare("com.ibm.btt.dijit.Message",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div><div dojoAttachPoint='staticHolder'><span dojoAttachPoint='staticMessageHolder' class='dijitLabelBase'></span><span dojoAttachPoint='closeHandler' style='margin:0 0 0 5px;text-decoration:underline;cursor:pointer'></span></div><div dojoAttachPoint='dialogHolder'><span dojoAttachPoint='popupMessageHolder' class='dijitLabelBase'></span></div></div>",level:"ERROR",text:"",styleClass:"",name:"",messageArray:"",_popupDialog:null,isNotSubmitted:true,displayMode:"STATIC",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{visibility:{node:"domNode"},value:{}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Message");},postCreate:function(){this._init();this._showHideCloseHandler(false);if(this.text){this.display(this.text,this.level);}else{if(this.messageArray){try{var _280=dojo.fromJson(this.messageArray);this.displayMessageArray(_280);}catch(e){}}}},_init:function(){this.closeHandler.innerHTML=this.bundle.getMessage("closeMessage");this.styleClass={"ERROR":"errorMessage","WARN":"warnMessage","INFO":"infoMessage"};dojo.connect(this.closeHandler,"onclick",this,"closeMessage");},display:function(text,_281){if((text==="")||(text===null)||(text===undefined)){console.info("[display] Need text message for displaying");this._showHideCloseHandler(false);return;}var _282=this._getMessageValue.apply(this,arguments);this.staticMessageHolder.innerHTML=_282;if(_281===undefined){_281=this.level;}this._switchModeAndStyles("STATIC",_281);this._showHideCloseHandler(true);},displayMessageArray:function(_283){if(_283.length>0){var _284=[];for(var i=0;i<_283.length;i++){_284.push((i+1)+" ");_284.push(this._getMessageValue(_283[i]));if(i!=_283.length-1){_284.push("<br>");}}var _285=_284.join("");if(this.displayMode==="STATIC"){this.display(_285);}else{this.displayPopup(_285);}}},_showHideCloseHandler:function(flag){if(flag){dojo.style(this.closeHandler,{"display":""});}else{dojo.style(this.closeHandler,{"display":"none"});}},displayPopup:function(text,_286){if((text==="")||(text===null)||(text===undefined)){console.info("[displayPopup] Need text message for displaying");return;}var _287=this._getMessageValue.apply(this,arguments);this.popupMessageHolder.innerHTML=_287;if(_286===undefined){_286=this.level;}this._switchModeAndStyles("POPUP",_286);if(this._popupDialog===null){var _288=this.id+"messagePopup";this._popupDialog=new dijit.Dialog({id:_288,title:this.bundle.getMessage("popupTitle")},this.dialogHolder);}this._popupDialog.show();},closeMessage:function(){if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":"none"});}else{if(this._popupDialog!==null){this._popupDialog.hide();}else{console.error("[Should have a popup dialog]");}}},_setTextWrapAttr:function(_289){this.textWrap=_289;this._setTextLabelStyle();},_setWidthAttr:function(_28a){if(_28a!=""&&_28a!=null){this.width=_28a;dojo.style(this.staticMessageHolder,"width",this.handleLenUint(this.width));dojo.style(this.popupMessageHolder,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_28b){if(_28b!=""&&_28b!=null){this.height=_28b;dojo.style(this.staticMessageHolder,"height",this.handleLenUint(this.height));dojo.style(this.popupMessageHolder,"height",this.handleLenUint(this.height));}},_switchModeAndStyles:function(mode,_28c){this.displayMode=mode;if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":""});dojo.style(this.dialogHolder,{"display":"none"});if(this._popupDialog!==null){this._popupDialog.hide();}dojo.removeClass(this.staticMessageHolder);dojo.addClass(this.staticMessageHolder,this.styleClass[_28c]);}else{dojo.style(this.dialogHolder,{"display":""});dojo.style(this.staticHolder,{"display":"none"});dojo.removeClass(this.popupMessageHolder);dojo.addClass(this.popupMessageHolder,this.styleClass[_28c]);}this._setTextLabelStyle();},_setTextLabelStyle:function(){dojo.addClass(this.popupMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.popupMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.popupMessageHolder,"dijitLabelWrap");}dojo.addClass(this.staticMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.staticMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.staticMessageHolder,"dijitLabelWrap");}},_getMessageValue:function(text,_28d){var _28e="";if(arguments.length===1){_28e=this.getI18NString(text);}else{if(arguments.length===2){_28e=this.getI18NString(text);}else{if(arguments.length>2){var _28f=[];for(var i=2;i<arguments.length;i++){_28f.push(arguments[i]);}console.debug("display,dynamic attributes values",_28f);_28e=this.getI18NString(text,_28f,true);}}}return _28e;},_setValueAttr:function(_290){this.text=_290;},destroy:function(){this.inherited(arguments);if(this._popupDialog!==null){this._popupDialog.destroyRecursive();}}});}if(!dojo._hasResource["dojox.uuid.generateRandomUuid"]){dojo._hasResource["dojox.uuid.generateRandomUuid"]=true;dojo.provide("dojox.uuid.generateRandomUuid");dojox.uuid.generateRandomUuid=function(){var _291=16;function _292(){var _293=Math.floor((Math.random()%1)*Math.pow(2,32));var _294=_293.toString(_291);while(_294.length<8){_294="0"+_294;}return _294;};var _295="-";var _296="4";var _297="8";var a=_292();var b=_292();b=b.substring(0,4)+_295+_296+b.substring(5,8);var c=_292();c=_297+c.substring(1,4)+_295+c.substring(4,8);var d=_292();var _298=a+_295+b+_295+c+d;_298=_298.toLowerCase();return _298;};}if(!dojo._hasResource["com.ibm.btt.dijit.FileUpload"]){dojo._hasResource["com.ibm.btt.dijit.FileUpload"]=true;dojo.provide("com.ibm.btt.dijit.FileUpload");dojo.declare("com.ibm.btt.dijit.FileUpload",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/FileUpload.html","<div dojoAttachPoint=\"fileuploader\" class = \"fileupload_pane\">\r\n<!--\r\n/* \r\n *------------------------------------------------------------------- \r\n * Licensed Materials - Property of IBM\r\n * Restricted Materials of IBM\r\n * 5724-H82\r\n * (C) Copyright IBM Corp.2010 All Rights Reserved.\r\n * US Government Users Restricted Rights - Use, duplication or disclosure\r\n * restricted by GSA ADP Schedule Contract with IBM Corp\r\n -------------------------------------------------------------------\r\n */\r\n-->\r\n\t<span dojoAttachPoint=\"inputBox\"></span>\r\n\t<span dojoAttachPoint=\"browseBtn\"></span>\r\n\t<div dojoAttachPoint=\"uploadBtn\"></div>\r\n\t<span dojoAttachPoint=\"statusMessage\" class=\"loadingMsg\"></span>\r\n\t<div dojoAttachPoint=\"clearBtn\"></div>\r\n\t<span dojoAttachPoint=\"errorMessage\" class=\"errorMsg\"></span>\r\n</div>\r\n\r\n\r\n"),state:"Incomplete",required:false,disabled:false,_visibilityHolder:[],_isDisabled_uploadButton:false,tabIndex:"-1",width:"",_browse_width:null,inputText:null,f0:null,uploadButton:null,cancelButton:null,_state:"none",value:"",currentFileInfo:null,fileExtension:"",uploadUrl:"",storeDataName:"",bttParams:"",_bttParamJSON:null,_accessByKey:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","FileUpload"),postCreate:function(){this._bttParamJSON=dojo.fromJson(this.bttParams);this.createInsideWidgets();this.renderItems();this.connectEvents();this.onShow();this._tabSupport(false);this.inherited(arguments);},createInsideWidgets:function(){this.inputText=new dijit.form.TextBox({},this.inputBox);dojo.addClass(this.inputText.domNode,"inputBox");this.setReadOnly(this.inputText,true);this.inputText.reset=null;this.uploadButton=new dijit.form.Button({label:this._bundle.getMessage("UPLOAD_BUTTON_LABEL")},this.uploadBtn);this.cancelButton=new dijit.form.Button({label:this._bundle.getMessage("CANCEL_BUTTON_LABEL")},this.clearBtn);this.browseBtn.innerHTML=this._bundle.getMessage("BROWSE_BUTTON_LABEL");var _299=this._buildParameter();var _29a;if(dojo.isIE){dojo.addClass(this.uploadButton.domNode,"commonButton");dojo.addClass(this.cancelButton.domNode,"commonButton");}this.f0=new com.ibm.btt.dijit.FileUploader(dojo.mixin({force:"html",uploadUrl:this.uploadUrl+_299,showProgress:false,selectMultipleFiles:false,uploadOnChange:false,tabIndex:-1},_29a),this.browseBtn);dojo.style(this.f0.insideNode,{"width":"0px"});this._calculateWidth();},_buildParameter:function(){var _29b="?dataName="+this.storeDataName;if(this._bttParamJSON.dse_processorId){_29b+="&processId="+this._bttParamJSON.dse_processorId;}if(this._bttParamJSON.dse_sessionId){_29b+="&sessionId="+this._bttParamJSON.dse_sessionId;}return _29b;},_calculateWidth:function(){var _29c=dojo.style(this.inputText.domNode,"width");var _29d=dojo.style(this.uploadButton.domNode,"width");var _29e=dojo.style(this.f0.domNode,"width");var _29f=dojo.style(this.cancelButton.domNode,"width");var _2a0=35;var _2a1=_29d+_29e+_29f+_2a0;var _2a2=_29c+_2a1;if(this.width){var _2a3=this.width.substr(0,this.width.lastIndexOf("px"));if(_2a3&&_2a3>_2a2){if(this.width&&_2a3>_2a2){dojo.style(this.fileuploader,"width",this.width);dojo.style(this.inputText.domNode,"width",(_2a3-_2a1)+"px");}else{dojo.style(this.fileuploader,"width",_2a2+"px");}}}this._browse_width=dojo.style(this.f0.domNode,"width");},_tabSupport:function(_2a4){if(_2a4){}else{this.inputText.set("tabIndex","-1");this.f0.domNode.setAttribute("tabIndex","-1");this.f0.domNode.setAttribute("wairole","presentation");this.f0.domNode.setAttribute("role","presentation");this.f0.insideNode.setAttribute("wairole","presentation");this.f0.insideNode.setAttribute("role","presentation");this.f0._fileInput.setAttribute("tabIndex","0");}},renderItems:function(){console.debug("this.value",this.value);if(this.value){this._state="done";this._set("state","");try{this.currentFileInfo=dojo.fromJson(this.value);}catch(e){console.debug("error occurs",e);this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.value="";}}else{this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}}this._initRenderItems();this._initUIProperties();},_initRenderItems:function(){this.inputText.set("value","");this._clearMessage();if(this._state=="done"){console.debug("this.currentFileInfo",this.currentFileInfo);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width","0px");this.setVisibility(this.inputText.domNode,false,true);this.setVisibility(this.uploadButton.domNode,false,true);this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML=this.currentFileInfo.name;}else{dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.inputText.domNode,true);this.setVisibility(this.uploadButton.domNode,false,false);this.setVisibility(this.cancelButton.domNode,false,false);}},_initUIProperties:function(){this._visibilityHolder=[];if(this.visibility=="hidden"||this.visibility=="gone"){if(this._state=="none"){this._visibilityHolder.push({dijit:this.inputText.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});this.setVisibility(this.inputText.domNode,false,false);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}else{this._visibilityHolder.push({dijit:this.cancelButton.domNode,visibility:"visible"});this.setVisibility(this.cancelButton.domNode,false,true);this._visibilityHolder.push({dijit:this.statusMessage,visibility:"visible"});dojo.style(this.statusMessage,"visibility","hidden");}}},_clearMessage:function(){this.statusMessage.innerHTML="";this.errorMessage.innerHTML="";dojo.style(this.errorMessage,"display","none");this._showErrorInputBox(false);},connectEvents:function(){dojo.connect(this.f0,"onChange",this,this._handleSelect);dojo.connect(this.uploadButton,"onClick",this,this._handleUpload);dojo.connect(this.f0,"onComplete",this,function(_2a5){var _2a6=_2a5[0];console.debug("response",_2a6);var _2a7=_2a6.name;var _2a8=_2a6.errorCode;if(_2a7=="TypeError"||_2a8){this.handleError(_2a8);}else{this.handleSuccess(_2a6);}});dojo.connect(this.f0,"onCancel",this,function(){if(this.required){if(this._state=="none"&&(!this.f0._fileInput.value)){this._showErrorInputBox(true);this.displayMessage(this._bundle.getMessage("UPLOAD_REQUIRED"));}}});dojo.connect(this.f0,"onError",this,function(){console.debug("onError",this._state);if(this._state=="canceling"){}else{this.handleError();}});dojo.connect(this.cancelButton,"onClick",this,function(){this.reset();});},_handleSelect:function(data){this.setVisibility(this.cancelButton.domNode,true);this.setVisibility(this.uploadButton.domNode,true);this._clearMessage();var _2a9=data[0];this.inputText.set("value",_2a9.name);var mask=_2a9.name.substr(_2a9.name.lastIndexOf(".")+1).toLowerCase();if(this.fileExtension!=""&&this.fileExtension.indexOf(mask)==-1){this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.displayMessage(this._bundle.getMessage("UPLOAD_ERRORFILEMASK",{value:this.fileExtension}));this._showErrorInputBox(true);this._state="error";this._set("state","Error");this.validate();}else{this.setDisabled(this.uploadButton,false);this._isDisabled_uploadButton=false;this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.validate();}},_handleUpload:function(){this._state="uploading";this._set("state","Incomplete");this.setVisibility(this.uploadButton.domNode,false,true);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.domNode,"width","0px");dojo.fadeOut({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML="";var _2aa=document.createElement("img");var _2ab=dojo.moduleUrl("com.ibm.btt.dijit","images/loading.gif");_2aa.setAttribute("src",_2ab.path);this.statusMessage.appendChild(_2aa);var _2ac=document.createElement("span");_2ac.innerHTML="  "+this._bundle.getMessage("UPLOAD_UPLOADING");this.statusMessage.appendChild(_2ac);console.debug("before f0.upload");var uuid=this.getUUID();this.f0.fileUploadUUID=uuid;this.f0.upload();console.debug("after f0.upload");setTimeout(dojo.hitch(this,this._queryFileSizeFromServer),3000);this.onUpload();},getUUID:function(){return dojox.uuid.generateRandomUuid();},_queryFileSizeFromServer:function(){if(this._state=="uploading"&&this.f0.fileUploadUUID){var _2ad={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=querySize",handleAs:"json",load:dojo.hitch(this,function(data){if(data&&this._state=="uploading"){if(data.errorCode=="7"){this.f0.cancel();}}}),error:dojo.hitch(this,function(_2ae){if(this._state=="uploading"){this.reset();}})};dojo.xhrGet(_2ad);}},_clearFizeSizePendingOnServer:function(){if(this.f0.fileUploadUUID){var _2af={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=cancelPending",handleAs:"json",load:dojo.hitch(this,function(data){console.debug("Cancel the file uploading pending on server successfully");}),error:dojo.hitch(this,function(_2b0){console.debug("Error when canceling the file uploading pending on server");})};dojo.xhrGet(_2af);}},reset:function(){if(this._state=="done"){this._handleDelete();}else{this._handleCancel();}},_handleCancel:function(){if(this._state=="none"||this._state=="error"){this._resetUIforCancel();this.onCancel();}else{if(this._state=="uploading"){this._state="canceling";this._set("state","Incomplete");this.f0.cancel();this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();var _2b1=function(_2b2,args){this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();};var _2b3=function(_2b4,args){this.displayMessage(this._bundle.getMessage("CANCEL_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._clearFizeSizePendingOnServer();this._deleteFile(_2b1,_2b3);}}},_resetUIforCancel:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.f0._clearUserSelection();this._initRenderItems();},_handleDelete:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();var _2b5=function(_2b6,args){console.debug("sucess delete");this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();this.onDelete();};var _2b7=function(_2b8,args){console.debug("error delete");this.displayMessage(this._bundle.getMessage("DELETE_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._deleteFile(_2b5,_2b7);},handleError:function(_2b9){this._state="error";this._set("state","Error");this.statusMessage.innerHTML="";this.setVisibility(this.inputText.domNode,true);this._showErrorInputBox(true);dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.uploadButton.domNode,true);this.setDisabled(this.f0,false);this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.setVisibility(this.cancelButton.domNode,true);if(_2b9=="7"){this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE_FILESIZE"));}else{this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE"));}this._clearFizeSizePendingOnServer();this.onError();},handleSuccess:function(_2ba){this._state="done";this._set("state","");this.statusMessage.innerHTML=_2ba.name;this.value=_2ba.name;this.currentFileInfo=_2ba;console.debug("currentFileInfo",this.currentFileInfo);this.setVisibility(this.inputText.domNode,false,true);this.onComplete();},_showErrorInputBox:function(_2bb){if(_2bb){dojo.removeClass(this.inputText.domNode,"inputBox");dojo.addClass(this.inputText.domNode,"errInputBox");}else{dojo.removeClass(this.inputText.domNode,"errInputBox");dojo.addClass(this.inputText.domNode,"inputBox");}},_deleteFile:function(_2bc,_2bd){if(this._bttParamJSON&&this.currentFileInfo){console.debug("currentFileInfo",this.currentFileInfo);var _2be=this._buildParameter();_2be+="&fileId="+this.currentFileInfo.fileId;dojo.xhrDelete({url:this.uploadUrl+_2be,preventCache:true,error:dojo.hitch(this,function(_2bf,args){dojo.hitch(this,_2bd)(_2bf,args);}),load:dojo.hitch(this,function(_2c0,args){if(_2c0.errorCode){dojo.hitch(this,_2bd)(_2c0,args);}else{this.currentFileInfo=null;dojo.hitch(this,_2bc)(_2c0,args);}})});}},onUpload:function(){this.validate();},onComplete:function(){this.validate();},onCancel:function(){this.validate();},onError:function(){this.validate();},onDelete:function(){this.validate();},validate:function(){},getFileInfo:function(){return this.currentFileInfo;},reload:function(){this.value="";this.currentFileInfo=null;this._resetUIforCancel();},_setVisibilityAttr:function(_2c1){this.visibility=_2c1;if(_2c1=="gone"){this._allDisappear();dojo.style(this.domNode,"visibility","hidden");dojo.style(this.domNode,"display","none");}else{if(_2c1=="hidden"){this._allDisappear();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{this._allShowUp();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_allShowUp:function(){dojo.forEach(this._visibilityHolder,function(v){dojo.style(v.dijit,"visibility",v.visibility);});this._visibilityHolder=[];},_holdVisibilityFeatures:function(_2c2){this._visibilityHolder.push({dijit:_2c2,visibility:"visible"});},_allDisappear:function(){if(this.inputText){if(this.isVisible(this.inputText.domNode)){this._holdVisibilityFeatures(this.inputText.domNode);}dojo.style(this.inputText.domNode,"visibility","hidden");}if(this.f0){if(this.isVisible(this.f0.domNode)){this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});}dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}if(this.uploadButton){if(this.isVisible(this.uploadButton.domNode)){this._holdVisibilityFeatures(this.uploadButton.domNode);}dojo.style(this.uploadButton.domNode,"visibility","hidden");}if(this.cancelButton){if(this.isVisible(this.cancelButton.domNode)){this._holdVisibilityFeatures(this.cancelButton.domNode);}dojo.style(this.cancelButton.domNode,"visibility","hidden");}},displayMessage:function(_2c3){dojo.style(this.errorMessage,"display","");if(_2c3){this.errorMessage.innerHTML=_2c3;}},setVisibility:function(_2c4,_2c5,_2c6){if(_2c5){dojo.style(_2c4,"visibility","visible");dojo.style(_2c4,"display","");}else{dojo.style(_2c4,"visibility","hidden");if(_2c6){dojo.style(_2c4,"display","none");}}},isVisible:function(_2c7){var _2c8=dojo.style(_2c7,"visibility");if(_2c8=="visible"){return true;}else{if(_2c8=="inherit"&&dojo.style(this.domNode,"visibility")=="visible"){return true;}else{return false;}}},setDisabled:function(_2c9,_2ca){if(_2c9){_2c9.set("disabled",_2ca);}},setReadOnly:function(_2cb,_2cc){if(_2cb){_2cb.set("readOnly",_2cc);}},onFormSubmit:function(){if(dojo.isIE){this.f0._formNode.innerHTML="";}},_setDisabledAttr:function(_2cd){this.disabled=_2cd;this.inherited(arguments);this.setDisabled(this.f0,_2cd);if(!_2cd){this.setDisabled(this.uploadButton,this._isDisabled_uploadButton);}else{this.setDisabled(this.uploadButton,_2cd);}this.setDisabled(this.cancelButton,_2cd);}});dojo.declare("com.ibm.btt.dijit.FileUploader",[dojox.form.FileUploader],{dfd:null,trueFocus:false,isShowDialog:false,fileUploadUUID:"",cancel:function(){if(this.dfd){this.dfd.cancel();if(dojo.isIE){dojo.io.iframe._frame.contentWindow.document.location.replace("about:blank");}else{dojo.io.iframe._frame.contentWindow.stop();}}},uploadHTML:function(){if(this.selectMultipleFiles){dojo.destroy(this._fileInput);}this._setHtmlPostData();if(this.showProgress){this._animateProgress();}if(this.dfd){dojo.destroy(this.dfd);}this.dfd=dojo.io.iframe.send({url:this.fileUploadUUID?(this.uploadUrl+"&uuid="+this.fileUploadUUID):this.uploadUrl,form:this._formNode,handleAs:"json",error:dojo.hitch(this,function(err){console.debug("error",err.message);this._error("HTML Upload Error:"+err.message);}),load:dojo.hitch(this,function(data,_2ce,_2cf){this._complete(data);})});console.debug("dfd",this.dfd);},_clearUserSelection:function(){this.fileInputs=[];if(dojo.isIE){if(this._fileInput){this._disconnect();this._formNode.removeChild(this._fileInput);}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var nm=this.htmlFieldName;var _2d0=this.id;if(this.selectMultipleFiles){nm+=this.fileCount;_2d0+=this.fileCount;this.fileCount++;}dojo.attr(this._fileInput,{id:this.id,name:nm,type:"file",onKeyPress:function(){return !(window.event&&window.event.keyCode==13);}()});dojo.addClass(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);var real=dojo.marginBox(this._fileInput);dojo.style(this._fileInput,{position:"relative",left:(this.fhtml.nr.w-real.w)+"px",opacity:0});this._connectInput();}else{this._fileInput.value="";}},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:"insideNode"}),onFocusOnInputText:function(){},_connectInput:function(){this._disconnect();this._cons.push(dojo.connect(this._fileInput,"mouseover",this,function(evt){dojo.addClass(this.domNode,this.hoverClass);this.onMouseOver(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseout",this,function(evt){setTimeout(dojo.hitch(this,function(){dojo.removeClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseOut(evt);this._checkHtmlCancel("off");}),0);}));this._cons.push(dojo.connect(this._fileInput,"mousedown",this,function(evt){dojo.addClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseDown(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseup",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);this.onMouseUp(evt);this.onClick(evt);this._checkHtmlCancel("up");}));this._cons.push(dojo.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}]);}));if(this.tabIndex>=0){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this._cons.push(dojo.connect(this._fileInput,"focus",this,function(){if(!dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}else{this.trueFocus=true;}if(this.dialogIsOpen){if(dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}this.onCancel();}this.dialogIsOpen=false;}));if(dojo.isIE){this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.keyCode==dojo.keys.TAB&&this.trueFocus){dojo.addClass(this.domNode,this.activeClass);}else{if(evt.charCode==dojo.keys.SPACE&&this.trueFocus){this.dialogIsOpen=true;}else{if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);}}}}));}else{this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.charCode==dojo.keys.SPACE){this.dialogIsOpen=true;}}));}this._cons.push(dojo.connect(this._fileInput,"blur",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);if(dojo.isIE){this.trueFocus=false;}}));},applyAccessKey:function(){if(this.f0._fileInput&&this.accessKey){this.f0._fileInput.setAttribute("accessKey",this.accessKey);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Group"]){dojo._hasResource["com.ibm.btt.dijit.Group"]=true;dojo.provide("com.ibm.btt.dijit.Group");dojo.declare("com.ibm.btt.dijit.Group",[dijit._Widget,dijit._Templated,dijit._Container,dijit.layout._ContentPaneResizeMixin,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",parseOnLoad:true,isContainer:true,width:"",height:"",templateString:"<fieldset dojoAttachPoint='domNode' class='dijitGroupBase'><legend dojoAttachPoint='textNode'></legend><div dojoAttachPoint='containerNode'></div></fieldset>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"textNode"},width:{node:"containerNode"},height:{node:"containerNode"}}),_setTextAttr:function(_2d1){this.text=_2d1;this.textNode.innerHTML=StringUtil.escapeHTML(this.getI18NString(_2d1));},_setWidthAttr:function(_2d2){if(_2d2!=""){this.width=_2d2;dojo.style(this.domNode,"width",this.handleLenUint(this.width));dojo.style(this.domNode,"overflow","hidden");}},_setHeightAttr:function(_2d3){if(_2d3!=""){this.height=_2d3;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]){dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]=true;dojo.provide("com.ibm.btt.dijit.TabbedPane");dojo.declare("com.ibm.btt.dijit.TabbedPane",[dijit.layout.TabContainer,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"800",height:"600",constructor:function(){this._disableWatch={};},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"com.ibm.btt.dijit.ScrollingTabController":"com.ibm.btt.dijit.TabController";},startup:function(){this.inherited(arguments);this.set("visibility",this.visibility);var _2d4=this.getChildren();dojo.forEach(_2d4,function(_2d5){this._disableWatch[_2d5.id]=_2d5.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_2d5));},this);this._setInitialTabSelection();},_setVisibilityAttr:function(_2d6){this.inherited(arguments);if(typeof (this.tablist)!=="undefined"){if(_2d6=="gone"){dojo.style(this.tablist.domNode,"visibility","visible");}else{if(_2d6=="hidden"){dojo.style(this.tablist.domNode,"visibility","hidden");}else{dojo.style(this.tablist.domNode,"visibility","visible");}}}},closeChildByIndex:function(i){var _2d7=this.getChildren();this.closeChild(_2d7[i]);},closeChildById:function(id){var _2d8=this.getChildren();for(var i=0;i<_2d8.length;i++){if(id===_2d8[i].id){this.closeChild(_2d8[i]);}}},selectChildByIndex:function(i){var _2d9=this.getChildren();this.selectChild(_2d9[i]);},selectChildById:function(id){var _2da=this.getChildren();for(var i=0;i<_2da.length;i++){if(id===_2da[i].id){this.selectChild(_2da[i]);break;}}},closeChild:function(_2db){if(_2db.get("disabled")!=true){this.inherited(arguments);}},selectChild:function(_2dc){if(_2dc.get("disabled")!=true){this.inherited(arguments);}},hideTabByIndex:function(_2dd){var _2de=this.getChildren();if(_2dd>-1&&_2dd<_2de.length){var _2df=this._getCurrentVisibleTabs();if(_2df.length>1){var _2e0=_2de[_2dd];var _2e1=this.tablist.pane2button[_2e0.id];dojo.style(_2e1.domNode,"display","none");_2e1._displayMark="hidden";if(_2e0.selected){var i;for(i=0;i<_2df.length;i++){if(_2df[i].id==_2e0.id){break;}}if(i+1<_2df.length){this.selectChildById(_2df[i+1].id);}else{this.selectChildById(_2df[i-1].id);}}}}},showTabByIndex:function(_2e2){var _2e3=this.getChildren();if(_2e2>-1&&_2e2<_2e3.length){var _2e4=this.getChildren()[_2e2];this.showTabById(_2e4.id);}},hideTabById:function(id){var _2e5=this.getChildren();for(var i=0;i<_2e5.length;i++){if(id===_2e5[i].id){this.hideTabByIndex(i);break;}}},showTabById:function(id){var _2e6=this.tablist.pane2button[id];dojo.style(_2e6.domNode,"display","");_2e6._displayMark="visible";},removeChild:function(_2e7){this.inherited(arguments);this._disableWatch[_2e7.id].unwatch();delete this._disableWatch[_2e7.id];},addChild:function(_2e8,_2e9){this.inherited(arguments);this._disableWatch[_2e8.id]=_2e8.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_2e8));},_checkDisabedPane:function(_2ea,name,_2eb,_2ec){if(_2ec==true){var _2ed=this.tablist.pane2button[_2ea.id];_2ed.set("disabled",true);}else{var _2ed=this.tablist.pane2button[_2ea.id];_2ed.set("disabled",false);}this._setTabSelection();},_setInitialTabSelection:function(){var _2ee=this._getCurrentVisibleTabs();var _2ef=0;for(var i=0;i<_2ee.length;i++){if(_2ee[i].get("disbaled")==true){_2ef++;}}if(_2ee.length>0&&_2ef==_2ee.length){_2ee[0].disable=false;this.selectChildByIndex(0);_2ee[0].disable=true;}else{this._setTabSelection();}},_setTabSelection:function(){var _2f0=this._getCurrentVisibleTabs();var _2f1=-1;for(var i=0;i<_2f0.length;i++){if(_2f0[i].selected){_2f1=i;}}if(_2f1>-1&&_2f0[_2f1].get("disabled")==true){for(var m=_2f1+1;m<_2f0.length;m++){if(_2f0[m].get("disabled")==false){this.selectChildById(_2f0[m].id);return;}}for(var m=_2f1-1;m>=0;m--){if(_2f0[m].get("disabled")==false){this.selectChildById(_2f0[m].id);return;}}}},_getCurrentVisibleTabs:function(){var _2f2=this.getChildren();var _2f3=[];for(var i=0;i<_2f2.length;i++){var _2f4=this.tablist.pane2button[_2f2[i].id];if(!_2f4._displayMark||_2f4._displayMark=="visible"){_2f3.push(_2f2[i]);}}return _2f3;},_setWidthAttr:function(_2f5){if(_2f5!=""){this.width=_2f5;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2f6){if(_2f6!=""){this.height=_2f6;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});dojo.declare("com.ibm.btt.dijit.ScrollingTabController",[dijit.layout.ScrollingTabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});dojo.declare("com.ibm.btt.dijit.TabController",[dijit.layout.TabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});}if(!dojo._hasResource["com.ibm.btt.dijit.ContentPane"]){dojo._hasResource["com.ibm.btt.dijit.ContentPane"]=true;dojo.provide("com.ibm.btt.dijit.ContentPane");dojo.declare("com.ibm.btt.dijit.ContentPane",[dijit.layout.ContentPane,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin],{disabled:false,_setDisabledAttr:function(_2f7){this._set("disabled",_2f7);},_setTitleAttr:function(_2f8){this.titleKey=_2f8;var _2f9=this.getI18NString(_2f8);this._set("title",_2f9);},_getTitleAttr:function(){return this.titleKey;}});}if(!dojo._hasResource["com.ibm.btt.dijit.Hidden"]){dojo._hasResource["com.ibm.btt.dijit.Hidden"]=true;dojo.provide("com.ibm.btt.dijit.Hidden");dojo.declare("com.ibm.btt.dijit.Hidden",[dijit._Widget,dijit._Templated],{value:"",name:"",state:"",type:"hidden",templateString:"<input type='${type}'/>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:{node:"domNode"},name:{node:"domNode"}}),_setValueAttr:function(_2fa){this.value=_2fa;this.domNode.value=_2fa;}});}if(!dojo._hasResource["com.ibm.btt.event.BaseMonitor"]){dojo._hasResource["com.ibm.btt.event.BaseMonitor"]=true;dojo.provide("com.ibm.btt.event.BaseMonitor");dojo.declare("com.ibm.btt.event.BaseMonitor",null,{oldEvent:null,monitorEvent:function(_2fb,rule){},monitorStartRule:function(_2fc,rule){},monitorEndRule:function(_2fd,rule){},monitorCondition:function(_2fe,rule,_2ff){},monitorStartAG:function(rule){},monitorEndAG:function(rule){},monitorAGCondition:function(rule,_300){},monitorCallFunctionAction:function(id,_301,_302){},monitorGetPropertyAction:function(id,_303,_304){},monitorSetPropertyAction:function(id,_305,_306){}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridComparer"]){dojo._hasResource["com.ibm.btt.dijit.GridComparer"]=true;dojo.provide("com.ibm.btt.dijit.GridComparer");dojo.declare("com.ibm.btt.dijit.GridComparer",null,{compareNumber:function(_307){var cons={};if(_307["pattern"]){cons["pattern"]=_307["pattern"];}return function(str1,str2){var num1=dojo.number.parse(str1,cons);if(isNaN(num1)){num1=Number(str1);}var num2=dojo.number.parse(str2,cons);if(isNaN(num2)){num2=Number(str1);}if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareCurrency:function(_308){return function(str1,str2){var num1=parseFloat(str1);var num2=parseFloat(str2);if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareString:function(_309){return function(str1,str2){if(str1>str2){return 1;}else{if(str1<str2){return -1;}else{return 0;}}};},compareDate:function(_30a){return function(str1,str2){var _30b="yyyy-MM-dd";if(_30a){var _30c=_30a["pattern"];if(_30c){_30b=_30c;}}var _30d={selector:"date",datePattern:_30b,fullYear:true};var _30e=dojo.date.locale.parse(str1,_30d);var _30f=dojo.date.locale.parse(str2,_30d);var _310=_30e?_30e:str1;var _311=_30f?_30f:str2;return dojo.date.compare(_310,_311);};}});(function(){if(com.ibm.btt.dijit.GridComparer.instance==undefined){com.ibm.btt.dijit.GridComparer.instance=new com.ibm.btt.dijit.GridComparer();}})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetSizeMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetSizeMixin",null,{width:"",height:"",_setWidthAttr:function(_312){if(_312!=""){this.width=_312;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_313){if(_313!=""){this.height=_313;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},handleLenUint:function(_314){var _315=function(src,_316){var reg=new RegExp(_316+"$");return reg.test(src);};if(_315(_314,"px")||_315(_314,"%")||_315(_314,"em")){return _314;}else{return _314+"px";}}});}if(!dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]){dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]=true;dojo.provide("com.ibm.btt.event.ConsoleMonitor");dojo.declare("com.ibm.btt.event.ConsoleMonitor",com.ibm.btt.event.BaseMonitor,{monitorStartRule:function(_317,rule){console.debug("Start Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_317.id+"."+_317.e);},monitorEndRule:function(_318,rule){console.debug("End Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_318.id+"."+_318.e);},monitorCondition:function(_319,rule,_31a){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_31a);},monitorStartAG:function(rule){console.debug("Start Action Group : "+rule.name,rule);},monitorEndAG:function(rule){console.debug("End Action Group : "+rule.name,rule);},monitorAGCondition:function(rule,_31b){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_31b);},monitorCallFunctionAction:function(id,_31c,args,_31d){if(typeof (_31d)!="undefined"&&_31d!=null){console.debug("    CallFunction Action : ",id+"."+_31c," , args=",args,", result=",_31d);}else{console.debug("    CallFunction Action : ",id+"."+_31c," , args=",args);}},monitorGetPropertyAction:function(id,_31e,_31f){console.debug("    GetProperty Action : ",id+"."+_31e+"=="+_31f);},monitorSetPropertyAction:function(id,_320,_321){console.debug("    SetProperty Action : ",id+"."+_320+"="+_321);}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]){dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]=true;dojo.provide("com.ibm.btt.util.GlobalFunctions");(function(){function _322(obj){return typeof (obj)=="undefined"||obj==null?true:false;};function _323(obj){if((obj.constructor===Number&&!isFinite(obj)&&!isNaN(obj))||/^[-+]?\d+$|^[-+]?\d+\.\d+$/.test(obj)){return true;}else{return false;}};function _324(obj){if(obj.constructor===Number){return obj;}else{return Number(obj);}};function _325(obj){if(obj.constructor===Date){return true;}else{return false;}};var _326={getI18NString:function(arg){return I18nUtil.getI18nString(arg);},length:function(str){return _322(str)?undefined:str.toString().length;},subString:function(str,_327,end){if(!_322(str)&&_323(_327)&&_323(end)){_327=_324(_327);end=_324(end);if(_327>end||_327<0||end>str.toString().length){return undefined;}else{return str.toString().substring(_327,end);}}else{return undefined;}},indexOf:function(str,_328){return _322(str)||_322(_328)?undefined:str.toString().indexOf(_328.toString());},lastIndexOf:function(str,_329){return _322(str)||_322(_329)?undefined:str.toString().lastIndexOf(_329.toString());},contains:function(str,str2){if(_322(str)||_322(str2)){return false;}else{return this.indexOf(str.toString(),str2.toString())>-1?true:false;}},replace:function(_32a,str1,str2){return !_322(_32a)&&!_322(str1)&&!_322(str1)?_32a.toString().replace(new RegExp(str1.toString(),"g"),str2.toString()):_32a;},trim:function(str){return _322(str)?undefined:str.toString().replace(/^(\s|\u00A0)+/,"").replace(/(\s|\u00A0)+$/,"");},concat:function(str1,str2){if(_322(str1)&&_322(str2)){return undefined;}else{if(_322(str1)){return str2.toString();}else{if(_322(str2)){return str1.toString();}else{return str1.toString().concat(str2.toString());}}}},upperCase:function(str){return _322(str)?undefined:str.toString().toUpperCase();},lowerCase:function(str){return _322(str)?undefined:str.toString().toLowerCase();},compare:function(str1,str2){if(_322(str1)||_322(str2)){return undefined;}if(str1.toString()>str2.toString()){return 1;}else{if(str1.toString()<str2.toString()){return -1;}else{return 0;}}},compareIgnoreCase:function(str1,str2){return _322(str1)||_322(str2)?undefined:str1.toString().toUpperCase().localeCompare(str2.toString().toUpperCase());}};var _32b={today:function(){return new Date();},after:function(date,days,_32c,_32d){if(_322(date)||!_325(date)){return undefined;}if(!_322(days)&&_323(days)){date.setDate(date.getDate()+_324(days));}if(!_322(_32c)&&_323(_32c)){date.setMonth(date.getMonth()+_324(_32c));}if(!_322(_32d)&&_323(_32d)){date.setFullYear(date.getFullYear()+_324(_32d));}return date;},before:function(date,days,_32e,_32f){if(_322(date)||!_325(date)){return undefined;}if(!_322(days)&&_323(days)){date.setDate(date.getDate()-_324(days));}if(!_322(_32e)&&_323(_32e)){date.setMonth(date.getMonth()-_324(_32e));}if(!_322(_32f)&&_323(_32f)){date.setFullYear(date.getFullYear()-_324(_32f));}return date;},daysBetween:function(_330,_331){if(_322(_330)||_322(_331)||!_325(_330)||!_325(_331)){return undefined;}var _332=Date.UTC(_330.getFullYear(),_330.getMonth(),_330.getDate(),_330.getHours(),_330.getMinutes(),_330.getSeconds(),_330.getMilliseconds())-Date.UTC(_331.getFullYear(),_331.getMonth(),_331.getDate(),_331.getHours(),_331.getMinutes(),_331.getSeconds(),_331.getMilliseconds());return _332/(1000*60*60*24);},naturalDaysBetween:function(_333,_334){if(_322(_333)||_322(_334)||!_325(_333)||!_325(_334)){return undefined;}var _335=Date.UTC(_333.getFullYear(),_333.getMonth(),_333.getDate(),0,0,0,0)-Date.UTC(_334.getFullYear(),_334.getMonth(),_334.getDate(),0,0,0,0);return _335/(1000*60*60*24);},dayOfWeek:function(date){if(_322(date)||!_325(date)){return undefined;}return date.getDay();},year:function(date){if(_322(date)||!_325(date)){return undefined;}return date.getFullYear();},month:function(date){if(_322(date)||!_325(date)){return undefined;}return date.getMonth();},day:function(date){if(_322(date)||!_325(date)){return undefined;}return date.getDate();},parseDate:function(obj,_336){if(_336){var _337={};_337.formatLength="long";_337.datePattern=_336;_337.selector="date";try{var _338=dojo.date.locale.parse(obj,_337);if(_338!=null){return _338;}else{return undefined;}}catch(ee){return undefined;}}else{if(_322(obj)||!(/^\d{4}-\d{2}-\d{2}$/.test(obj.toString()))){return undefined;}return new Date(obj);}},toString:function(obj){if(_322(obj)||!_325(obj)){return undefined;}var _339=obj.getMonth()+1;if(_339<10){_339="0"+_339;}var day=obj.getDate();if(day<10){day="0"+day;}return obj.getFullYear()+"-"+_339+"-"+day;}};var _33a={round:function(num){if(_322(num)||!_323(num)){return undefined;}return Math.round(num);},truncate:function(num,flag){if(_322(num)||!_323(num)){return undefined;}if(flag){return Math.ceil(num);}else{return Math.floor(num);}},absolute:function(num){if(_322(num)||!_323(num)){return undefined;}return Math.abs(num);}};window.BTTStringFunctions=_326;window.BTTDateFunctions=_32b;window.BTTNumberFunctions=_33a;})();}if(!dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]){dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]=true;dojo.provide("com.ibm.btt.dijit.plugins.Pagination");dojo.declare("com.ibm.btt.dijit.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"bttpagination",mode:"simple",timeout:500,keepSingleSelection:false,_paginateable:true,init:function(){this._initParams();this._createPaginators(this.option);this._regApis();if(this.initialMode=="client"){if(this.mode=="simple"){this._requestFirstPage();}else{this.gotoPage("initial");}}},_initParams:function(){var _33b=this;var _33c=function(_33d,_33e){return _33b.option[_33d]?_33b.option[_33d]:(_33b.grid[_33d]?_33b.grid[_33d]:_33e);};var _33f=function(arg,_340){var tmp=Number(arg);if(isNaN(tmp)){return _340;}else{return tmp;}};this.mode=_33c("mode",this.mode);this.timeout=_33f(_33c("timeout",this.timeout),this.timeout);this.initialMode=_33c("initialMode","server");this.totalRowNumber=_33c("totalRowNumber",this.totalRowNumber);this.rowsPerPage=_33c("rowsPerPage",this.rowsPerPage);this.bttParams=_33c("bttParams",{});if(this.mode=="simple"){this._setPageSize(this.totalRowNumber);this.defaultRows=_33c("defaultRows",25);this._currentPage=0;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");}if(this.mode=="nonePageSize"){var _341=function(arg){if(arg=="false"){return false;}else{if(arg=="true"){return true;}else{return arg;}}};this.prevBtnEnabled=_33c("enablePrevious",false);this.prevBtnEnabled=_341(this.prevBtnEnabled);this.nextBtnEnabled=_33c("enableNext",true);this.nextBtnEnabled=_341(this.nextBtnEnabled);}},_setPageSize:function(_342){if(typeof (_342)!="defined"&&_342!=null&&_342!="null"){this.totalRowNumber=_342;this._maxSize=this.totalRowNumber;this.pageSize=this.rowsPerPage;this.totalPageSize=Math.ceil(this.totalRowNumber/this.rowsPerPage);}},_createPaginators:function(_343){this.paginators=[];if(this.mode=="simple"){if(_343.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_343,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_343,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_343,{plugin:this}))];}}else{if(this.mode=="nonePageSize"){if(_343.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_343,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_343,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_343,{plugin:this}))];}}else{console.error("Unsupport pagination mode, please check the parameter definition.");}}dojo.forEach(this.paginators,function(f){f.update();});},_stopEvent:function(_344){try{dojo.stopEvent(_344);}catch(e){}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});this.paginators=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage+2);}if(this.mode=="nonePageSize"){this.gotoPage("next");}},prevPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage);}if(this.mode=="nonePageSize"){this.gotoPage("prev");}},gotoFirstPage:function(e){this.gotoPage(1);},gotoLastPage:function(e){this.gotoPage(this.totalPageSize);},gotoPage:function(e){if(this._paginateable==true){if(this.mode=="simple"&&e>=1&&e<=this.totalPageSize&&e!=(this._currentPage+1)){this._requestPageByNum(e);}if(this.mode=="nonePageSize"&&((e=="initial")||(e=="next"&&this.nextBtnEnabled)||(e=="prev"&&this.prevBtnEnabled))&&e!=(this._currentPage+1)){this._fetchData({"pageRequest.pageEvent":e,"mode":this.mode});}this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}},_requestPageByNum:function(e){this._fetchData({"pageRequest.pageEvent":"page","pageRequest.pageNumber":e,"mode":this.mode});this._currentPage=e-1;},_requestFirstPage:function(){this._fetchData({"pageRequest.pageEvent":"initial","pageRequest.pageNumber":1,"mode":this.mode});this._currentPage=0;},_fetchData:function(arg){console.log(this.bttParams);AjaxUtil.xhrPost({handleAs:"text",timeout:this.timeout,success:dojo.hitch(this,this._handleResponse),error:dojo.hitch(this,this._handleError)},dojo.mixin(this.bttParams,arg));},_handleResponse:function(arg){try{var data=dojo.fromJson(arg);if(data.items){if(this.grid.get("store")){var _345=this.grid.get("store");_345.close();}this.grid.set("store",new dojo.data.ItemFileWriteStore({data:{items:data.items}}));this.grid._refresh();if(this.mode=="simple"){this._setPageSize(arg.totalRowNumber);}if(this.mode=="nonePageSize"){if(typeof (data.enableNext)!="undefined"){}this.nextBtnEnabled=this._setBtnState(data.enableNext);this.prevBtnEnabled=this._setBtnState(data.enablePrevious);}dojo.forEach(this.paginators,function(p){p.update();});}if(this.grid.selection.mode==="single"&&!this.keepSingleSelection){this.grid.selection.deselectAll();}if(data&&data.errMsg){this.grid.showErrorIcon(data.errMsg);}this.grid.onAsyncOK(arguments);}catch(e){(new dijit.Dialog({title:"",content:arg})).show();this.grid.onAsyncError(arguments);}this._paginateable=true;},_setBtnState:function(_346){if(typeof (_346)!="undefined"&&_346!="null"&&_346!=null){if(_346==true||_346=="true"){return true;}else{return false;}}return false;},_handleError:function(arg){console.error("An error occured when loading pagination data from "+AjaxUtil.ajaxOperationUrl);this._paginateable=true;if(arg.dojoType==="timeout"){this.grid.onAsyncTimeOut(arguments);}else{if(arg.status!==undefined){this.grid.onAsyncError(arguments);}}},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("com.ibm.btt.dijit.plugins.SimplePaginator",[dojox.grid.enhanced.plugins._Paginator],{pageSizes:undefined,showAll:true,_updateDescription:function(){},disableBtns:function(){var _347=null,_348=this._getCurrentPageNo(),_349=this._getPageCount(),_34a=0;var _34b=function(node,_34c,_34d){var _34e=node.value,_34f=_34c?"dojoxGrid"+_34e+"Btn":"dojoxGridInactived",_350=_34c?"dojoxGrid"+_34e+"BtnDisable":"dojoxGridActived";if(_34d){dojo.addClass(node,_350);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_34f);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _351=node.value=="prevPage"||node.value=="firstPage"?1:_349;_34b(node,true,true);}else{_347=parseInt(node.value,10);_34b(node,false,true);}},this);}});dojo.declare("com.ibm.btt.dijit.plugins.NonePageSizePaginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\r\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\r\n\t\t<tr>\r\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\r\n\t\t\t\t<div dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\r\n\t\t\t</td>\r\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\"></td>\r\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\r\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n",position:"bottom",_maxItemSize:10,description:true,pageStepper:"30em",constructor:function(_352){dojo.mixin(this,_352);this.grid=this.plugin.grid;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_353,_354){self._changeSize=g._pendingChangeSize=_353;self._resultSize=g._pendingResultSize=_354;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.nextBtnEnabled=this.plugin.nextBtnEnabled?this.plugin.nextBtnEnabled:this.grid.nextBtnEnabled;this.prevBtnEnabled=this.plugin.prevBtnEnabled?this.plugin.prevBtnEnabled:this.grid.prevBtnEnabled;this._updatePageStepper();},disableBtns:function(){var _355=function(node,_356,_357){var _358=node.value,_359=_356?"dojoxGrid"+_358+"Btn":"dojoxGridInactived",_35a=_356?"dojoxGrid"+_358+"BtnDisable":"dojoxGridActived";if(_357){dojo.addClass(node,_35a);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_359);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");_355(node,true,true);}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");_355(node,true,true);}},this);},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _35b=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var _35c,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){_35c=_35b(flag,"px")||_35b(flag,"%")||_35b(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){_35c=flag+"px";}}this[t]=_35c?true:false;this[t+"Width"]=_35c;},this);},_regFocusMgr:function(_35d){this.grid.focus.addArea({name:"pagination"+_35d,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_35d){case "top":this.grid.focus.placeArea("pagination"+_35d,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_35d,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _35e=dojo.trim(this.position.toLowerCase());switch(_35e){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_35f,_360){var g=this.grid;_35f=_35f||this._changeSize;_360=_360||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _361=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_361;}if(_360){_35f=_360;}if(_35f){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_361;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_361;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_361;dojo.style(g.viewsNode,"height",h+"px");var _362=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_362){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,_363,_364){var _365=this.grid.messagesNode;dojo.style(_365,{"position":"absolute","top":top+"px","width":_363+"px","height":_364+"px","z-Index":"100"});},_updateDescription:function(){},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(this.pageStepperDiv.childNodes.length<1){this._createWardBtns();}this._updatePageStepNodeClass();},_createWardBtns:function(){var self=this;var _366={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _367=function(_368,_369,_36a){_369=I18nUtil.getI18nString(_369);var node=dojo.create("div",{value:_368,title:_369,tabindex:1},self.pageStepperDiv,_36a);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));dijit.setWaiState(node,"label",_369);var _36b=dojo.create("span",{value:_368,title:_369,innerHTML:_366[_368]},node,_36a);dojo.addClass(_36b,"dojoxGridWardButtonInner");};_367("prevPage","%com.ibm.btt.dijit.Grid/prevPageBtn","first");_367("nextPage","%com.ibm.btt.dijit.Grid/nextPageBtn","last");},_updatePageStepNodeClass:function(){var _36c=function(node,_36d,_36e){var _36f=node.value,_370=_36d?"dojoxGrid"+_36f+"Btn":"dojoxGridInactived",_371=_36d?"dojoxGrid"+_36f+"BtnDisable":"dojoxGridActived";if(_36e){dojo.addClass(node,_371);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_370);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.prevBtnEnabled){_36c(node,true,false);}else{_36c(node,true,true);}}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.nextBtnEnabled){_36c(node,true,false);}else{_36c(node,true,true);}}},this);},_onFocusPaginator:function(_372,step){if(!this._currentFocusNode){if(step!=0){return this._onFocusPageStepNode(_372);}else{return false;}}else{return false;}},_onFocusPageStepNode:function(_373){var _374=this._getPageStepActivableNodes();if(_373&&_373.type!=="click"){if(_374[0]){dijit.focus(_374[0]);this._currentFocusNode=_374[0];this.focusArea="pageStep";this.plugin._stopEvent(_373);return true;}else{return false;}}if(_373&&_373.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),_373.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(_373);return true;}}return false;},_onBlurPaginator:function(_375,step){var _376=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_376.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(_377,_378){if(_378){return;}if(_377.altKey||_377.metaKey){return;}var dk=dojo.keys;if(_377.keyCode===dk.ENTER||_377.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(_377);}}this.plugin._stopEvent(_377);},_moveFocus:function(_379,_37a,evt){var _37b;if(this.focusArea=="pageStep"){_37b=this._getPageStepActivableNodes();if(this.gotoPageDiv){_37b.push(this.gotoPageDiv);}}if(_37b.length<1){return;}var _37c=dojo.indexOf(_37b,this._currentFocusNode);var _37d=_37c+_37a;if(_37d>=0&&_37d<_37b.length){dijit.focus(_37b[_37d]);this._currentFocusNode=_37b[_37d];}this.plugin._stopEvent(evt);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageStepNodes:function(){var _37e=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_37e.push(this.pageStepperDiv.childNodes[i]);}return _37e;},_onPageStep:function(e){var g=this.grid;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}switch(e.target.value){case "prevPage":if(e.target.className.indexOf("dojoxGridprevPageBtnDisable")<=0){g.prevPage();}break;case "nextPage":if(e.target.className.indexOf("dojoxGridnextPageBtnDisable")<=0){g.nextPage();}break;}}});dojox.grid.EnhancedGrid.registerPlugin(com.ibm.btt.dijit.plugins.Pagination);}if(!dojo._hasResource["com.ibm.btt.dijit.Dialog"]){dojo._hasResource["com.ibm.btt.dijit.Dialog"]=true;dojo.provide("com.ibm.btt.dijit.Dialog");dojo.declare("com.ibm.btt.dijit.Dialog",[dijit.Dialog,com.ibm.btt.dijit.AbstractWidgetMixin],{closable:false,_setClosableAttr:function(_37f){this.closable=_37f;if(this.closable){dojo.style(this.closeButtonNode,"display","");}else{dojo.style(this.closeButtonNode,"display","none");}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _380=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_380){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_380){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE&&this.closable){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]){dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]=true;dojo.provide("com.ibm.btt.dijit.ScreenCover");dojo.declare("com.ibm.btt.dijit.ScreenCover",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div class='dijitScreenCover' style='display:none;'><div dojoAttachPoint='containerNode' class='dijitScreenCoverContainer'><div dojoAttachPoint='imageNode' class='dijitScreenCoverImage'></div><div dojoAttachPoint='textNode' class='dijitScreenCoverText'></div></div></div>",text:"%com.ibm.btt.dijit.ScreenCover/waitingText",postCreate:function(){this.inherited(arguments);dojo.body().appendChild(this.domNode);this.domNode.style.display="none";this._events=[];this._events.push(dojo.connect(dojo.global,"onresize",this,this.layout));},layout:function(){var _381=dojo.window.getBox();var bb=dojo._getBorderBox(this.containerNode);var l=Math.floor(_381.l+(_381.w-bb.w)/2);var t=Math.floor(_381.t+(_381.h-bb.h)/2);dojo.style(this.domNode,{top:_381.t+"px",left:_381.l+"px",width:_381.w+"px",height:_381.h+"px"});dojo.style(this.containerNode,{left:l+"px",top:t+"px"});},_setTextAttr:function(_382){this.text=_382;this.textNode.innerHTML=this.getI18NString(_382);},show:function(){this.domNode.style.display="block";this.layout();},hide:function(){this.domNode.style.display="none";},destroy:function(){this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.event.NavigationEngine"]){dojo._hasResource["com.ibm.btt.event.NavigationEngine"]=true;dojo.provide("com.ibm.btt.event.NavigationEngine");dojo.declare("com.ibm.btt.event.NavigationEngine",[com.ibm.btt.event.Engine],{url:"Request",_commandMap:{},_contentPane:null,_dialog:null,_cover:null,constructor:function(){var _383=this;if(dojo._postLoad){this.postCreate();this.onLoad();}else{dojo.addOnLoad(function(){_383.postCreate();_383.onLoad();});}},postCreate:function(){this.registerCommand("render_page",dojo.hitch(this,this.renderPageHandler));this.registerCommand("popup_page",dojo.hitch(this,this.popupPageHandler));this.registerCommand("redirect",dojo.hitch(this,this.redirectPage));this.registerCommand("remote_flow",dojo.hitch(this,this.remoteFlowHandler));this.registerCommand("do_nothing",function(){console.info("do nothing is returned from server side.");});},onLoad:function(e){this._delegateAllFormSubmit();dojo.forEach(dojo.filter(dojo.query("form"),function(form){return form.title&&form.title!="";}),function(form){eval(form.title);});this._getCover().hide();},setUrl:function(_384){this.url=_384;},registerCommand:function(type,_385){this._commandMap[type]=_385;},_queryAllWidgets:function(node){if(!node){node=dojo.body();}return dojo.query("[widgetId]",node).map(dijit.byNode);},_disposeAllWidgets:function(){this.clearRules();if(this._contentPane){this._destroyContentPane();this._destroyDialog();}else{this._destroyDialog();this._destroyCover();var _386=this._queryAllWidgets();_386.forEach(function(_387){try{_387.destroy();}catch(e){console.error("An error occured, while destroying the widget. Error:"+e);}});dojo.empty(dojo.body());dijit._masterTT=undefined;}},_unregisterEvents:function(arg,flag){if(flag){while(arg.length>0){dojo.disconnect(arg.pop());}}else{dojo.disconnect(arg);}},_delegateAllFormSubmit:function(){var _388=this;dojo.forEach(this._queryAllWidgets(),function(_389){if(_389.type!="undefined"&&(_389.type=="save"||_389.type=="cancel")){var _38a=_389._onButtonClick;_389._onButtonClick=dojo.hitch(_388,_388._onButtonClick,_389,_38a);}if(_389.domNode.nodeName==="A"){_389.onClick=dojo.hitch(_388,_388._onLinkClick,_389);}if(_389.domNode.nodeName==="FORM"){_389.onSubmit=dojo.hitch(_389,function(e){if(e){if(e.preventDefault){e.preventDefault();}dojo.stopEvent(e);}if(_389.validateOnSubmit){if(!_389.isValid()||!_389.xValid){return false;}}dojo.forEach(_389.getDescendants(),function(_38b){if(_38b.onFormSubmit){try{_38b.onFormSubmit();}catch(e){console.error("Error occured while excuting the onFormSubmit events before form submitted.");}}});var _38c=_389._querySubmitButton(e);if(_389.onFormSubmit){_389.onFormSubmit();}_388._submitFormData(_389,_38c);return false;});}});},_onLinkClick:function(link,e){if(link.get("target")!=="_blank"){e.preventDefault();if(link.bttParams){this._submitData(dojo.fromJson(link.bttParams));}}},_onButtonClick:function(_38d,_38e,e){if(_38d.type=="save"&&_38d.get("disabled")==false){_38d._onClick(e);e.preventDefault();var form=_38d._getParentForm();if(form&&_38d.bttParams){if(form.onFormSubmit){form.onFormSubmit();}this._submitData(dojo.mixin(form.get("validValue"),dojo.fromJson(_38d.bttParams)));}}else{if(_38d.type=="cancel"&&_38d.get("disabled")==false){_38d._onClick(e);e.preventDefault();if(_38d.bttParams){this._submitData(dojo.fromJson(_38d.bttParams));}}else{_38e.apply(_38d,[e]);}}},_submitFormData:function(form,_38f){if(_38f&&_38f.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(_38f.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{if(form.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(form.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{console.log("Do not find default BTT Params on form for user press enter operation.");}}},_submitData:function(data){AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:this.url,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},data);this._getCover().show();},_handleError:function(e,xhr){var _390;if(xhr){var _391=xhr.xhr.responseText;if(_391&&_391!=""){try{_391=dojo.fromJson(_391);if(_391["page"]){_390=_391["page"];}}catch(e){_390=_391;}}}if(!_390){if(e.message){_390=e.message;}else{_390="An error occured. Messsage : "+e;}}this._disposeAllWidgets();dojo.body().innerHTML=_390;this._getCover().hide();},_handleFormResponse:function(e){var _392;if(this._commandMap[e["command"]]){try{_392=this._commandMap[e["command"]](e);}catch(e){this._handleError("An error occured while excuting the handler:"+e["dse_clientCommand"]+" error:"+e);}}else{this._handleError("Can not find corresponding command handler for command type='"+e["dse_clientCommand"]+"'");}if(_392!==false){this._getCover().hide();}},createContentPane:function(){return new com.ibm.btt.dijit.ContentPane({"style":"padding:0px;",refreshOnShow:false},dojo.create("div",null,dojo.body(),"last"));},_getContentPane:function(data){if(!this._contentPane){this._contentPane=this.createContentPane();}if(this._cpOnLoadEvt){this._unregisterEvents(this._cpOnLoadEvt);}if(this._cpOnErrorEvt){this._unregisterEvents(this._cpOnErrorEvt);}this._cpOnErrorEvt=dojo.connect(this._contentPane,"onContentError",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));this._cpOnLoadEvt=dojo.connect(this._contentPane,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));return this._contentPane;},_destroyContentPane:function(){if(this._contentPane){this._unregisterEvents(this._cpOnLoadEvt);this._cpOnLoadEvt=undefined;this._unregisterEvents(this._cpOnErrorEvt);this._cpOnErrorEvt=undefined;try{this._contentPane.destroyDescendants();this._contentPane.destroy();}catch(e){}this._contentPane=undefined;}},createDialog:function(){var _393=dojo.window.getBox();return new com.ibm.btt.dijit.Dialog({title:"",style:"overflow-y:auto;overflow-x:auto;max-width:"+_393.w+"px;max-height:"+_393.h+"px",closable:false});},_getDialog:function(data){if(!this._dialog){var _394=dojo.window.getBox();this._dialog=this.createDialog();}if(this._dialogOnLoadEvt){this._unregisterEvents(this._dialogOnLoadEvt);}this._dialogOnLoadEvt=dojo.connect(this._dialog,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._dialog));return this._dialog;},_destroyDialog:function(){if(this._dialog){this._unregisterEvents(this._dialogOnLoadEvt);this._dialogOnLoadEvt=undefined;this._dialog.hide();try{this._dialog.destroyDescendants();this._dialog.destroy();}catch(e){}this._dialog=undefined;}},_getCover:function(){if(!this._cover){this._cover=new com.ibm.btt.dijit.ScreenCover();}return this._cover;},_destroyCover:function(){if(this._cover){this._cover.destroy();this._cover=undefined;}},isECARuleFile:function(src,_395){var _396=function(src,_397){var reg=new RegExp(_397+"$");return reg.test(src);};return _396(src,_395+".js");},_afterPageLoaded:function(data,_398){if(data["page_name"]){var _399=this;dojo.query("script",_398.domNode).forEach(dojo.hitch(this,function(_39a){if(_39a.src&&this.isECARuleFile(_39a.src,data["page_name"])){_399._registerECAEvent(data["page_name"],_39a.src);}}));}this.onLoad(data,_398);},_registerECAEvent:function(name,url){var _39b={url:url,handleAs:"text",load:dojo.hitch(this,function(e){dojo.eval(e);if(window[name]){delete window[name];}})};dojo.xhrGet(_39b);},_parsenextPageUrl:function(e){var data=dojo.fromJson(e.data);var url=["Request?dse_applicationId="+data["dse_applicationId"]];url.push("dse_processorId="+data["dse_processorId"]);url.push("dse_sessionId="+data["dse_sessionId"]);url.push("dse_processorState="+data["dse_processorState"]);url.push("dse_nextEventName="+data["dse_nextEventName"]);url.push("dse_operationName="+data["dse_operationName"]);url.push("dse_pageId="+data["dse_pageId"]);return url.join("&");},redirectPage:function(e){location.href=this._parsenextPageUrl(e);},popupPageHandler:function(data){var _39c=this._getDialog(data);_39c.destroyDescendants();_39c.startup();if(!_39c.get("open")){_39c.show();}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_39c.set("content",page);},renderPageHandler:function(data){this._getCover().show();this._disposeAllWidgets();if(this._dialog&&this._dialog.get("open")){this._dialog.hide();}var _39d=this._getContentPane(data);var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_39d.set("content",page);_39d.startup();},remoteFlowHandler:function(data){this._getCover().show();var _39e=dojo.fromJson(data["data"]);console.info("############ remoteFlowHandler : ",_39e);if(_39e.dse_remoteFlowID){this.url=_39e.dse_RemoteRequest_URL;AjaxUtil.ajaxOperationUrl=_39e.dse_RemoteAjaxOp_URL;}else{this.url=_39e.dse_RemoteSubFlow_URL;AjaxUtil.ajaxOperationUrl=_39e.dse_remote_parent_AjaxURL;}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:_39e.dse_RemoteSubFlow_URL,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},_39e);return false;},destroy:function(){this.inherited(arguments);this._commandMap=undefined;this._destroyContentPane();this._destroyCover();this._destroyDialog();}});}
