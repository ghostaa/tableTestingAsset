/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["com.ibm.btt.util.I18nBundle"]){dojo._hasResource["com.ibm.btt.util.I18nBundle"]=true;dojo.provide("com.ibm.btt.util.I18nBundle");dojo.declare("com.ibm.btt.util.I18nBundle",null,{bundle:null,constructor:function(_1,_2,_3){try{dojo.requireLocalization(_1,_2,_3, "");this.bundle=dojo.i18n.getLocalization(_1,_2,_3);}catch(e){console.info("Can not load NLS resources. packageName="+_1+", bundleName="+_2+", locale="+_3);this.bundle=undefined;}},getMessage:function(_4,_5){if(typeof (this.bundle)!="undefined"&&typeof (_4)!="undefined"&&typeof (this.bundle[_4])!="undefined"){if((_5!==undefined)&&(dojo.isArray(_5))){var _6=this.bundle[_4];var i=0;_6=dojo.replace(_6,dojo.hitch(_5,function(_7,k){if(i<_5.length){if(_5[i]!==undefined&&_5[i++]!==null){return _5[i-1];}}return "{"+k+"}";}));return _6;}else{if(_5!==undefined&&_5!==null&&dojo.isObject(_5)){return dojo.replace(this.bundle[_4],dojo.hitch(_5,function(_8,k){var _9=dojo.getObject(k,false,_5);if(_9!==null&&_9!==undefined){return _9;}else{return "{"+k+"}";}}));}else{if(_5!==undefined&&_5!==null){var _a=[];for(var i=1;i<arguments.length;i++){_a.push(arguments[i]);}return arguments.callee.apply(this,[_4,_a]);}else{return this.bundle[_4];}}}}else{return undefined;}}});}if(!dojo._hasResource["com.ibm.btt.util.I18nUtil"]){dojo._hasResource["com.ibm.btt.util.I18nUtil"]=true;dojo.provide("com.ibm.btt.util.I18nUtil");(function(){I18nUtil={getI18nString:function(_b,_c){if((_b===null)||(_b===undefined)||(_b==="")){return _b;}var _d="%";var _e="/";_b=_b.toString();var _f=_b.substring(0,1);if(_b.substring(0,1)!=_d){return _b;}else{var _10=_b.replace(_d,"");var tmp=_10.split(_e);var _11=tmp[0].substring(0,tmp[0].lastIndexOf("."));var _12=tmp[0].substring(tmp[0].lastIndexOf(".")+1,tmp[0].length);var _13=tmp[1];if(typeof (_11)=="undefined"||typeof (_12)=="undefined"||_11==""||_12==""){return _b;}var _14=new com.ibm.btt.util.I18nBundle(_11,_12);var _15=_14.getMessage(_13,_c);if(_15==undefined||_15==null){return _b;}else{return _15;}}}};})();}if(!dojo._hasResource["com.ibm.btt.util.StringUtil"]){dojo._hasResource["com.ibm.btt.util.StringUtil"]=true;dojo.provide("com.ibm.btt.util.StringUtil");(function(){StringUtil={escapeHTML:function(_16){if(_16){var _17=_16.replace(new RegExp("\r\n","g"),"\n");_17=_17.replace(new RegExp("\n","g"),"<br/>");return StringUtil.replaceAll(_17," ","&nbsp;");}else{return _16;}},replaceAll:function(str,_18,_19){if(str&&_18&&_19){return str.replace(new RegExp(_18,"gm"),_19);}else{return str;}},removeWarp:function(str){if(str){var _1a=str.replace(new RegExp("\r","g"),"");_1a=_1a.replace(new RegExp("\n","g"),"");return _1a;}else{return str;}}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetMixin",null,{visibility:"visible",accessKey:"",hint:"",postCreate:function(){this.applyAccessKey();this.inherited(arguments);},getI18NString:function(key,_1b){return I18nUtil.getI18nString(key,_1b);},replaceWrap:function(){},_setVisibilityAttr:function(_1c){this.visibility=_1c;if(_1c=="gone"){dojo.style(this.domNode,"visibility","");dojo.style(this.domNode,"display","none");}else{if(_1c=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","");}}},_setHintAttr:function(_1d){this.hint=_1d;this.domNode.title=StringUtil.removeWarp(this.getI18NString(_1d));},isFocusable:function(){if(dojo.style(this.domNode,"visibility")=="hidden"){return false;}else{if(this.disabled){return false;}else{return this.inherited(arguments);}}},applyAccessKey:function(){if(this.focusNode&&this.accessKey){this.focusNode.setAttribute("accessKey",this.accessKey);}},handleLenUint:function(_1e){var _1f=function(src,_20){var reg=new RegExp(_20+"$");return reg.test(src);};if(_1f(_1e,"px")||_1f(_1e,"%")||_1f(_1e,"em")){return _1e;}else{return _1e+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Anchor"]){dojo._hasResource["com.ibm.btt.dijit.Anchor"]=true;dojo.provide("com.ibm.btt.dijit.Anchor");dojo.declare("com.ibm.btt.dijit.Anchor",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<a class='dijitLabelBase' dojoAttachEvent='onclick:_onClick'></a>",action:"#",target:"_parent",bttParams:"",text:"",tabIndex:"0",disabled:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{target:{node:"domNode"},tabIndex:{node:"domNode"},text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},disabled:{node:"domNode"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);},_parameterHandler:function(e){var _21="";var _22=dojo.fromJson(e);for(var _23 in _22){if(typeof (_23)!="undefined"){var _24=_22[_23];if(_21==""){_21+=_23+"="+_24;}else{_21+="&"+_23+"="+_24;}}}return _21;},_setActionAttr:function(_25){this.action=_25;var _26="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_26=this.action;if(this.bttParams!=""){if(_26.indexOf("?")==-1){_26+="?";}if(this.bttParams!=""){var _27=this._parameterHandler(this.bttParams);if(_26.substring(_26.length-1)=="?"){_26+=_27;}else{_26+="&"+_27;}}}}else{_26="javascript:void(0)";}this.domNode.href=_26;},_setTextAttr:function(_28){this.text=_28;this.domNode.innerHTML=this.getI18NString(_28);},_setDisabledAttr:function(_29){this.disabled=_29;},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}},onClick:function(e){},_setTextWrapAttr:function(_2a){this.textWrap=_2a;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setWidthAttr:function(_2b){if(this.width!=""){this.width=_2b;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2c){if(this.height!=""){this.height=_2c;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Button"]){dojo._hasResource["com.ibm.btt.dijit.Button"]=true;dojo.provide("com.ibm.btt.dijit.Button");dojo.declare("com.ibm.btt.dijit.Button",[dijit.form.Button,com.ibm.btt.dijit.AbstractWidgetMixin],{bttParams:"",icon:"",text:"",inValid:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.Button.prototype.attributeMap,{visibility:{node:"domNode"},text:{node:"textNode",type:"innerHTML"},icon:{node:"iconImageNode",type:"attribute",attribute:"src"},width:{node:"domNode"},height:{node:"domNode"}}),buildRendering:function(){this.inherited(arguments);this.iconImageNode=dojo.create("img",{"style":"display:none;"},this.containerNode,"last");this.textNode=dojo.create("span",{"class":"dijitLabelBase"},this.containerNode,"last");dojo.style(this.focusNode,"overflow","hidden");dojo.addClass(this.focusNode.parentNode,"dijitLabelBase");},postCreate:function(){this.inherited(arguments);this._setIconAttr(this.icon);},_setTextAttr:function(_2d){this.text=_2d;this.textNode.innerHTML=this.getI18NString(_2d);},_setTextWrapAttr:function(_2e){this.textWrap=_2e;if(this.textWrap){dojo.addClass(this.textNode,"dijitLabelWrap");}else{dojo.removeClass(this.textNode,"dijitLabelWrap");}},_setIconAttr:function(_2f){this.icon=_2f;this.iconImageNode.src=_2f;if(_2f===""||typeof (_2f)==="undefined"){dojo.style(this.iconImageNode,"display","none");}else{dojo.style(this.iconImageNode,"display","");}},_setWidthAttr:function(_30){if(_30!=""){this.width=_30;dojo.style(this.focusNode.parentNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_31){if(_31!=""){this.height=_31;dojo.style(this.focusNode.parentNode,"height",this.handleLenUint(this.height));}},_setInValidAttr:function(_32){this.inValid=_32;if(this.type=="submit"){var _33=this._getParentForm();if(_33&&_33.setSubmitButtonState){_33.setSubmitButtonState();}else{this.set("disabled",_32);}}else{this.set("disabled",_32);}},_onButtonClick:function(e){var _34=this._getParentForm();if(_34&&this.get("disabled")==false&&this.type=="cancel"){this._onClick(e);this._doCancelAction(_34);e.preventDefault();}else{if(_34&&this.get("disabled")==false&&this.type=="save"){this._onClick(e);this._doSaveAction(_34);e.preventDefault();}else{if(_34){_34._lastClickedButton=this;}this.inherited(arguments);}}},_getParentForm:function(){for(var _35=this.domNode;_35.parentNode;_35=_35.parentNode){var _36=dijit.byNode(_35);if(_36&&typeof _36._onSubmit=="function"){return _36;}}},_doCancelAction:function(_37){var _37=this._createHiddenForm(_37,dojo.fromJson(this.bttParams));_37.submit();},_doSaveAction:function(_38){var _38=this._getParentForm();if(_38.onFormSubmit){_38.onFormSubmit();}var _39=_38.get("validValue");var _38=this._createHiddenForm(_38,dojo.mixin(_39,dojo.fromJson(this.bttParams)));_38.submit();},_createHiddenForm:function(_3a,_3b){var _3a=dojo.create("form",{"style":"display:none;","action":_3a.get("action"),"method":_3a.get("method")},dojo.body(),"last");var _3c=[];for(var _3d in _3b){if(_3d!=undefined&&_3d!=null&&_3d!=""){_3c=_3c.concat(this._convertToKeyValuePair(_3d,_3b[_3d]));}}for(var i=0;i<_3c.length;i++){dojo.create("input",{"type":"hidden","name":_3c[i].key,"value":_3c[i].value},_3a,"last");}return _3a;},_convertToKeyValuePair:function(_3e,_3f){var res=[];if(dojo.isObject(_3f)){for(var key in _3f){if(key!=undefined&&key!=null&&key!=""){res=res.concat(this._convertToKeyValuePair(_3e+"."+key,_3f[key]));}}}else{if(dojo.isArray(_3f)){for(var i=0;i<_3f.length;i++){res=res.concat(this._convertToKeyValuePair(_3e+"."+i,_3f[i]));}}else{res.push({"key":_3e,"value":_3f});}}return res;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckBox"]){dojo._hasResource["com.ibm.btt.dijit.CheckBox"]=true;dojo.provide("com.ibm.btt.dijit.CheckBox");dojo.declare("com.ibm.btt.dijit.CheckBox",[dijit.form.CheckBox,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",visibility:"visible",uncheckedField:null,checkedValue:"true",unCheckedValue:"false",isChecked:false,checked:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.CheckBox.prototype.attributeMap,{isChecked:{node:"domNode",type:"attribute"},style:{node:"labelNode",type:"attribute"},visibility:{node:"domNode"},text:{node:"labelNode",type:"innerHTML"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");this.set("visibility",this.visibility);},postCreate:function(){this.inherited(arguments);this._setSubmitValue();this.set("value",this.checkedValue);if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},setUncheckedValue:function(arg){if(!this.get("name")){return;}if(arg==true){if(this.uncheckedField==null){this.uncheckedField=dojo.create("input",{type:"hidden",value:this.unCheckedValue,name:this.get("name")});}dojo.place(this.uncheckedField,this.focusNode,"after");}else{if(this.uncheckedField!=null){dojo.destroy(this.uncheckedField);}}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},_setSubmitValue:function(){if(this.get("isChecked")){this.setUncheckedValue(false);}else{this.setUncheckedValue(true);}},_setIsCheckedAttr:function(_40){this.set("checked",_40);},_setCheckedAttr:function(_41){if(_41==false||_41=="false"||_41==""){this.isChecked=false;}else{this.isChecked=true;}this._setSubmitValue();this.inherited(arguments);},_setTextAttr:function(_42){this.text=_42;this.labelNode.innerHTML=this.getI18NString(_42);},_setStyleAttr:function(_43){dojo.attr(this.labelNode,"style",_43);},_setClassAttr:function(_44){dojo.attr(this.labelNode,"class",_44);},_setHintAttr:function(_45){this.hint=_45;var _46=StringUtil.removeWarp(this.getI18NString(_45));this.domNode.title=_46;this.labelNode.title=_46;},_setVisibilityAttr:function(_47){this.visibility=_47;if(_47==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_47==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_48){this.inherited(arguments);if(_48==="true"||_48===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_setDisabledAttr:function(_49){this.inherited(arguments);if(this.uncheckedField!=null){dojo.attr(this.uncheckedField,"disabled",_49);}},_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}},_setTextWrapAttr:function(_4a){this.textWrap=_4a;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_4b){if(this.width!=""){this.width=_4b;var _4c=_4b.replace(new RegExp("px","gm"),"");try{_4c=Number(_4c);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_4b+" to number.");return;}var box=dojo.marginBox(this.domNode);var _4d=_4c-box.w;if(_4d<0){_4d=0;}dojo.style(this.labelNode,"width",_4d+"px");}},_setHeightAttr:function(_4e){if(this.height!=""){this.height=_4e;var _4f=_4e.replace(new RegExp("px","gm"),"");try{_4f=Number(_4f);}catch(e){console.error("Illegal input argument. Can not convert input height:"+_4e+" to number.");return;}var box=dojo.marginBox(this.domNode);var _50=_4f-box.h;if(_50<0){_50=0;}dojo.style(this.labelNode,"height",_50+"px");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]){dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]=true;dojo.provide("com.ibm.btt.dijit.ValidationTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.ValidationTextBox",[dijit.form.ValidationTextBox,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",errorDisplayer:null,singleFieldErrorMessage:"",attributeMap:dojo.delegate(dijit.form.ValidationTextBox.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},startup:function(){this.inherited(arguments);if(this.singleFieldErrorMessage){try{var _51=dojo.fromJson(this.singleFieldErrorMessage);if(dojo.isArray(_51)){this.showErrorMessage(_51);}}catch(e){this.showErrorMessage(this.singleFieldErrorMessage);}}},validator:function(_52,_53){var _54=typeof (this.regExpGen(_53))!="undefined"&&this.testRegularExpression(this.regExpGen(_53),_52);if(!_54){this.invalidMessage=this.bundle.getMessage("regularExpressionMessage");return false;}else{var res=(!this.required||!this._isEmpty(_52))&&(this._isEmpty(_52)||this.parse(_52,_53)!==undefined);if(res){return true;}else{this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}}},testRegularExpression:function(reg,_55){return (new RegExp("^(?:"+reg+")"+(this.required?"":"?")+"$")).test(_55);},_setWidthAttr:function(_56){if(_56!=""){this.width=_56;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setVisibilityAttr:function(_57){this.visibility=_57;var _58;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[0])!="undefined"){_58=this.domNode.children[0].children[0];}else{_58=null;}if(_57=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_58!=null){dojo.style(_58,"visibility","");}}else{if(_57=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_58!=null){dojo.style(_58,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_58!=null){dojo.style(_58,"visibility","");}}}},_onFocus:function(by){this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);},onShowErrorFlag:false,showErrorMessage:function(_59){if(dojo.isArray(_59)){var _5a=[];for(var i=0;i<_59.length;i++){var _5b=this.getI18NString(_59[i]);if(_5b==null){_5b=_59[i];}_5a.push(_5b);}if(_5a.length!=0){var _5c=_5a.join(" ");}else{var _5c="";}}else{var _5d=[];var _5e=[];if(arguments.length==0){arguments[0]="";_59="";}for(var i=1;i<arguments.length;i++){_5e[i-1]=arguments[i];}_5d[0]=arguments[0];_5d[1]=_5e;_5d[2]=true;var _5c=this.getI18NString.apply(this,_5d);if(_5c==null){_5c=_59;}}if(_59!=""){this._message=_59;dijit.hideTooltip(this.domNode);dojo.window.scrollIntoView(this.focusNode);this.onShowErrorFlag=true;if(!this.errorDisplayer){this.errorDisplayer=new dijit._MasterTooltip();}this.errorDisplayer.show(_5c,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}}this._refreshState();},validate:function(_5f){if(this.onShowErrorFlag){this.state="Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",false?"false":"true");if(_5f){if(this.state=="Error"){message=this.getErrorMessage(true);}else{message=this.getPromptMessage(true);}this._maskValidSubsetError=true;}return false;}else{return this.inherited(arguments);}},destroy:function(){this.displayMessage("");if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);if(this.errorDisplayer){this.errorDisplayer.destroy();this.errorDisplayer=undefined;}}});dojo.declare("com.ibm.btt.dijit.MappedTextBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.MappedTextBox],{});dojo.declare("com.ibm.btt.dijit.RangeBoundTextBox",[com.ibm.btt.dijit.MappedTextBox,dijit.form.RangeBoundTextBox],{postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},rangeCheck:function(_60,_61){if("min" in _61&&this.compare(_60,_61.min)<0){this.rangeMessage=this.bundle.getMessage("rangeMinMessage",{value:_61.min});return false;}if("max" in _61&&this.compare(_60,_61.max)>0){this.rangeMessage=this.bundle.getMessage("rangeMaxMessage",{value:_61.max});return false;}return true;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ComboBox"]){dojo._hasResource["com.ibm.btt.dijit.ComboBox"]=true;dojo.provide("com.ibm.btt.dijit.ComboBox");dojo.declare("com.ibm.btt.dijit.ComboBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.ComboBox,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",storeURL:"",labelField:"label",storeDataFormat:{itemLabel:this.labelField},asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.ComboBox.prototype.attributeMap,{visibility:{node:"domNode"}}),postMixInProperties:function(){this.storeDataFormat.itemLabel=this.labelField;this.searchAttr=this.storeDataFormat.itemLabel;var _62=this.srcNodeRef;var _63={label:this.storeDataFormat.itemLabel,items:[]};var _64=this.storeDataFormat.itemLabel;var _65=this;dojo.query("> option",_62).forEach(function(_66){var _67={};_67[_64]=_65.getI18NString(dojo.trim(_66.innerHTML));_63.items.push(_67);});if(_63.items.length==0){if(this.storeData){var _68=dojo.fromJson(this.storeData);_63=this._formatStoreData(_68);}}this.store=new dojo.data.ItemFileReadStore({data:_63});this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){this.loadStoreFromURL(this.storeURL);}},setStoreData:function(_69){var _69=this._formatStoreData(_69);this.store.clearOnClose=true;this.store.data=_69;this.store._jsonData=null;this.store.close();},_formatStoreData:function(_6a){var _6b={label:this.storeDataFormat.itemLabel,items:[]};if(_6a instanceof Array){for(var i=0;i<_6a.length;i++){if(_6a[i]!=null){var _6c={};if(dojo.isObject(_6a[i])){if(_6a[i][_6b.label]!=null){_6c[_6b.label]=this.getI18NString(_6a[i][_6b.label]);}}else{if(dojo.isString(_6a[i])){_6c[_6b.label]=this.getI18NString(_6a[i]);}else{_6c[_6b.label]=_6a[i].toString();}}if(_6c[_6b.label]){_6b.items.push(_6c);}}}}else{if(_6a instanceof Object){for(var p in _6a){var _6c={};_6c[_6b.label]=this.getI18NString(p);_6b.items.push(_6c);}}}return _6b;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _6d={url:this.storeURL,handleAs:"json",load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_6d);},_handleStoreLoadingResponse:function(_6e){this.setStoreData(_6e);this.onAsyncOK();},_setVisibilityAttr:function(_6f){this.visibility=_6f;var _70;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_70=this.domNode.children[0].children[1];}else{_70=null;}if(_6f=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_70!=null){dojo.style(_70,"visibility","");}}else{if(_6f=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_70!=null){dojo.style(_70,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_70!=null){dojo.style(_70,"visibility","");}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]){dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]=true;dojo.provide("com.ibm.btt.dijit.NumberTextBox");dojo.declare("com.ibm.btt.dijit.NumberTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.NumberTextBox],{numberType:"",minimumNumber:NaN,maximumNumber:NaN,locale:dojo.locale,pattern:"",decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);if(this.numberType=="byte"||this.numberType=="int"||this.numberType=="short"||this.numberType=="integer"||this.numberType=="long"||this.numberType=="bigInteger"){this.fractional=false;}else{this.fractional=true;}if(!isNaN(this.minimumNumber)){if(this.fractional){this.constraints.min=Number(this.minimumNumber);}else{this.constraints.min=parseInt(this.minimumNumber);}}if(!isNaN(this.maximumNumber)){if(this.fractional){this.constraints.max=Number(this.maximumNumber);}else{this.constraints.max=parseInt(this.maximumNumber);}}this.constraints.locale=this.locale;if(this.pattern!=""){this.constraints.pattern=this.pattern;}this.constraints.fractional=this.fractional;if(!isNaN(this.decimalPlaces)){this.decimalPlaces=Number(this.decimalPlaces);}if(this.fractional&&this.decimalPlaces>0){this.constraints.places=this.decimalPlaces;}this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},isNumber:function(_71){return /^-?\d+(\.\d+)?$/.test(_71);},validator:function(_72,_73){var _74;if(this.isNumber(_72)){_74=_72;}else{_74=this.parse(_72,this.constraints);if(!this.isNumber(_74)&&_72!=""){this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}else{if(new RegExp("^[+-]?\\d+$").test(_74)&&this.decimalPlaces>0){var con={};con["max"]=this.constraints["max"];con["min"]=this.constraints["min"];con["places"]=this.constraints["places"];con["fractional"]=this.constraints["fractional"];con["locale"]=this.constraints["locale"];_74+=".";for(var i=0;i<this.decimalPlaces;i++){_74+="0";}}}}if(this.isNumber(_74)&&this.fractional&&this.decimalPlaces>0&&!(new RegExp("^[+-]?.+[.,]\\d{"+this.decimalPlaces+"}$").test(_72))){this.invalidMessage=this.bundle.getMessage("decimalPlacesMessage",{value:this.decimalPlaces});return false;}if(this.isNumber(_74)&&this.numberType=="byte"&&(_74>127||_74<-128)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:127,min:-128});return false;}if(this.isNumber(_74)&&this.numberType=="short"&&(_74>32767||_74<-32768)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:32767,min:-32768});return false;}if(this.isNumber(_74)&&this.numberType=="int"&&(_74>2147483647||_74<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_74)&&this.numberType=="integer"&&(_74>2147483647||_74<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_74)&&this.numberType=="long"&&(_74>9223372036854776000||_74<-9223372036854776000)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:9223372036854776000,min:-9223372036854776000});return false;}if(_74.toString().replace(new RegExp(".","g"),"").length>16){this.invalidMessage=this.bundle.getMessage("numberOutOfRange");return false;}return this.inherited(arguments);},_setValueAttr:function(_75,_76,_77){if(typeof _75==="string"&&_75!==""){var _78=Number(_75);if(isNaN(_78)&&_75&&_75!=""){var _79={};if(this.constraints["pattern"]){_79["pattern"]=this.constraints["pattern"];}_75=this.parse(_75,_79);}else{_75=_78;}}this.inherited(arguments);},create:function(_7a,_7b){this.inherited(arguments);var _7c=dojo.attr(_7b,"value");if(_7c&&_7c!=""){var _7d={};if(this.constraints["pattern"]){_7d["pattern"]=this.constraints["pattern"];}_7a.value=this.parse(_7c,_7d);if(isNaN(_7a.value)){_7a.value=Number(_7c);}this.set("value",_7a.value);}},serialize:function(val,_7e){return this.format(val,_7e);}});}if(!dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]){dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]=true;dojo.provide("com.ibm.btt.dijit.CurrencyTextBox");dojo.declare("com.ibm.btt.dijit.CurrencyTextBox",[com.ibm.btt.dijit.NumberTextBox,dijit.form.CurrencyTextBox],{decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);this.decimalPlaces=this.constraints.places;},serialize:function(val,_7f){return isNaN(val)?"":(val.toString?val.toString():"");}});}if(!dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]){dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]=true;dojo.provide("com.ibm.btt.dijit.DateTextBox");dojo.declare("com.ibm.btt.dijit.DateTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.DateTextBox],{maximumDate:"",minimumDate:"",locale:dojo.locale,pattern:"",postMixInProperties:function(){this.inherited(arguments);this.lang=this.locale;this.constraints.locale=this.locale;if(this.minimumDate!=""){if(this.isToday(this.minimumDate)){this.constraints.min=this.parseToday(this.minimumDate);}else{this.constraints.min=dojo.date.stamp.fromISOString(this.minimumDate);}}if(this.maximumDate!=""){if(this.isToday(this.maximumDate)){this.constraints.max=this.parseToday(this.maximumDate);}else{this.constraints.max=dojo.date.stamp.fromISOString(this.maximumDate);}}if(this.pattern!=""){this.constraints.datePattern=this.pattern;}},create:function(_80,_81){if(_80.value==null){if(_81.value!=null&&_81.value!=""&&_80.pattern!=null&&_80.pattern!=""){try{var _82={selector:"date",datePattern:_80.pattern,fullYear:true};var val=dojo.date.locale.parse(_81.value,_82);_80.value=val;}catch(e){}}}this.inherited(arguments);},serialize:function(val,_83){if(val.toGregorian){val=val.toGregorian();}if(this.pattern!=""){return this.format(val,_83);}else{return dojo.date.stamp.toISOString(val,_83);}},isToday:function(_84){if(_84.replace(" ","").toLowerCase().indexOf("today")>-1){return true;}else{return false;}},parseToday:function(_85){var _86=_85.replace("today","");var _87="";var _88=0;var _89=0;var day=0;var _8a=new Date();_8a.setHours(0);_8a.setMinutes(0);_8a.setSeconds(0);_8a.setMilliseconds(0);if(_86.indexOf("+")>-1){_87="plus";_86=_86.replace("+","#");}if(_86.indexOf("-")>-1){_87="sub";_86=_86.replace("-","#");}if(_86.indexOf("y")>-1){_88=_86.substring(_86.lastIndexOf("#")+1,_86.indexOf("y"));_86=_86.replace("y","#");}if(_86.indexOf("m")>-1){_89=_86.substring(_86.lastIndexOf("#")+1,_86.indexOf("m"));_86=_86.replace("m","#");}if(_86.indexOf("d")>-1){day=_86.substring(_86.lastIndexOf("#")+1,_86.indexOf("d"));}if("plus"==_87){_8a=dojo.date.add(_8a,"year",+_88);_8a=dojo.date.add(_8a,"month",+_89);_8a=dojo.date.add(_8a,"day",+day);}else{_8a=dojo.date.add(_8a,"year",-_88);_8a=dojo.date.add(_8a,"month",-_89);_8a=dojo.date.add(_8a,"day",-day);}return _8a;},_setValueAttr:function(_8b,_8c,_8d){if(typeof (_8b)=="string"||_8b instanceof String){var val=null;if(this.pattern==""){_8b=dojo.date.stamp.fromISOString(_8b);}else{var _8e={selector:"date",datePattern:this.pattern,fullYear:true};_8b=dojo.date.locale.parse(_8b,_8e);}}this.inherited(arguments);},_getValueAttr:function(){if(this.textbox.value==""){return null;}else{return this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.util.AjaxUtil"]){dojo._hasResource["com.ibm.btt.util.AjaxUtil"]=true;dojo.provide("com.ibm.btt.util.AjaxUtil");(function(){AjaxUtil={ajaxOperationUrl:"Ajax",constants:{"BTT_OPERATIONNAME":"dse_operationName","BTT_PAGEID":"dse_pageId","BTT_SESSIONID":"dse_sessionId","BTT_ERRORPAGE":"dse_errorPage","BTT_PROCESSORID":"dse_processorId"},xhrPost:function(_8f,_90){_8f.postData=dojo.toJson(_90);if(typeof _8f.url=="undefined"){_8f.url=this.ajaxOperationUrl;}if(typeof _8f.handleAs=="undefined"){_8f.handleAs="text";}if(typeof _8f.success=="undefined"){_8f.load=function(e){console.info("Ajax request response from ajax channel. "+e);};}else{_8f.load=_8f.success;delete _8f.success;}if(typeof _8f.error=="undefined"){_8f.error=function(e){console.info("Ajax request error. "+e);};}dojo.xhrPost(_8f);},prepareBTTParams:function(_91){var obj={};if(_91!=undefined){if(_91[this.constants.BTT_ERRORPAGE]){obj[this.constants.BTT_ERRORPAGE]=_91[this.constants.BTT_ERRORPAGE];}if(_91[this.constants.BTT_OPERATIONNAME]){obj[this.constants.BTT_OPERATIONNAME]=_91[this.constants.BTT_OPERATIONNAME];}if(_91[this.constants.BTT_PAGEID]){obj[this.constants.BTT_PAGEID]=_91[this.constants.BTT_PAGEID];}else{obj[this.constants.BTT_PAGEID]="-1";}if(_91[this.constants.BTT_PROCESSORID]){obj[this.constants.BTT_PROCESSORID]=_91[this.constants.BTT_PROCESSORID];}if(_91[this.constants.BTT_SESSIONID]){obj[this.constants.BTT_SESSIONID]=_91[this.constants.BTT_SESSIONID];}}return obj;}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractAjaxMixin");dojo.declare("com.ibm.btt.dijit.AbstractAjaxMixin",null,{_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Form"),bttParams:"",asyncCode:"",asyncStatus:0,asyncErrorMessage:"",asyncOperation:"",callAsyncOperation:function(_92,_93,_94,_95){var _96=this.get("value");var _97=dojo.fromJson(this.bttParams);_97[AjaxUtil.constants.BTT_OPERATIONNAME]=_92;_97=AjaxUtil.prepareBTTParams(_97);AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_93,_95),error:dojo.hitch(this,"_handleOperationError",_93),"timeout":_94},dojo.mixin(_96,_97));},_handleOperationResponse:function(_98,_99,_9a){try{var _9b=dojo.fromJson(_9a||null);_9a=_9b;}catch(e){this._handleHTMLResponse(_9a);return;}this.asyncCode=_98;var _9c=null;var _9d=null;var _9e=null;if(dojo.isArray(_9a)){_9c=_9a[0].data;if(_9a[0].validationError){_9d=_9a[0].singleFieldErrors;_9e=_9a[0].crossFieldErrors;}}else{_9c=_9a;}if(_9c){if(_99&&dijit.byId(_99)){dijit.byId(_99).set("value",_9c);}else{this.set("value",_9c);}}if((_9d&&_9d.length!=0)||(_9e&&_9e.length!=0)){var _9f=this._getWidgetMap();this._handleSingleFieldErrors(_9d,_9f);this._handleCrossFieldErrors(_9e,_9f);}this.onAsyncOK();},_handleHTMLResponse:function(_a0){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:_a0})).show();},_getWidgetMap:function(){var map={};dojo.forEach(this.getDescendants(),function(_a1){if(!_a1.name){return;}var _a2=map[_a1.name]||(map[_a1.name]=[]);_a2.push(_a1);});return map;},_handleSingleFieldErrors:function(_a3,_a4){if(_a3!=null){for(var i=0;i<_a3.length;i++){if(_a4[_a3[i].id]){var _a5=_a4[_a3[i].id];if(_a5){for(var j=0;j<_a5.length;j++){if(_a5[j].showErrorMessage){_a5[j].showErrorMessage(_a3[i].msg);}}}}}}},_handleCrossFieldErrors:function(_a6,_a7){if(_a6!=null){var _a8=_a7["dse_errorMessages"];if(_a8){for(var j=0;j<_a8.length;j++){_a8[j].displayMessageArray(_a6);}}}},setStoreData:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_a9){if(!_a9.name){return;}var _aa=map[_a9.name]||(map[_a9.name]=[]);_aa.push(_a9);});for(var _ab in map){if(!map.hasOwnProperty(_ab)){continue;}var _ac=map[_ab],_ad=dojo.getObject(_ab,false,obj);if(_ad===undefined){continue;}if(!dojo.isArray(_ad)){_ad=[_ad];}dojo.forEach(_ac,function(w,i){if(w.setStoreData){w.setStoreData(_ad[i]);}});}},_handleOperationError:function(_ae,_af){if(_af.dojoType==="timeout"){this.asyncCode=_ae;this.asyncStatus=0;this.asyncErrorMessage=_af.message;this.onAsyncTimeOut();}else{if(_af.status!==undefined){this.asyncCode=_ae;this.asyncStatus=_af.status;this.asyncErrorMessage=_af.message;this.onAsyncError();}}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},_getValueAttr:function(){var obj={};var _b0=this;dojo.forEach(this.getDescendants(),function(_b1){var _b2=_b1.name;if((!_b2||_b1.disabled||_b1.isNotSubmitted)&&(!_b1.storeDataName||!_b1.getEditableStroeData||((_b1 instanceof com.ibm.btt.dijit.Grid)&&_b1.readOnly))){return;}if(typeof (_b1.ajaxSubmit)!="undefined"&&_b1.ajaxSubmit==false){return;}if(_b1.storeDataName&&_b1.getEditableStroeData&&((_b1 instanceof com.ibm.btt.dijit.Grid)&&_b1.editable&&!_b1.readOnly)&&_b1.getEditableStroeData()){dojo.setObject(_b1.storeDataName,_b0._convertValueToString(_b1.getEditableStroeData()),obj);}var _b3=_b1.get("value");if(_b3===undefined){return;}if((_b1 instanceof com.ibm.btt.dijit.Grid)&&(_b3==null||_b3==undefined)){return;}if(_b3==null){_b3="";}if(typeof _b1.checked!=="undefined"){if(/Radio/.test(_b1.declaredClass)){if(_b3!==false){dojo.setObject(_b2,_b0._convertValueToString(_b3),obj);}else{_b3=dojo.getObject(_b2,false,obj);if(_b3===undefined){dojo.setObject(_b2,null,obj);}}}else{if(_b3!==false){dojo.setObject(_b2,_b0._convertValueToString(_b3),obj);}}}else{if(typeof _b3=="number"&&_b1.serialize){_b3=_b1.serialize(_b3,_b1.constraints);}else{if(_b3!=null&&_b3 instanceof Date){if(_b1.serialize){_b3=_b1.serialize(_b3,_b1.constraints);}else{_b3=_b3.getFullYear()+"-"+(_b3.getMonth()+1)+"-"+_b3.getDate();}}}_b3=_b0._convertValueToString(_b3);var _b4=dojo.getObject(_b2,false,obj);if(typeof _b4!="undefined"){if(dojo.isArray(_b4)){_b4.push(_b3);}else{dojo.setObject(_b2,[_b4,_b3],obj);}}else{dojo.setObject(_b2,_b3,obj);}}});return obj;},_convertValueToString:function(_b5){if(_b5===null){return null;}if(typeof _b5==="string"){return _b5;}else{if(typeof _b5==="number"||typeof _b5==="boolean"){return String(_b5);}else{if(typeof _b5==="object"){if(dojo.isArray(_b5)){for(var i=0;i<_b5.length;i++){_b5[i]=arguments.callee(_b5[i]);}}else{for(var p in _b5){_b5[p]=arguments.callee(_b5[p]);}}return _b5;}else{return null;}}}},_setValueAttr:function(obj){var map={};var _b6={};dojo.forEach(this.getDescendants(),function(_b7){if(_b7.storeDataName){var _b8=_b6[_b7.storeDataName]||(_b6[_b7.storeDataName]=[]);_b8.push(_b7);}if(!_b7.name){return;}var _b9=map[_b7.name]||(map[_b7.name]=[]);_b9.push(_b7);});for(var _ba in _b6){var _bb=_b6[_ba];var _bc=dojo.getObject(_ba,false,obj);if(_bc!==undefined){dojo.forEach(_bb,function(w,i){w.setStoreData(i==0?_bc:dojo.clone(_bc));});}}for(var _ba in map){if(!map.hasOwnProperty(_ba)){continue;}var _bb=map[_ba],_bd=dojo.getObject(_ba,false,obj);if(_bd===undefined){continue;}if(!dojo.isArray(_bd)){_bd=[_bd];}if(typeof _bb[0].checked!=="undefined"){dojo.forEach(_bb,function(w,i){w.set("value",dojo.indexOf(_bd,w.value)!=-1);});}else{if(_bb[0].multiple){_bb[0].set("value",_bd);}else{dojo.forEach(_bb,function(w,i){w.set("value",_bd[i]);});}}}},validValue:null,_getValidValueAttr:function(){var obj={};var _be=this;dojo.forEach(this.getDescendants(),function(_bf){var _c0=_bf.name;if((!_c0||_bf.disabled||_bf.isNotSubmitted)&&(!_bf.storeDataName||!_bf.getEditableStroeData||((_bf instanceof com.ibm.btt.dijit.Grid)&&_bf.readOnly&&!_bf.disabled))){return;}if(_bf.state&&!(_bf.get("state")==""||_bf.get("state")=="Normal")){return;}if(typeof (_bf.ajaxSubmit)!="undefined"&&_bf.ajaxSubmit==false){return;}if(_bf.storeDataName&&_bf.getEditableStroeData&&((_bf instanceof com.ibm.btt.dijit.Grid)&&!_bf.readOnly)){var _c1=_bf.getEditableStroeData();if(_c1){dojo.setObject(_bf.storeDataName,_be._convertValueToString(_c1),obj);}}var _c2=_bf.get("value");if(_c2===undefined){return;}if(_c2==null){_c2="";}if(typeof _bf.checked!=="undefined"){if(/Radio/.test(_bf.declaredClass)){if(_c2!==false){dojo.setObject(_c0,_be._convertValueToString(_c2),obj);}else{_c2=dojo.getObject(_c0,false,obj);if(_c2===undefined){dojo.setObject(_c0,null,obj);}}}else{if(_c2!==false){dojo.setObject(_c0,_be._convertValueToString(_c2),obj);}}}else{if(typeof _c2=="number"&&_bf.serialize){_c2=_bf.serialize(_c2,_bf.constraints);}else{if(_c2!=null&&_c2 instanceof Date){if(_bf.serialize){_c2=_bf.serialize(_c2,_bf.constraints);}else{_c2=_c2.getFullYear()+"-"+(_c2.getMonth()+1)+"-"+_c2.getDate();}}}_c2=_be._convertValueToString(_c2);if(_bf.type!=="hidden"&&((_bf.params.value&&_bf.params.value==_c2)||(!_bf.params.value&&""==_c2))){return;}var _c3=dojo.getObject(_c0,false,obj);if(typeof _c3!="undefined"){if(dojo.isArray(_c3)){_c3.push(_c2);}else{dojo.setObject(_c0,[_c3,_c2],obj);}}else{dojo.setObject(_c0,_c2,obj);}}});return obj;}});}if(!dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]){dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]=true;dojo.provide("com.ibm.btt.dijit._FormXValidationMixin");dojo.declare("com.ibm.btt.dijit._FormXValidationMixin",null,{xValidations:[],xValid:true,_xHintWidget:null,getPW:function(id,_c4){var _c5=dijit.byId(id).get(_c4);return _c5;},getW:function(id){return dijit.byId(id);},runWF:function(id,_c6,_c7){var _c8=dijit.byId(id);var _c9=[];for(var i=2;i<arguments.length;i++){_c9[i-2]=arguments[i];}var _ca=_c8[_c6].apply(_c8,_c9);return _ca;},xValidate:function(_cb){if(!_cb||_cb.length==0){return "";}var _cc=null;for(var i=0;i<_cb.length;i++){if(!_cb[i].cond.call(this)){_cc=_cb[i];break;}}return _cc;},_getActiveXValidationsForWidget:function(_cd){return this._getActiveXValidations(this._getXValidationRuleByWidget(_cd),_cd);},_getActiveXValidations:function(_ce,_cf){return dojo.filter(_ce,function(_d0){return dojo.every(_d0.widgets,function(id){return ((id==_cf)||(id!=_cf&&dijit.byId(id).get("value")!=""));});});},_getXValidationRuleByWidget:function(_d1){var _d2=dojo.filter(this.xValidations,function(_d3){return dojo.indexOf(_d3.widgets,_d1)>=0;});return _d2;},showXValidationMsg:function(_d4,_d5){if(_d5){this._hideXHint();this._xHintWidget=_d5;dijit.showTooltip(this.getI18NString(_d4),_d5.domNode);}},_hideXHint:function(){if(this._xHintWidget){_xHintWidget=null;dijit.hideTooltip(this._xHintWidget.domNode);}},destroy:function(){this.inherited(arguments);this._hideXHint();}});}if(!dojo._hasResource["com.ibm.btt.dijit.Form"]){dojo._hasResource["com.ibm.btt.dijit.Form"]=true;dojo.provide("com.ibm.btt.dijit.Form");dojo.declare("com.ibm.btt.dijit.Form",[dijit.form.Form,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin,com.ibm.btt.dijit._FormXValidationMixin],{bttErrorPage:"",validateOnSubmit:true,hiddenParamHandle:{},_isStarted:false,attributeMap:dojo.delegate(dijit.form.Form.prototype.attributeMap,{visibility:{node:"domNode"}}),create:function(){this.submitButton=new Array();this.submitButtonOS=new Array();this.inherited(arguments);this._events=[];this._events.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));},onLoaded:function(){},onFormSubmit:function(){},_setXValidationsAttr:function(_d6){this.xValidations=_d6;if(this.xValidate(this.xValidations)){this.xValid=false;this.setSubmitButtonState();}},_xValidateByWidget:function(_d7){var _d8=this.xValidate(this._getActiveXValidationsForWidget(_d7.get("id")));var _d9=_d7;if(!_d8){_d8=this.xValidate(this._getActiveXValidations(this.xValidations));_d9=_d8?dijit.byId(_d8.widgets[0]):_d7;}if(_d8){this.showXValidationMsg(_d8.hint,_d9);}var _da;if(_da=this.xValidate(this.xValidations)){if(!_d8){this.showXValidationMsg(_da.hint,dijit.byId(_da.widgets[0]));}this.xValid=false;}else{this.xValid=true;this._hideXHint();}this.setSubmitButtonState();},fireWidgetBlurEvent:function(_db){this._xValidateByWidget(_db);},fireWidgetChangeEvent:function(_dc){this._xValidateByWidget(_dc);this.onWidgetChange();},onWidgetChange:function(){},connectChildren:function(_dd){this.inherited(arguments);var _de=this._childConnections;var _df=this;var _e0=this.getDescendants();dojo.forEach(dojo.filter(_e0,function(_e1){return _e1.onChange;}),function(_e2){_de.push(_df.connect(_e2,"onChange",dojo.hitch(_df,"fireWidgetChangeEvent",_e2)));_de.push(_df.connect(_e2,"onBlur",dojo.hitch(_df,"fireWidgetBlurEvent",_e2)));});},_onWidgetValidateStatesChange:function(_e3){if(this.isValid()&&!this.xValid){if((inValidRule=this.xValidate(this.xValidations))){this.xValid=false;this.showXValidationMsg(inValidRule.hint,dijit.byId(inValidRule.widgets[0]));}else{this.xValid=true;this._hideXHint();}}this.setSubmitButtonState();},onSubmit:function(e){var _e4=this._querySubmitButton(e);this.handleButtonSubmit(_e4);if(this.validateOnSubmit){if(!this.isValid()||!this.xValid){return false;}}dojo.forEach(this.getDescendants(),function(_e5){if(_e5.onFormSubmit){_e5.onFormSubmit();}});if(this.onFormSubmit){this.onFormSubmit();}return true;},_querySubmitButton:function(e){if(this._lastClickedButton){return this._lastClickedButton;}},setSubmitButtonState:function(){if(this.validateOnSubmit){if((this.get("state")==""||this.get("state")=="Normal")&&this.xValid){for(var i=0;i<this.submitButton.length;i++){var btn=this.submitButton[i];btn.set("disabled",btn.get("inValid"));}}else{for(var i=0;i<this.submitButton.length;i++){this.submitButton[i].set("disabled",true);}}}},handleButtonSubmit:function(_e6){if(_e6&&_e6.bttParams&&_e6.bttParams!=""){this.parameterHandler(_e6.bttParams);}},startup:function(){if(this._isStarted){return;}this._isStarted=true;this.inherited(arguments);var _e7=this;watches=this._childWatches;var _e8=this._childConnections;dojo.forEach(dojo.filter(this.getDescendants(),function(_e9){return _e9.get("type")&&_e9.get("type").toLowerCase()=="submit";}),function(_ea){_e7.submitButton.push(_ea);_e7.submitButtonOS.push(_ea.attr("disabled"));watches.push(_ea.watch("isValid",function(_eb,_ec,_ed){_e7.setSubmitButtonState();}));});if(this.bttParams!=null&&this.bttParams!=""){this.parameterHandler(this.bttParams);}if(this.bttErrorPage!=null&&this.bttErrorPage!=""){this.errorPageHandler();}this.watch("state",this._onWidgetValidateStatesChange);this.onWidgetChange();this.setSubmitButtonState();},parameterHandler:function(e){var _ee=dojo.fromJson(e);this.destroyHiddenParams();for(var _ef in _ee){if(typeof (_ef)!="undefined"){var _f0=_ee[_ef];this.hiddenParamHandle[_ef]=dojo.create("input",{type:"hidden",name:_ef,value:_f0});dojo.place(this.hiddenParamHandle[_ef],this.containerNode,"last");}}},destroyHiddenParams:function(){for(var _f1 in this.hiddenParamHandle){dojo.destroy(this.hiddenParamHandle[_f1]);}this.hiddenParamHandle={};},errorPageHandler:function(){var _f2=dojo.create("input",{type:"hidden",name:AjaxUtil.constants["BTT_ERRORPAGE"],value:this.bttErrorPage});dojo.place(_f2,this.containerNode,"last");},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var _f3=evt.target;if(evt.charOrCode===dk.ENTER){while(_f3){if(_f3==this.domNode){if(this.bttParams&&this.bttParams!=""){this.submit();}else{return false;}}_f3=_f3.parentNode;}}}},destroy:function(){this.destroyHiddenParams();this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Image"]){dojo._hasResource["com.ibm.btt.dijit.Image"]=true;dojo.provide("com.ibm.btt.dijit.Image");dojo.declare("com.ibm.btt.dijit.Image",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<img >",location:"",width:"",height:"",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{location:{node:"domNode",type:"attribute",attribute:"src"},width:{node:"domNode",type:"attribute"},height:{node:"domNode",type:"attribute"},visibility:{node:"domNode"}}),_setLocationAttr:function(_f4){this.location=_f4;this.domNode.src=_f4;},_setWidthAttr:function(_f5){if(_f5!=""){this.width=_f5;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_f6){if(_f6!=""){this.height=_f6;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Label"]){dojo._hasResource["com.ibm.btt.dijit.Label"]=true;dojo.provide("com.ibm.btt.dijit.Label");dojo.declare("com.ibm.btt.dijit.Label",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<label class='dijitLabelBase' dojoAttachPoint='labelContainer' ${nameAttrSetting} ></label>",text:"",name:"","for":"",width:"",height:"",textWrap:false,isNotSubmitted:true,fieldReference:"",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},"for":{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(this.hint==undefined||this.hint==null||this.hint==""){this.set("hint",this.text);}},_setTextAttr:function(_f7){this.text=_f7;this.domNode.innerHTML=this.getI18NString(_f7);},_setTextWrapAttr:function(_f8){this.textWrap=_f8;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setValueAttr:function(_f9){this.set("text",_f9);},_getValueArrt:function(_fa){return this.get("text");},_setForAttr:function(_fb){this.domNode.htmlFor=_fb;},_setWidthAttr:function(_fc){if(this.width!=""){this.width=_fc;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_fd){if(this.height!=""){this.height=_fd;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.RadioButton"]){dojo._hasResource["com.ibm.btt.dijit.RadioButton"]=true;dojo.provide("com.ibm.btt.dijit.RadioButton");dojo.declare("com.ibm.btt.dijit.RadioButton",[dijit.form.RadioButton,com.ibm.btt.dijit.AbstractWidgetMixin],{isChecked:false,text:"",visibility:"visible",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.RadioButton.prototype.attributeMap,{text:{node:"labelNode"},isChecked:{node:"domNode"},visibility:{node:"domNode"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},_setIsCheckedAttr:function(_fe){this.set("checked",_fe);},_setCheckedAttr:function(_ff){if(_ff==false||_ff=="false"||_ff==""){this.isChecked=false;}else{this.isChecked=true;}this.inherited(arguments);},_setTextAttr:function(_100){this.text=_100;this.labelNode.innerHTML=this.getI18NString(_100);},_setStyleAttr:function(_101){dojo.attr(this.labelNode,"style",_101);},_setClassAttr:function(_102){dojo.attr(this.labelNode,"class",_102);},_setHintAttr:function(_103){this.hint=_103;var _104=StringUtil.removeWarp(this.getI18NString(_103));this.domNode.title=_104;this.labelNode.title=_104;},_setVisibilityAttr:function(_105){this.visibility=_105;if(_105==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_105==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_106){this.inherited(arguments);if(_106==="true"||_106===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_onClick:function(e){this.inherited(arguments);if(dojo.isIE&&this.readOnly&&this.focusNode.form){dojo.stopEvent(e);dojo.query("INPUT[type=radio]",this.focusNode.form).forEach(dojo.hitch(this,function(_107){if(_107.name==this.name&&_107.form==this.focusNode.form){var _108=dijit.getEnclosingWidget(_107);if(_108&&"checked" in _108){_108.set("checked",_108.checked);}}}));}},_setTextWrapAttr:function(_109){this.textWrap=_109;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_10a){if(this.width!=""){this.width=_10a;var _10b=_10a.replace(new RegExp("px","gm"),"");try{_10b=Number(_10b);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_10a+" to number.");return;}var box=dojo.marginBox(this.domNode);var _10c=_10b-box.w;if(_10c<0){_10c=0;}dojo.style(this.labelNode,"width",_10c+"px");}},_setHeightAttr:function(_10d){if(this.height!=""){this.height=_10d;var _10e=_10d.replace(new RegExp("px","gm"),"");try{_10e=Number(_10e);}catch(e){console.error("Illegal input argument. Can not convert input height:"+_10d+" to number.");return;}var box=dojo.marginBox(this.domNode);var _10f=_10e-box.h;if(_10f<0){_10f=0;}dojo.style(this.labelNode,"height",_10f+"px");}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]){dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]=true;dojo.provide("com.ibm.btt.dijit.RichTextEditor");dojo.declare("com.ibm.btt.dijit.RichTextEditor",[dijit.Editor,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",readOnly:false,attributeMap:dojo.delegate(dijit.Editor.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},readOnly:{node:"domNode"}}),_setReadOnlyAttr:function(_110){this.set("disabled",_110);},_getReadOnlyAttr:function(){return this.get("disabled");},postCreate:function(){var _111=this.name;this.inherited(arguments);this._setWidthAttr(this.width);this._setHintAttr(this.hint);this._setVisibilityAttr(this.visibility);this.resetContent=this.get("savedContent");if(_111==""||_111==null||_111==undefined){this.name=null;}},_setWidthAttr:function(_112){if(_112!=""){this.width=_112;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHintAttr:function(_113){this.hint=_113;if(typeof (this.editingArea)!="undefined"&&this.editingArea!=null){this.editingArea.parentNode.title=StringUtil.removeWarp(this.getI18NString(_113));}},_getValueAttr:function(){var _114=this.inherited(arguments);if(dojo.isFF&&(_114=="<br _moz_editor_bogus_node=\"TRUE\" />"||_114=="<br />")){return "";}else{return _114;}},reset:function(e){this.set("value",this.resetContent);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Select"]){dojo._hasResource["com.ibm.btt.dijit.Select"]=true;dojo.provide("com.ibm.btt.dijit.Select");dojo.declare("com.ibm.btt.dijit.Select",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.FilteringSelect,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",width:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.FilteringSelect.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){if(this.params.value){this.value=this.params.value;this._lastValueReported=this.params.value;this._resetValue=this.params.value;}this.loadStoreFromURL(this.storeURL);}this._setWidthAttr(this.width);},postMixInProperties:function(){var root=this.srcNodeRef;var _115={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _116=this;dojo.query("> option",root).forEach(dojo.hitch(this,function(node,i){var item={};item[this.storeDataFormat.itemLabel]=_116.getI18NString(dojo.trim(node.innerHTML));var _117=dojo.attr(node,"value");if(_117==""){_117="#";}item[this.storeDataFormat.itemValue]=_117;_115.items.push(item);}));if(_115.items.length==0&&this.storeData){if(typeof this.storeData=="string"){this.storeData=dojo.fromJson(this.storeData);}_115=this._formatStoreData(this.storeData);}_115=this.prepareStoreData(_115);this.item=null;if(this.params.value){for(var i=0;i<_115.items.length;i++){if(this.params.value==_115.items[i].value){this.item=_115.items[i];}}}if(_115.items.length==0){var item={};item[this.storeDataFormat.itemValue]="#";item[this.storeDataFormat.itemLabel]="";_115.items.push(item);this._lastValueReported="#";this.value="#";}if(!this.item){this.item=_115.items[0];this.value=this.item.value;this._lastValueReported=this.item.value;}this.store=new dojo.data.ItemFileReadStore({data:_115});this.inherited(arguments);},_setStoreDataAttr:function(_118){if(typeof _118=="string"){_118=dojo.fromJson(_118);}this.storeData=_118;},setStoreData:function(data){this._onChangeActive=false;var _119=this.prepareStoreData(this._formatStoreData(data));this.store.clearOnClose=true;this.store.data=_119;this.searchAttr=_119.label;this.store.close();this.set("value",this.value);this._setBlurValue();this._onChangeActive=true;},prepareStoreData:function(data){return data;},_formatStoreData:function(data){var _11a={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(data instanceof Array){for(var i=0;i<data.length;i++){if(data[i]!=null&&data[i][this.valueField]!=null&&data[i][this.labelField]!=null){var item={};item[this.storeDataFormat.itemValue]=data[i][this.valueField];item[this.storeDataFormat.itemLabel]=this.getI18NString(data[i][this.labelField]);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_11a.items.push(item);}}}else{if(data instanceof Object){for(var p in data){if(data[p]!=null){var item={};item[this.storeDataFormat.itemValue]=data[p];item[this.storeDataFormat.itemLabel]=this.getI18NString(p);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_11a.items.push(item);}}}}return _11a;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _11b={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_11b);},_handleStoreLoadingResponse:function(data){this.setStoreData(data);this.onAsyncOK();},_setVisibilityAttr:function(_11c){this.visibility=_11c;var _11d;if(typeof (this.domNode.children)!="undefined"&&typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_11d=this.domNode.children[0].children[1];}else{_11d=null;}if(_11c=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_11d!=null){dojo.style(_11d,"visibility","");}}else{if(_11c=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_11d!=null){dojo.style(_11d,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_11d!=null){dojo.style(_11d,"visibility","");}}}},_setWidthAttr:function(_11e){if(_11e!=""){this.width=_11e;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setValueAttr:function(_11f){var _120=false;this.store.fetchItemByIdentity({identity:_11f,onItem:function(item){if(item){_120=true;}}});var _121=this.store._getItemsArray();if(_121){dojo.some(_121,function(item){if(item.value&&item.value[0]&&item.value[0]==_11f){_120=true;return false;}});}if(!_120){var _121=this.store._getItemsArray();if(_121.length==0){_11f="";}else{var id=this.store.getIdentity(_121[0]);this.store.fetchItemByIdentity({identity:id,onItem:dojo.hitch(this,function(item){if(item){_120=true;_11f=item.value&&item.value[0]?item.value[0]:null;this.set("item",item);}})});}this.value=_11f;this._lastValueReported=_11f;}this.inherited(arguments);},_getValueAttr:function(){var _122=this.inherited(arguments);if(_122==null||_122=="#"){return "";}else{return _122;}},_setItemAttr:function(){this.inherited(arguments);this.valueNode.value=this.get("value");}});}if(!dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]){dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]=true;dojo.provide("com.ibm.btt.dijit.StringTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.StringTextBox",[com.ibm.btt.dijit.ValidationTextBox],{maximumLength:NaN,minimumLength:NaN,validCharacters:"",password:false,postMixInProperties:function(){this.inherited(arguments);if(this.password){this.type="password";}},postCreate:function(){this.inherited(arguments);this.attr("value",this.attr("value"));},validator:function(_123,_124){var _125=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(this.attr("value")!=""&&(!isNaN(this.minimumLength))&&this.attr("value").length<this.minimumLength){this.invalidMessage=_125.getMessage("stringMinMessage",{value:this.minimumLength});return false;}else{if(this.attr("value")!=""&&(!isNaN(this.maximumLength))&&this.attr("value").length>this.maximumLength){this.invalidMessage=_125.getMessage("stringMaxMessage",{value:this.maximumLength});return false;}else{return this.inherited(arguments);}}},_setValueAttr:function(_126){if(_126!=null&&_126!=undefined){_126=this.getI18NString(_126);_126=_126.replace(/&amp;/g,"&").replace(/&lt;/g,"<");this.value=_126;this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TextArea"]){dojo._hasResource["com.ibm.btt.dijit.TextArea"]=true;dojo.provide("com.ibm.btt.dijit.TextArea");dojo.declare("com.ibm.btt.dijit.TextArea",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.SimpleTextarea],{width:"",height:"",attributeMap:dojo.delegate(dijit.form.SimpleTextarea.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},height:{node:"domNode"}}),validator:function(_127,_128){if(!(!this.required||!this._isEmpty(_127))){return false;}return true;},_setVisibilityAttr:function(_129){this.visibility=_129;if(_129=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}else{if(_129=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_setWidthAttr:function(_12a){if(_12a!=""){this.width=_12a;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_12b){if(_12b!=""){this.height=_12b;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setValueAttr:function(_12c){_12c=this.getI18NString(_12c);this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Tree"]){dojo._hasResource["com.ibm.btt.dijit.Tree"]=true;dojo.provide("com.ibm.btt.dijit.Tree");dojo.declare("com.ibm.btt.dijit.Tree",[dijit.Tree,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",name:"",storeData:null,showRoot:false,value:"",_selectedItem:null,width:"",height:"",persist:false,templateString:dojo.cache("com.ibm.btt.dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" waiRole=\"tree\" style=\"overflow:auto\"\r\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\r\n\t<input type=\"hidden\" dojoAttachPoint=\"formNode\"/>\r\n</div>\r\n"),attributeMap:dojo.delegate(dijit.Tree.prototype.attributeMap,{visibility:{node:"domNode"},name:{node:"formNode"},value:{node:"formNode"},width:{node:"formNode"},height:{node:"formNode"}}),postMixInProperties:function(){this.inherited(arguments);this.loadStoreData();},postCreate:function(){this.inherited(arguments);this.treeEvents=[];var _12d=this;this.treeEvents.push(dojo.connect(this,"onClick",this,function(item){_12d.set("value",item.id[0]);}));this._lastValue=this.value;},onLoad:function(){this.inherited(arguments);this._expandNode(this.tree.rootNode.getChildren()[0],false);this.reset();if(this.value!=""){var _12e=this.value.split(".");var _12f=_12e[0];for(var i=1;i<_12e.length;i++){var n=this._itemNodesMap[_12f];if(n){this._expandNode(n[0],false);}_12f+="."+_12e[i];}var _130=this._itemNodesMap[this.value];this._expandNode(_130[0],false);_130[0].setSelected(true);}},_parseStoreData:function(_131,data){this.firstSelectedItem=null;var _132=[];for(var name in data){var item={};if(_131!=null&&typeof (_131.id)!="undefined"){item.id=_131.id+"."+name;}else{item.id=name;}item.label=data[name]["label"];item.value=data[name]["value"];if(data[name]["children"]){item.children=this._parseStoreData(item,data[name]["children"]);}_132.push(item);}return _132;},getLabel:function(item){return I18nUtil.getI18nString(this.inherited(arguments));},loadStoreData:function(){var _133=this._parseStoreData(null,this.storeData);if(!this.model){var data={"identifier":"id","label":"label","items":_133};var _134=new dojo.data.ItemFileWriteStore({"data":data});this.model=new dijit.tree.ForestStoreModel({"store":_134});}else{var tree=this;var _134=this.model.store;this.model.store.fetch({queryOptions:{deep:true},onComplete:function(_135,_136){for(var i=_135.length-1;i>=0;i--){_134.deleteItem(_135[i]);}}});_134.save();(function(_137,_138){for(var i=0;i<_137.length;i++){var _139;if(_137[i].children&&_137[i].children.length){_139=_137[i].children;_137[i].children=[];}else{_139=null;}if(_138){var _13a=_134.newItem(_137[i],{parent:_138,attribute:"children"});}else{var _13a=_134.newItem(_137[i]);}if(_139){arguments.callee(_139,_13a);}}})(_133);_134.save();}},setStoreData:function(data){var _13b={};_13b[this.storeDataName]=data;this.storeData=_13b;this.loadStoreData();if(this.dndController){this.dndController.destroy();var _13c={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_13c[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController.constructor(this,_13c);}this.set("paths",[]);},destroy:function(){this.inherited(arguments);for(var i=0;this.treeEvents.length;i++){dojo.disconnect(this.treeEvents.pop());}this.treeEvents=null;},_setValueAttr:function(_13d){dojo.forEach(this.get("selectedNodes"),function(_13e){_13e.setSelected(false);});if(this._lastValue){var node=this._itemNodesMap[this._lastValue];if(node){node[0].setSelected(false);}}this.set("paths",[]);var _13f=this._itemNodesMap[_13d];this.value=_13d;this.formNode.value=_13d;if(_13f){this.set("selectedNodes",_13f);this._selectedItem=_13f[0].item;}},getSelectedLabel:function(){if(this._selectedItem){return this._selectedItem.label[0];}else{return undefined;}},getSelectedLabelNLS:function(){if(this._selectedItem){return I18nUtil.getI18nString(this._selectedItem.label[0]);}else{return undefined;}},getSelectedValue:function(){if(this._selectedItem){return this._selectedItem.value[0];}else{return undefined;}},isFocusable:function(){return (!this.disabled)&&(!this.readOnly)&&(dojo.style(this.domNode,"display")!=="none")&&(dojo.style(this.domNode,"visibility")!=="hidden");},reset:function(){this.inherited(arguments);if(this.params.value){this.set("value",this.params.value);}else{this.set("value","");}},getTooltip:function(item){var tip=this.getI18NString(this.hint);if(tip==undefined){tip="";}this.hint=tip;return tip;},_setHintAttr:function(_140){this.hint=_140;var _141=StringUtil.removeWarp(this.getI18NString(_140));this.domNode.title=_141;if(this.rootNode){this._setHintForAllChild(this.rootNode,_141);}},_setHintForAllChild:function(root,hint){var _142=this;root.set("tooltip",hint);root.set("hint",hint);if(root.hasChildren()){dojo.forEach(root.getChildren(),function(_143,idx){_142._setHintForAllChild(_143,hint);});}},_setWidthAttr:function(_144){if(_144!=""){this.width=_144;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_145){if(_145!=""){this.height=_145;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setVisibilityAttr:function(_146){this.inherited(arguments);this.resize();}});}if(!dojo._hasResource["com.ibm.btt.event._ConditionMixin"]){dojo._hasResource["com.ibm.btt.event._ConditionMixin"]=true;dojo.provide("com.ibm.btt.event._ConditionMixin");dojo.declare("com.ibm.btt.event._ConditionMixin",null,{_conditionMap:{},registerCond:function(url){if(url){var _147={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadCond"),error:dojo.hitch(this,"_loadCondError",url)};dojo.xhrGet(_147);}else{console.error("The argument can not be null.");}},_loadCond:function(cond){if(cond){for(var name in cond){if(name&&cond[name]&&typeof (cond[name])=="function"){this._conditionMap[name]=cond[name];}}}},_loadCondError:function(url,_148){console.error("Fail to load the condition on "+url+", error : "+_148);},executeCond:function(){var name=arguments[0];var args=[];var _149=Number(arguments.length);var i=1;while(i<_149){args.push(arguments[i]);i++;}try{if(this._conditionMap[name]){return this._conditionMap[name].apply(this,args);}else{console.error("Condition with specified name is not found. condition="+name);}}catch(e){console.error("An error occured while executing the condition "+name+", error "+e);}},executeDeprecatedCond:function(){var name=arguments[0];console.warn("The condition ["+name+"] is deprecated.");this.executeCond(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event.Engine"]){dojo._hasResource["com.ibm.btt.event.Engine"]=true;dojo.provide("com.ibm.btt.event.Engine");dojo.declare("com.ibm.btt.event.Engine",[com.ibm.btt.event._ConditionMixin],{monitor:null,_ruleEvents:[],_ruleMaps:{},setMonitor:function(_14a){this.monitor=_14a;},registerRules:function(_14b){this._formOnLoaded=[];for(var i=0;i<_14b.length;i++){if(_14b[i].evts){for(var j=0;j<_14b[i].evts.length;j++){this._registerEvent(_14b[i],_14b[i].evts[j]);}}if(_14b[i].type&&_14b[i].type=="AG"){this._ruleMaps[_14b[i].name]=_14b[i];}}for(var i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i].onLoaded){this._formOnLoaded[i].onLoaded();}}this._formOnLoaded=undefined;delete this._formOnLoaded;},_registerEvent:function(rule,_14c){var obj;if(_14c.id.lastIndexOf(".")==-1){obj=dijit.byId(_14c.id);}else{var _14d=_14c.id.substring(0,_14c.id.indexOf("."));var _14e=_14c.id.substring(_14c.id.indexOf(".")+1,_14c.id.length);obj=dijit.byId(_14d);if(obj&&obj.getWidget){obj=obj.getWidget(_14e);}else{console.error("Failed to register event '"+_14c.id+"', "+"parent widget mush provide getWidget(id) widget to support subwidget listening funcion.");return;}}var _14f=dojo.connect(obj,_14c.e,this,function(evt){if(this.monitor!=null){this.monitor.monitorStartRule(_14c,rule);}var _150=this._executeCondition(rule,evt);if(this.monitor!=null){this.monitor.monitorCondition(_14c,rule,_150);}this._executeAction(_150,rule,evt);if(this.monitor!=null){this.monitor.monitorEndRule(_14c,rule);}});if(_14c.e==="onLoaded"){var i;for(i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i]==obj){break;}}if(i==this._formOnLoaded.length){this._formOnLoaded.push(obj);}}this._ruleEvents.push(_14f);},_executeCondition:function(rule,evt){var _151=true;if(rule&&rule.cond){try{_151=rule.cond.call(this,evt);}catch(e){console.error("An error occured while ECA condition excuting."+e.toString());}}return _151;},_executeAction:function(_152,rule,evt){if(_152){if(rule.onTrue){try{rule.onTrue.call(this,evt);}catch(e){console.error("An error occured while ECA on true state excuting."+e.toString());}}}else{if(rule.onFalse){try{rule.onFalse.call(this,evt);}catch(e){console.error("An error occured while ECA on false state excuting."+e.toString());}}}},executeAG:function(name){if(name){var rule=this._ruleMaps[name];if(rule){if(this.monitor&&this.monitor.monitorStartAG){this.monitor.monitorStartAG(rule);}var _153=this._executeCondition(rule);if(this.monitor&&this.monitor.monitorAGCondition){this.monitor.monitorAGCondition(rule,_153);}this._executeAction(_153,rule);if(this.monitor&&this.monitor.monitorEndAG){this.monitor.monitorEndAG(rule);}}else{console.error("can not find corresponding action group with given name '"+name+"'");}}else{console.error("Input argument name to execute an action group can not be null or undefined or empty.");}},clearRules:function(){while(this._ruleEvents.length>0){dojo.disconnect(this._ruleEvents.pop());}this._ruleMaps={};},setPW:function(id,_154,_155){if(this.monitor!=null){this.monitor.monitorSetPropertyAction(id,_154,_155);}dijit.byId(id).set(_154,_155);},getPW:function(id,_156){var _157=dijit.byId(id).get(_156);if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_156,_157);}return _157;},getW:function(id){return dijit.byId(id);},runWF:function(id,_158,_159){var _15a=dijit.byId(id);var args=[];for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i];}var _15b=_15a[_158].apply(_15a,args);if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_158,args,_15b);}return _15b;},destroy:function(){this.clearRules();this._ruleEvents=undefined;this.monitor=undefined;this._ruleMaps=undefined;}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridDijit"]){dojo._hasResource["com.ibm.btt.dijit.GridDijit"]=true;dojo.provide("com.ibm.btt.dijit.GridDijit");dojo.declare("dojox.btt.grid.cells.BaseCellWidget",dojox.grid.cells._Widget,{createWidget:function(_15c,_15d,_15e){var _15f=this.inherited(arguments);var _160=this;_15f.watch("state",function(attr,_161,_162){_160.grid._set("state",_160.grid._getState());});return _15f;}});dojo.declare("dojox.btt.grid.cells.Label",dojox.btt.grid.cells.BaseCellWidget,{formatter:function(_163){return I18nUtil.getI18nString(_163);}});dojo.declare("dojox.btt.grid.cells.DateTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.DateTextBox,formatter:function(_164){if(_164==undefined||_164==null||_164==""||_164=="null"){return "";}if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}var date;if(typeof _164=="string"){if(this.widget&&this.widget.pattern){date=this.widget.parse(_164,this.widget.constraints);}else{var _165=this.widget.constraints;_165["datePattern"]="yyyy-MM-dd";date=this.widget.parse(_164,_165);}}else{date=_164;}return this.widget.format(date,this.widget.constraints);},getWidgetProps:function(_166){return dojo.mixin(this.inherited(arguments),{value:new Date(_166)});},setValue:function(_167,_168){if(_168==undefined||_168==null||_168==""||_168=="null"){this.widget.set("value",null);return;}if(this.widget){if(typeof _168=="string"){if(this.widget&&this.widget.pattern){this.widget.attr("value",this.widget.parse(_168,this.widget.constraints));}else{this.widget.attr("value",new Date(_168));}}else{this.widget.attr("value",_168);}}else{this.inherited(arguments);}},getValue:function(_169){if(this.widget.isValid()){var _16a=this.widget.get("value");if(_16a){return _16a;}else{return "";}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},formatNode:function(_16b,_16c){this.inherited(arguments);this.setValue(_16b,_16c);}});dojo.declare("dojox.btt.grid.cells.CurrencyTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CurrencyTextBox,formatter:function(_16d){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if(_16d===null){return "";}if(typeof _16d=="string"){_16d=Number(_16d);}this.widget.attr("value",_16d);return dojo.number.format(_16d,this.widget.constraints);},getWidgetProps:function(_16e){return dojo.mixin(this.inherited(arguments),{value:new Number(_16e)});},getValue:function(_16f){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.NumberTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.NumberTextBox,formatter:function(_170){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if(_170===null||_170===""){return "";}this.widget.set("value",_170);if(typeof _170=="string"){var _171=this.widget.parse(_170,this.widget.constraints);if(isNaN(_171)){_171=Number(_170);}if(isNaN(_171)){return _170;}else{return this.widget.format(_171,this.widget.constraints);}}else{return this.widget.format(_170,this.widget.constraints);}},getWidgetProps:function(_172){return dojo.mixin(this.inherited(arguments),{value:new Number(_172)});},getValue:function(_173){if(this.widget.isValid()){var _174=this.widget.get("value");if(isNaN(_174)){return "";}else{return _174;}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CheckBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CheckBox,getValue:function(){return this.widget.attr("value");},setValue:function(_175,_176){if(_176&&this.widget){if(_176.toString()==this.widget.checkedValue.toString()){this.widget.attr("isChecked",true);}else{this.widget.attr("isChecked",false);}}else{this.inherited(arguments);}},sizeWidget:function(_177,_178,_179){return;}});dojo.declare("dojox.btt.grid.cells.StringTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.StringTextBox,getValue:function(_17a){if(this.widget.isValid()){return this.widget.attr("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},formatter:function(_17b){return I18nUtil.getI18nString(_17b);}});dojo.declare("dojox.btt.grid.cells.ComboBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.ComboBox,getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");}});dojo.declare("dojox.btt.grid.cells.Select",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Select,comparator:function(_17c,_17d){var _17e=this.widget.store;var _17f=_17e._itemsByIdentity[_17c];var v1=_17f?_17f.label[0]:_17c;var _180=_17e._itemsByIdentity[_17d];var v2=_180?_180.label[0]:_17d;if(v1>v2){return 1;}else{if(v1<v2){return -1;}else{return 0;}}},formatter:function(_181){if(this.widget==null){this.widget=this.createWidget(dojo.create("div"),"");}if((_181===null)||(_181==="")){return "";}var _182=this.widget.store;var item=_182._itemsByIdentity[_181];if(item){this.widget.set("value",_181);return item.label[0];}else{return _181;}}});dojo.declare("dojox.btt.grid.cells.Image",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Image,formatter:function(_183){var html="<img src=\""+_183+"\"";if(this.widgetProps&&this.widgetProps.imageWidth){html+=" width=\""+this.grid.handleLenUint(this.widgetProps.imageWidth)+"\"";}if(this.widgetProps&&this.widgetProps.imageHeight){html+=" height=\""+this.grid.handleLenUint(this.widgetProps.imageHeight)+"\"";}html+="/>";return html;}});dojo.declare("dojox.btt.grid.cells.LabelFromList",dojox.btt.grid.cells.BaseCellWidget,{constructor:function(prop){var _184=this;if(prop.storeData){_184.storeData=prop.storeData;}else{var _185=prop.storeURL?prop.storeURL:prop.widgetProps.storeURL;if(_185){var _186={url:_185,handleAs:"json",sync:true,load:function(arg){_184.storeData=arg;},error:function(e){console.error("dojox.btt.grid.cells.LabelFromList: Failed to get the list file from "+_185);}};dojo.xhrGet(_186);}else{_184.storeData={};}}if(_184.storeData){var _187={};for(var key in _184.storeData){if(_184.storeData[key]!=null&&typeof (_184.storeData[key])!="undefined"){_187[_184.storeData[key]]=key;}}_184.storeData=_187;}},formatter:function(_188){if(this.storeData&&this.storeData[_188]){return "<label>"+I18nUtil.getI18nString(this.storeData[_188])+"</label>";}else{if(_188&&_188===null&&_188==="null"){return "";}else{return "<label>"+_188+"</label>";}}}});dojo.declare("dojox.btt.grid.cells._LinkMixin",null,{constructor:function(prop){if(prop.widgetProps.action=="op"||prop.widgetProps.action=="flow"){var _189=dojo.fromJson(prop.widgetProps.bttParams);var url=["Request?"];for(var key in _189){if(_189[key]!=null){url.push(key);url.push("=");url.push(_189[key]);url.push("&");}}url.pop();this.widgetProps.baseUrl=url.join("");}},onClick:function(e){},_onClick:function(e){if(e.target.tagName==this._tagartTagName){var _18a=function(src,str){var reg=new RegExp("^"+str);return reg.test(src);};var data=this.grid.store._arrayOfAllItems[e.rowIndex];var _18b={};for(var key in data){if(data[key]!=null&&!_18a(key,"_")){_18b[key]=data[key][0];}}this.grid._cellEventRowData=_18b;this.onClick(e);if(this.widgetProps&&this.widgetProps.action==="link"){window.open(this.widgetProps.links[e.rowIndex]);}else{if(this.widgetProps&&(this.widgetProps.action==="op"||this.widgetProps.action==="flow")){var _18c=[];for(var key in _18b){if(_18b[key]!=null){_18c.push(key);_18c.push("=");_18c.push(_18b[key]);_18c.push("&");}}_18c.pop();var url=this.widgetProps.baseUrl+"&"+_18c.join("");window.open(url);}else{}}}}});dojo.declare("dojox.btt.grid.cells.Link",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"A",formatter:function(_18d,arg1,arg2,arg3){if(this.field){if(_18d!=null&&_18d!=undefined&&_18d!=""&&_18d!="null"){return "<a href='#"+arg1+"'>"+_18d+"</a>";}else{return "";}}else{if(this.widgetProps&&this.widgetProps.label){return "<a href='#"+arg1+"'>"+this.grid.getI18NString(this.widgetProps.label)+"</a>";}else{return "";}}}});dojo.declare("dojox.btt.grid.cells.Button",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"SPAN",formatter:function(_18e){if(this.field){if(_18e!=null&&_18e!=undefined&&_18e!=""&&_18e!="null"){return "<span class=\"dijit dijitReset dijitInline dijitButton\"><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+_18e+"</span></div></span></span>";}else{return "";}}else{if(this.widgetProps&&this.widgetProps.label){_18e=this.grid.getI18NString(this.widgetProps.label);return "<span class=\"dijit dijitReset dijitInline dijitButton\"><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+_18e+"</span></div></span></span>";}else{return "";}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]){dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]=true;dojo.provide("com.ibm.btt.dijit.QueryReadStore");dojo.declare("com.ibm.btt.dijit.QueryReadStore",dojox.data.QueryReadStore,{bttParams:{},_fetchItems:function(_18f,_190,_191){var _192=_18f.serverQuery||_18f.query||{};if(!this.doClientPaging){_192.start=(_18f.start||0).toString();if(_18f.count){_192.count=_18f.count.toString();}}if(!this.doClientSorting&&_18f.sort){var _193=[];dojo.forEach(_18f.sort,function(sort){if(sort&&sort.attribute){_193.push((sort.descending?"-":"")+sort.attribute);}});_192.sort=_193.join(",");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_192)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_190(this._items,_18f,this._numRows);}else{var _194=dojo.xhrPost;dojo.safeMixin(_192,this.bttParams);var _195=_194({url:this.url,handleAs:"text",postData:dojo.toJson(_192),failOk:true});_18f.abort=function(){_195.cancel();};_195.addCallback(dojo.hitch(this,function(_196){try{data=dojo.fromJson(_196||null);this._xhrFetchHandler(data,_18f,_190,_191);}catch(err){console.error(err);}}));_195.addErrback(function(_197){_191(_197,_18f);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_192);}}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]){dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]=true;dojo.provide("dojox.grid.enhanced.plugins.AutoScroll");dojo.declare("dojox.grid.enhanced.plugins.AutoScroll",dojox.grid.enhanced._Plugin,{name:"autoScroll",autoScrollInterval:1000,autoScrollMargin:30,constructor:function(grid,args){this.grid=grid;this.readyForAutoScroll=false;this._scrolling=false;args=dojo.isObject(args)?args:{};if("interval" in args){this.autoScrollInterval=args.interval;}if("margin" in args){this.autoScrollMargin=args.margin;}this._initEvents();this._mixinGrid();},_initEvents:function(){var g=this.grid;this.connect(g,"onCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onHeaderCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onRowSelectorMouseDown",function(){this.readyForAutoScroll=true;});this.connect(dojo.doc,"onmouseup",function(evt){this._manageAutoScroll(true);this.readyForAutoScroll=false;});this.connect(dojo.doc,"onmousemove",function(evt){if(this.readyForAutoScroll){this._event=evt;var _198=dojo.position(g.domNode),hh=g._getHeaderHeight(),_199=this.autoScrollMargin,ey=evt.clientY,ex=evt.clientX,gy=_198.y,gx=_198.x,gh=_198.h,gw=_198.w;if(ex>=gx&&ex<=gx+gw){if(ey>=gy+hh&&ey<gy+hh+_199){this._manageAutoScroll(false,true,false);return;}else{if(ey>gy+gh-_199&&ey<=gy+gh){this._manageAutoScroll(false,true,true);return;}else{if(ey>=gy&&ey<=gy+gh){var _19a=dojo.some(g.views.views,function(view,i){if(view instanceof dojox.grid._RowSelector){return false;}var _19b=dojo.position(view.domNode);if(ex<_19b.x+_199&&ex>=_19b.x){this._manageAutoScroll(false,false,false,view);return true;}else{if(ex>_19b.x+_19b.w-_199&&ex<_19b.x+_19b.w){this._manageAutoScroll(false,false,true,view);return true;}}return false;},this);if(_19a){return;}}}}}this._manageAutoScroll(true);}});},_mixinGrid:function(){var g=this.grid;g.onStartAutoScroll=function(){};g.onEndAutoScroll=function(){};},_fireEvent:function(_19c,args){var g=this.grid;switch(_19c){case "start":g.onStartAutoScroll.apply(g,args);break;case "end":g.onEndAutoScroll.apply(g,args);break;}},_manageAutoScroll:function(_19d,_19e,_19f,view){if(_19d){this._scrolling=false;clearInterval(this._handler);}else{if(!this._scrolling){this._scrolling=true;this._fireEvent("start",[_19e,_19f,view]);this._autoScroll(_19e,_19f,view);this._handler=setInterval(dojo.hitch(this,"_autoScroll",_19e,_19f,view),this.autoScrollInterval);}}},_autoScroll:function(_1a0,_1a1,view){var g=this.grid,_1a2=null;if(_1a0){var _1a3=g.scroller.firstVisibleRow+(_1a1?1:-1);if(_1a3>=0&&_1a3<g.rowCount){g.scrollToRow(_1a3);_1a2=_1a3;}}else{_1a2=this._scrollColumn(_1a1,view);}if(_1a2!==null){this._fireEvent("end",[_1a0,_1a1,view,_1a2,this._event]);}},_scrollColumn:function(_1a4,view){var node=view.scrollboxNode,_1a5=null;if(node.clientWidth<node.scrollWidth){var _1a6=dojo.filter(this.grid.layout.cells,function(cell){return !cell.hidden;});var _1a7=dojo.position(view.domNode);var _1a8,edge,_1a9,i;if(_1a4){_1a8=node.clientWidth;for(i=0;i<_1a6.length;++i){_1a9=dojo.position(_1a6[i].getHeaderNode());edge=_1a9.x-_1a7.x+_1a9.w;if(edge>_1a8){_1a5=_1a6[i].index;node.scrollLeft+=edge-_1a8+10;break;}}}else{_1a8=0;for(i=_1a6.length-1;i>=0;--i){_1a9=dojo.position(_1a6[i].getHeaderNode());edge=_1a9.x-_1a7.x;if(edge<_1a8){_1a5=_1a6[i].index;node.scrollLeft+=edge-_1a8-10;break;}}}}return _1a5;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.AutoScroll);}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]){dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]=true;dojo.provide("dojox.grid.enhanced.plugins.Selector");(function(){var _1aa=0,_1ab=1,_1ac=2,_1ad={col:"row",row:"col"},_1ae=function(type,_1af,_1b0,end,_1b1){if(type!=="cell"){_1af=_1af[type];_1b0=_1b0[type];end=end[type];if(typeof _1af!=="number"||typeof _1b0!=="number"||typeof end!=="number"){return false;}return _1b1?((_1af>=_1b0&&_1af<end)||(_1af>end&&_1af<=_1b0)):((_1af>=_1b0&&_1af<=end)||(_1af>=end&&_1af<=_1b0));}else{return _1ae("col",_1af,_1b0,end,_1b1)&&_1ae("row",_1af,_1b0,end,_1b1);}},_1b2=function(type,v1,v2){try{if(v1&&v2){switch(type){case "col":case "row":return v1[type]==v2[type]&&typeof v1[type]=="number"&&!(_1ad[type] in v1)&&!(_1ad[type] in v2);case "cell":return v1.col==v2.col&&v1.row==v2.row&&typeof v1.col=="number"&&typeof v1.row=="number";}}}catch(e){}return false;},_1b3=function(evt){try{if(evt&&evt.preventDefault){dojo.stopEvent(evt);}}catch(e){}},_1b4=function(type,_1b5,_1b6){switch(type){case "col":return {"col":typeof _1b6=="undefined"?_1b5:_1b6,"except":[]};case "row":return {"row":_1b5,"except":[]};case "cell":return {"row":_1b5,"col":_1b6};}return null;};dojo.declare("dojox.grid.enhanced.plugins.Selector",dojox.grid.enhanced._Plugin,{name:"selector",constructor:function(grid,args){this.grid=grid;this._config={row:_1ac,col:_1ac,cell:_1ac};this.setupConfig(args);if(grid.selectionMode==="single"){this._config.row=_1ab;}this._enabled=true;this._selecting={};this._selected={"col":[],"row":[],"cell":[]};this._startPoint={};this._currentPoint={};this._lastAnchorPoint={};this._lastEndPoint={};this._lastSelectedAnchorPoint={};this._lastSelectedEndPoint={};this._keyboardSelect={};this._lastType=null;this._selectedRowModified={};this._hacks();this._initEvents();this._initAreas();this._mixinGrid();},destroy:function(){this.inherited(arguments);},setupConfig:function(_1b7){if(!_1b7||!dojo.isObject(_1b7)){return;}var _1b8=["row","col","cell"];for(var type in _1b7){if(dojo.indexOf(_1b8,type)>=0){if(!_1b7[type]||_1b7[type]=="disabled"){this._config[type]=_1aa;}else{if(_1b7[type]=="single"){this._config[type]=_1ab;}else{this._config[type]=_1ac;}}}}var mode=["none","single","extended"][this._config.row];this.grid.selection.setMode(mode);},isSelected:function(type,_1b9,_1ba){return this._isSelected(type,_1b4(type,_1b9,_1ba));},toggleSelect:function(type,_1bb,_1bc){this._startSelect(type,_1b4(type,_1bb,_1bc),this._config[type]===_1ac,false);this._endSelect(type);},select:function(type,_1bd,_1be){if(!this.isSelected(type,_1bd,_1be)){this.toggleSelect(type,_1bd,_1be);}},deselect:function(type,_1bf,_1c0){if(this.isSelected(type,_1bf,_1c0)){this.toggleSelect(type,_1bf,_1c0);}},selectRange:function(type,_1c1,end,_1c2){this.grid._selectingRange=true;var _1c3=type=="cell"?_1b4(type,_1c1.row,_1c1.col):_1b4(type,_1c1),_1c4=type=="cell"?_1b4(type,end.row,end.col):_1b4(type,end);this._startSelect(type,_1c3,false,false,false,_1c2);this._highlight(type,_1c4,_1c2===undefined?true:_1c2);this._endSelect(type);this.grid._selectingRange=false;},clear:function(type){this._clearSelection(type||"all");},isSelecting:function(type){if(typeof type=="undefined"){return this._selecting.col||this._selecting.row||this._selecting.cell;}return this._selecting[type];},selectEnabled:function(_1c5){if(typeof _1c5!="undefined"&&!this.isSelecting()){this._enabled=!!_1c5;}return this._enabled;},getSelected:function(type,_1c6){switch(type){case "cell":return dojo.map(this._selected[type],function(item){return item;});case "col":case "row":return dojo.map(_1c6?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;}),function(item){return _1c6?item:item[type];});}return [];},getSelectedCount:function(type,_1c7){switch(type){case "cell":return this._selected[type].length;case "col":case "row":return (_1c7?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;})).length;}return 0;},getSelectedType:function(){var s=this._selected;return ["","cell","row","row|cell","col","col|cell","col|row","col|row|cell"][(!!s.cell.length)|(!!s.row.length<<1)|(!!s.col.length<<2)];},getLastSelectedRange:function(type){return this._lastAnchorPoint[type]?{"start":this._lastAnchorPoint[type],"end":this._lastEndPoint[type]}:null;},_hacks:function(){var g=this.grid;var _1c8=function(e){if(e.cellNode){g.onMouseUp(e);}g.onMouseUpRow(e);};var _1c9=dojo.hitch(g,"onMouseUp");var _1ca=dojo.hitch(g,"onMouseDown");var _1cb=function(e){e.cellNode.style.border="solid 1px";};dojo.forEach(g.views.views,function(view){view.content.domouseup=_1c8;view.header.domouseup=_1c9;if(view.declaredClass=="dojox.grid._RowSelector"){view.domousedown=_1ca;view.domouseup=_1c9;view.dofocus=_1cb;}});g.selection.clickSelect=function(){};this._oldDeselectAll=g.selection.deselectAll;var _1cc=this;g.selection.selectRange=function(from,to){_1cc.selectRange("row",from,to,true);if(g.selection.preserver){g.selection.preserver._updateMapping(true,true,false,from,to);}g.selection.onChanged();};g.selection.deselectRange=function(from,to){_1cc.selectRange("row",from,to,false);if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,false,from,to);}g.selection.onChanged();};g.selection.deselectAll=function(){g._selectingRange=true;_1cc._oldDeselectAll.apply(g.selection,arguments);_1cc._clearSelection("row");g._selectingRange=false;if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,true);}g.selection.onChanged();};var _1cd=g.views.views[0];if(_1cd instanceof dojox.grid._RowSelector){_1cd.doStyleRowNode=function(_1ce,_1cf){dojo.removeClass(_1cf,"dojoxGridRow");dojo.addClass(_1cf,"dojoxGridRowbar");dojo.addClass(_1cf,"dojoxGridNonNormalizedCell");dojo.toggleClass(_1cf,"dojoxGridRowbarOver",g.rows.isOver(_1ce));dojo.toggleClass(_1cf,"dojoxGridRowbarSelected",!!g.selection.isSelected(_1ce));};}this.connect(g,"updateRow",function(_1d0){dojo.forEach(g.layout.cells,function(cell){if(this.isSelected("cell",_1d0,cell.index)){this._highlightNode(cell.getNode(_1d0),true);}},this);});},_mixinGrid:function(){var g=this.grid;g.setupSelectorConfig=dojo.hitch(this,this.setupConfig);g.onStartSelect=function(){};g.onEndSelect=function(){};g.onStartDeselect=function(){};g.onEndDeselect=function(){};g.onSelectCleared=function(){};},_initEvents:function(){var g=this.grid,_1d1=this,dp=dojo.partial,_1d2=function(type,e){if(type==="row"){_1d1._isUsingRowSelector=true;}if(_1d1.selectEnabled()&&_1d1._config[type]&&e.button!=2){if(_1d1._keyboardSelect.col||_1d1._keyboardSelect.row||_1d1._keyboardSelect.cell){_1d1._endSelect("all");_1d1._keyboardSelect.col=_1d1._keyboardSelect.row=_1d1._keyboardSelect.cell=0;}if(_1d1._usingKeyboard){_1d1._usingKeyboard=false;}var _1d3=_1b4(type,e.rowIndex,e.cell&&e.cell.index);_1d1._startSelect(type,_1d3,e.ctrlKey,e.shiftKey);}},_1d4=dojo.hitch(this,"_endSelect");this.connect(g,"onHeaderCellMouseDown",dp(_1d2,"col"));this.connect(g,"onHeaderCellMouseUp",dp(_1d4,"col"));this.connect(g,"onRowSelectorMouseDown",dp(_1d2,"row"));this.connect(g,"onRowSelectorMouseUp",dp(_1d4,"row"));this.connect(g,"onCellMouseDown",function(e){if(e.cell&&e.cell.isRowSelector){return;}if(g.singleClickEdit){_1d1._singleClickEdit=true;g.singleClickEdit=false;}_1d2(_1d1._config["cell"]==_1aa?"row":"cell",e);});this.connect(g,"onCellMouseUp",function(e){if(_1d1._singleClickEdit){delete _1d1._singleClickEdit;g.singleClickEdit=true;}_1d4("all",e);});this.connect(g,"onCellMouseOver",function(e){if(_1d1._curType!="row"&&_1d1._selecting[_1d1._curType]&&_1d1._config[_1d1._curType]==_1ac){_1d1._highlight("col",_1b4("col",e.cell.index),_1d1._toSelect);if(!_1d1._keyboardSelect.cell){_1d1._highlight("cell",_1b4("cell",e.rowIndex,e.cell.index),_1d1._toSelect);}}});this.connect(g,"onHeaderCellMouseOver",function(e){if(_1d1._selecting.col&&_1d1._config.col==_1ac){_1d1._highlight("col",_1b4("col",e.cell.index),_1d1._toSelect);}});this.connect(g,"onRowMouseOver",function(e){if(_1d1._selecting.row&&_1d1._config.row==_1ac){_1d1._highlight("row",_1b4("row",e.rowIndex),_1d1._toSelect);}});this.connect(g,"onSelectedById","_onSelectedById");this.connect(g,"_onFetchComplete",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(g.scroller,"buildPage",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(dojo.doc,"onmouseup",dp(_1d4,"all"));this.connect(g,"onEndAutoScroll",function(_1d5,_1d6,view,_1d7){var _1d8=_1d1._selecting.cell,type,_1d9,dir=_1d6?1:-1;if(_1d5&&(_1d8||_1d1._selecting.row)){type=_1d8?"cell":"row";_1d9=_1d1._currentPoint[type];_1d1._highlight(type,_1b4(type,_1d9.row+dir,_1d9.col),_1d1._toSelect);}else{if(!_1d5&&(_1d8||_1d1._selecting.col)){type=_1d8?"cell":"col";_1d9=_1d1._currentPoint[type];_1d1._highlight(type,_1b4(type,_1d9.row,_1d7),_1d1._toSelect);}}});this.subscribe("dojox/grid/rearrange/move/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/copy/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/change/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/insert/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/remove/"+g.id,"clear");this.connect(g,"onSelected",function(_1da){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.select("row",_1da);}}});this.connect(g,"onDeselected",function(_1db){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.deselect("row",_1db);}}});},_onSelectedById:function(id,_1dc,_1dd){if(this.grid._noInternalMapping){return;}var _1de=[this._lastAnchorPoint.row,this._lastEndPoint.row,this._lastSelectedAnchorPoint.row,this._lastSelectedEndPoint.row];_1de=_1de.concat(this._selected.row);var _1df=false;dojo.forEach(_1de,function(item){if(item){if(item.id===id){_1df=true;item.row=_1dc;}else{if(item.row===_1dc&&item.id){item.row=-1;}}}});if(!_1df&&_1dd){dojo.some(this._selected.row,function(item){if(item&&!item.id&&!item.except.length){item.id=id;item.row=_1dc;return true;}return false;});}_1df=false;_1de=[this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell];_1de=_1de.concat(this._selected.cell);dojo.forEach(_1de,function(item){if(item){if(item.id===id){_1df=true;item.row=_1dc;}else{if(item.row===_1dc&&item.id){item.row=-1;}}}});},onSetStore:function(){this._clearSelection("all");},_onInternalRearrange:function(type,_1e0){try{this._refresh("col",false);dojo.forEach(this._selected.row,function(item){dojo.forEach(this.grid.layout.cells,function(cell){this._highlightNode(cell.getNode(item.row),false);},this);},this);dojo.query(".dojoxGridRowSelectorSelected").forEach(function(node){dojo.removeClass(node,"dojoxGridRowSelectorSelected");dojo.removeClass(node,"dojoxGridRowSelectorSelectedUp");dojo.removeClass(node,"dojoxGridRowSelectorSelectedDown");});var _1e1=function(item){if(item){delete item.converted;}},_1e2=[this._lastAnchorPoint[type],this._lastEndPoint[type],this._lastSelectedAnchorPoint[type],this._lastSelectedEndPoint[type]];if(type==="cell"){this.selectRange("cell",_1e0.to.min,_1e0.to.max);var _1e3=this.grid.layout.cells;dojo.forEach(_1e2,function(item){if(item.converted){return;}for(var r=_1e0.from.min.row,tr=_1e0.to.min.row;r<=_1e0.from.max.row;++r,++tr){for(var c=_1e0.from.min.col,tc=_1e0.to.min.col;c<=_1e0.from.max.col;++c,++tc){while(_1e3[c].hidden){++c;}while(_1e3[tc].hidden){++tc;}if(item.row==r&&item.col==c){item.row=tr;item.col=tc;item.converted=true;return;}}}});}else{_1e2=this._selected.cell.concat(this._selected[type]).concat(_1e2).concat([this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell]);dojo.forEach(_1e2,function(item){if(item&&!item.converted){var from=item[type];if(from in _1e0){item[type]=_1e0[from];}item.converted=true;}});dojo.forEach(this._selected[_1ad[type]],function(item){for(var i=0,len=item.except.length;i<len;++i){var from=item.except[i];if(from in _1e0){item.except[i]=_1e0[from];}}});}dojo.forEach(_1e2,_1e1);this._refreshSelected(true);this._focusPoint(type,this._lastEndPoint);}catch(e){console.warn("Selector._onInternalRearrange() error",e);}},_onExternalChange:function(type,_1e4){var _1e5=type=="cell"?_1e4.min:_1e4[0],end=type=="cell"?_1e4.max:_1e4[_1e4.length-1];this.selectRange(type,_1e5,end);},_refresh:function(type,_1e6){if(!this._keyboardSelect[type]){dojo.forEach(this._selected[type],function(item){this._highlightSingle(type,_1e6,item,undefined,true);},this);}},_refreshSelected:function(){this._refresh("col",true);this._refresh("row",true);this._refresh("cell",true);},_initAreas:function(){var g=this.grid,f=g.focus,_1e7=this,dk=dojo.keys,_1e8=1,_1e9=2,_1ea=function(type,_1eb,_1ec,_1ed,evt){var ks=_1e7._keyboardSelect;if(evt.shiftKey&&ks[type]){if(ks[type]===_1e8){if(type==="cell"){var item=_1e7._lastEndPoint[type];if(f.cell!=g.layout.cells[item.col+_1ed]||f.rowIndex!=item.row+_1ec){ks[type]=0;return;}}_1e7._startSelect(type,_1e7._lastAnchorPoint[type],true,false,true);_1e7._highlight(type,_1e7._lastEndPoint[type],_1e7._toSelect);ks[type]=_1e9;}var _1ee=_1eb(type,_1ec,_1ed,evt);if(_1e7._isValid(type,_1ee,g)){_1e7._highlight(type,_1ee,_1e7._toSelect);}_1b3(evt);}},_1ef=function(type,_1f0,evt,_1f1){if(_1f1&&_1e7.selectEnabled()&&_1e7._config[type]!=_1aa){switch(evt.keyCode){case dk.SPACE:_1e7._startSelect(type,_1f0(),evt.ctrlKey,evt.shiftKey);_1e7._endSelect(type);break;case dk.SHIFT:if(_1e7._config[type]==_1ac&&_1e7._isValid(type,_1e7._lastAnchorPoint[type],g)){_1e7._endSelect(type);_1e7._keyboardSelect[type]=_1e8;_1e7._usingKeyboard=true;}}}},_1f2=function(type,evt,_1f3){if(_1f3&&evt.keyCode==dojo.keys.SHIFT&&_1e7._keyboardSelect[type]){_1e7._endSelect(type);_1e7._keyboardSelect[type]=0;}};if(g.views.views[0] instanceof dojox.grid._RowSelector){this._lastFocusedRowBarIdx=0;f.addArea({name:"rowHeader",onFocus:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _1f4=view.getCellNode(_1e7._lastFocusedRowBarIdx,0);if(_1f4){dojo.toggleClass(_1f4,f.focusClass,false);}if(evt&&"rowIndex" in evt){if(evt.rowIndex>=0){_1e7._lastFocusedRowBarIdx=evt.rowIndex;}else{if(!_1e7._lastFocusedRowBarIdx){_1e7._lastFocusedRowBarIdx=0;}}}_1f4=view.getCellNode(_1e7._lastFocusedRowBarIdx,0);if(_1f4){dijit.focus(_1f4);dojo.toggleClass(_1f4,f.focusClass,true);}f.rowIndex=_1e7._lastFocusedRowBarIdx;_1b3(evt);return true;}return false;},onBlur:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _1f5=view.getCellNode(_1e7._lastFocusedRowBarIdx,0);dojo.toggleClass(_1f5,f.focusClass,false);_1b3(evt);}return true;},onMove:function(_1f6,_1f7,evt){var view=g.views.views[0];if(_1f6&&view instanceof dojox.grid._RowSelector){var next=_1e7._lastFocusedRowBarIdx+_1f6;if(next>=0&&next<g.rowCount){_1b3(evt);var _1f8=view.getCellNode(_1e7._lastFocusedRowBarIdx,0);dojo.toggleClass(_1f8,f.focusClass,false);var sc=g.scroller;var _1f9=sc.getLastPageRow(sc.page);var rc=g.rowCount-1,row=Math.min(rc,next);if(next>_1f9){g.setScrollTop(g.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(_1e7._lastFocusedRowBarIdx));}_1f8=view.getCellNode(next,0);dijit.focus(_1f8);dojo.toggleClass(_1f8,f.focusClass,true);_1e7._lastFocusedRowBarIdx=next;f.cell=_1f8;f.cell.view=view;f.cell.getNode=function(_1fa){return f.cell;};f.rowIndex=_1e7._lastFocusedRowBarIdx;f.scrollIntoView();f.cell=null;}}}});f.placeArea("rowHeader","before","content");}f.addArea({name:"cellselect",onMove:dojo.partial(_1ea,"cell",function(type,_1fb,_1fc,evt){var _1fd=_1e7._currentPoint[type];return _1b4("cell",_1fd.row+_1fb,_1fd.col+_1fc);}),onKeyDown:dojo.partial(_1ef,"cell",function(){return _1b4("cell",f.rowIndex,f.cell.index);}),onKeyUp:dojo.partial(_1f2,"cell")});f.placeArea("cellselect","below","content");f.addArea({name:"colselect",onMove:dojo.partial(_1ea,"col",function(type,_1fe,_1ff,evt){var _200=_1e7._currentPoint[type];return _1b4("col",_200.col+_1ff);}),onKeyDown:dojo.partial(_1ef,"col",function(){return _1b4("col",f.getHeaderIndex());}),onKeyUp:dojo.partial(_1f2,"col")});f.placeArea("colselect","below","header");f.addArea({name:"rowselect",onMove:dojo.partial(_1ea,"row",function(type,_201,_202,evt){return _1b4("row",f.rowIndex);}),onKeyDown:dojo.partial(_1ef,"row",function(){return _1b4("row",f.rowIndex);}),onKeyUp:dojo.partial(_1f2,"row")});f.placeArea("rowselect","below","rowHeader");},_clearSelection:function(type,_203){if(type=="all"){this._clearSelection("cell",_203);this._clearSelection("col",_203);this._clearSelection("row",_203);return;}this._isUsingRowSelector=true;dojo.forEach(this._selected[type],function(item){if(!_1b2(type,_203,item)){this._highlightSingle(type,false,item);}},this);this._blurPoint(type,this._currentPoint);this._selecting[type]=false;this._startPoint[type]=this._currentPoint[type]=null;this._selected[type]=[];if(type=="row"&&!this.grid._selectingRange){this._oldDeselectAll.call(this.grid.selection);this.grid.selection._selectedById={};}this.grid.onEndDeselect(type,null,null,this._selected);this.grid.onSelectCleared(type);},_startSelect:function(type,_204,_205,_206,_207,_208){if(!this._isValid(type,_204)){return;}var _209=this._isSelected(type,this._lastEndPoint[type]),_20a=this._isSelected(type,_204);this._toSelect=_207?_20a:!_20a;if(!_205||(!_20a&&this._config[type]==_1ab)){this._clearSelection("all",_204);this._toSelect=_208===undefined?true:_208;}this._selecting[type]=true;this._currentPoint[type]=null;if(_206&&this._lastType==type&&_209==this._toSelect){if(type==="row"){this._isUsingRowSelector=true;}this._startPoint[type]=this._lastEndPoint[type];this._highlight(type,this._startPoint[type]);this._isUsingRowSelector=false;}else{this._startPoint[type]=_204;}this._curType=type;this._fireEvent("start",type);this._isStartFocus=true;this._isUsingRowSelector=true;this._highlight(type,_204,this._toSelect);this._isStartFocus=false;},_endSelect:function(type){if(type==="row"){delete this._isUsingRowSelector;}if(type=="all"){this._endSelect("col");this._endSelect("row");this._endSelect("cell");}else{if(this._selecting[type]){this._addToSelected(type);this._lastAnchorPoint[type]=this._startPoint[type];this._lastEndPoint[type]=this._currentPoint[type];if(this._toSelect){this._lastSelectedAnchorPoint[type]=this._lastAnchorPoint[type];this._lastSelectedEndPoint[type]=this._lastEndPoint[type];}this._startPoint[type]=this._currentPoint[type]=null;this._selecting[type]=false;this._lastType=type;this._fireEvent("end",type);}}},_fireEvent:function(_20b,type){switch(_20b){case "start":this.grid[this._toSelect?"onStartSelect":"onStartDeselect"](type,this._startPoint[type],this._selected);break;case "end":this.grid[this._toSelect?"onEndSelect":"onEndDeselect"](type,this._lastAnchorPoint[type],this._lastEndPoint[type],this._selected);break;}},_calcToHighlight:function(type,_20c,_20d,_20e){if(_20e!==undefined){var sltd;if(this._usingKeyboard&&!_20d){var last=this._isInLastRange(this._lastType,_20c);if(last){sltd=this._isSelected(type,_20c);if(_20e&&sltd){return false;}if(!_20e&&!sltd&&this._isInLastRange(this._lastType,_20c,true)){return true;}}}return _20d?_20e:(sltd||this._isSelected(type,_20c));}return _20d;},_highlightNode:function(node,_20f){if(node){var _210="dojoxGridRowSelected";var _211="dojoxGridCellSelected";dojo.toggleClass(node,_210,_20f);dojo.toggleClass(node,_211,_20f);}},_highlightHeader:function(_212,_213){var _214=this.grid.layout.cells;var node=_214[_212].getHeaderNode();var _215="dojoxGridHeaderSelected";dojo.toggleClass(node,_215,_213);},_highlightRowSelector:function(_216,_217){var _218=this.grid.views.views[0];if(_218 instanceof dojox.grid._RowSelector){var node=_218.getRowNode(_216);if(node){var _219="dojoxGridRowSelectorSelected";dojo.toggleClass(node,_219,_217);}}},_highlightSingle:function(type,_21a,_21b,_21c,_21d){var _21e=this,toHL,g=_21e.grid,_21f=g.layout.cells;switch(type){case "cell":toHL=this._calcToHighlight(type,_21b,_21a,_21c);var c=_21f[_21b.col];if(!c.hidden&&!c.notselectable){this._highlightNode(_21b.node||c.getNode(_21b.row),toHL);}break;case "col":toHL=this._calcToHighlight(type,_21b,_21a,_21c);this._highlightHeader(_21b.col,toHL);dojo.query("td[idx='"+_21b.col+"']",g.domNode).forEach(function(_220){var _221=_21f[_21b.col].view.content.findRowTarget(_220);if(_221){var _222=_221[dojox.grid.util.rowIndexTag];_21e._highlightSingle("cell",toHL,{"row":_222,"col":_21b.col,"node":_220});}});break;case "row":toHL=this._calcToHighlight(type,_21b,_21a,_21c);this._highlightRowSelector(_21b.row,toHL);dojo.forEach(_21f,function(cell){_21e._highlightSingle("cell",toHL,{"row":_21b.row,"col":cell.index,"node":cell.getNode(_21b.row)});});this._selectedRowModified=true;if(!_21d){g.selection.setSelected(_21b.row,toHL);}}},_highlight:function(type,_223,_224){if(this._selecting[type]&&_223!==null){var _225=this._startPoint[type],_226=this._currentPoint[type],_227=this,_228=function(from,to,toHL){_227._forEach(type,from,to,function(item){_227._highlightSingle(type,toHL,item,_224);},true);};switch(type){case "col":case "row":if(_226!==null){if(_1ae(type,_223,_225,_226,true)){_228(_226,_223,false);}else{if(_1ae(type,_225,_223,_226,true)){_228(_226,_225,false);_226=_225;}_228(_223,_226,true);}}else{this._highlightSingle(type,true,_223,_224);}break;case "cell":if(_226!==null){if(_1ae("row",_223,_225,_226,true)||_1ae("col",_223,_225,_226,true)||_1ae("row",_225,_223,_226,true)||_1ae("col",_225,_223,_226,true)){_228(_225,_226,false);}}_228(_225,_223,true);}this._currentPoint[type]=_223;this._focusPoint(type,this._currentPoint);}},_focusPoint:function(type,_229){if(!this._isStartFocus){var _22a=_229[type],f=this.grid.focus;if(type=="col"){f._colHeadFocusIdx=_22a.col;f.focusArea("header");}else{if(type=="row"){f.focusArea("rowHeader",{"rowIndex":_22a.row});}else{if(type=="cell"){f.setFocusIndex(_22a.row,_22a.col);}}}}},_blurPoint:function(type,_22b){var f=this.grid.focus;if(type=="col"){f._blurHeader();}else{if(type=="cell"){f._blurContent();}}},_addToSelected:function(type){var _22c=this._toSelect,_22d=this,_22e=[],_22f=[],_230=this._startPoint[type],end=this._currentPoint[type];if(this._usingKeyboard){this._forEach(type,this._lastAnchorPoint[type],this._lastEndPoint[type],function(item){if(!_1ae(type,item,_230,end)){(_22c?_22f:_22e).push(item);}});}this._forEach(type,_230,end,function(item){var _231=_22d._isSelected(type,item);if(_22c&&!_231){_22e.push(item);}else{if(!_22c){_22f.push(item);}}});this._add(type,_22e);this._remove(type,_22f);dojo.forEach(this._selected.row,function(item){if(item.except.length>0){this._selectedRowModified=true;this.grid.selection.setSelected(item.row,false);}},this);},_forEach:function(type,_232,end,func,_233){if(!this._isValid(type,_232,true)||!this._isValid(type,end,true)){return;}switch(type){case "col":case "row":_232=_232[type];end=end[type];var dir=end>_232?1:-1;if(!_233){end+=dir;}for(;_232!=end;_232+=dir){func(_1b4(type,_232));}break;case "cell":var _234=end.col>_232.col?1:-1,_235=end.row>_232.row?1:-1;for(var i=_232.row,p=end.row+_235;i!=p;i+=_235){for(var j=_232.col,q=end.col+_234;j!=q;j+=_234){func(_1b4(type,i,j));}}}},_makeupForExceptions:function(type,_236){var _237=[];dojo.forEach(this._selected[type],function(v1){dojo.forEach(_236,function(v2){if(v1[type]==v2[type]){var pos=dojo.indexOf(v1.except,v2[_1ad[type]]);if(pos>=0){v1.except.splice(pos,1);}_237.push(v2);}});});return _237;},_makeupForCells:function(type,_238){var _239=[];dojo.forEach(this._selected.cell,function(v1){dojo.some(_238,function(v2){if(v1[type]==v2[type]){_239.push(v1);return true;}return false;});});this._remove("cell",_239);dojo.forEach(this._selected[_1ad[type]],function(v1){dojo.forEach(_238,function(v2){var pos=dojo.indexOf(v1.except,v2[type]);if(pos>=0){v1.except.splice(pos,1);}});});},_addException:function(type,_23a){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_23a,function(v2){v1.except.push(v2[_1ad[type]]);});});},_addCellException:function(type,_23b){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_23b,function(v2){if(v1[type]==v2[type]){v1.except.push(v2[_1ad[type]]);}});});},_add:function(type,_23c){var _23d=this.grid.layout.cells;if(type=="cell"){var _23e=this._makeupForExceptions("col",_23c);var _23f=this._makeupForExceptions("row",_23c);_23c=dojo.filter(_23c,function(item){return dojo.indexOf(_23e,item)<0&&dojo.indexOf(_23f,item)<0&&!_23d[item.col].hidden&&!_23d[item.col].notselectable;});}else{if(type=="col"){_23c=dojo.filter(_23c,function(item){return !_23d[item.col].hidden&&!_23d[item.col].notselectable;});}this._makeupForCells(type,_23c);this._selected[type]=dojo.filter(this._selected[type],function(v){return dojo.every(_23c,function(item){return v[type]!==item[type];});});}if(type!="col"&&this.grid._hasIdentity){dojo.forEach(_23c,function(item){var _240=this.grid._by_idx[item.row];if(_240){item.id=_240.idty;}},this);}this._selected[type]=this._selected[type].concat(_23c);},_remove:function(type,_241){var comp=dojo.partial(_1b2,type);this._selected[type]=dojo.filter(this._selected[type],function(v1){return !dojo.some(_241,function(v2){return comp(v1,v2);});});if(type=="cell"){this._addCellException("col",_241);this._addCellException("row",_241);}else{this._addException(_1ad[type],_241);}},_isCellNotInExcept:function(type,item){var attr=item[type],_242=item[_1ad[type]];return dojo.some(this._selected[type],function(v){return v[type]==attr&&dojo.indexOf(v.except,_242)<0;});},_isSelected:function(type,item){if(!item){return false;}var res=dojo.some(this._selected[type],function(v){var ret=_1b2(type,item,v);if(ret&&type!=="cell"){return v.except.length===0;}return ret;});if(!res&&type==="cell"){res=(this._isCellNotInExcept("col",item)||this._isCellNotInExcept("row",item));if(type==="cell"){res=res&&!this.grid.layout.cells[item.col].notselectable;}}return res;},_isInLastRange:function(type,item,_243){var _244=this[_243?"_lastSelectedAnchorPoint":"_lastAnchorPoint"][type],end=this[_243?"_lastSelectedEndPoint":"_lastEndPoint"][type];if(!item||!_244||!end){return false;}return _1ae(type,item,_244,end);},_isValid:function(type,item,_245){if(!item){return false;}try{var g=this.grid,_246=item[type];switch(type){case "col":return _246>=0&&_246<g.layout.cells.length&&dojo.isArray(item.except)&&(_245||!g.layout.cells[_246].notselectable);case "row":return _246>=0&&_246<g.rowCount&&dojo.isArray(item.except);case "cell":return item.col>=0&&item.col<g.layout.cells.length&&item.row>=0&&item.row<g.rowCount&&(_245||!g.layout.cells[item.col].notselectable);}}catch(e){}return false;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.Selector,{"dependency":["autoScroll"]});})();}if(!dojo._hasResource["com.ibm.btt.dijit.Grid"]){dojo._hasResource["com.ibm.btt.dijit.Grid"]=true;dojo.provide("com.ibm.btt.dijit.Grid");dojo.declare("com.ibm.btt.dijit.Grid",[dojox.grid.EnhancedGrid,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",templateString:dojo.cache("com.ibm.btt.dijit","templates/Grid.html","<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\r\n\t\r\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridErroressages\" style=\"display: none;\" dojoAttachPoint=\"errorMessageNode\"></div>\r\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\r\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\r\n\t\r\n</div>\r\n"),name:"",width:"",storeData:"",comparatorMap:"",height:"300",sortEnabled:false,_firstTimeLoaded:true,SELECTION_VALID_STATE:true,selectionMode:"none",selectionRequired:false,selectable:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Grid"),readOnly:false,disabled:false,create:function(){this._eventHandlers=[];this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.selectable){console.debug("grid",this);this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(this.pagination){this._eventHandlers.push(dojo.connect(this.pagination.plugin,"gotoPage",this,function(){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}));}}));this._eventHandlers.push(dojo.connect(this,"onSelectionChanged",this,this.checkSelectionNum));}if(this.sortEnabled){this._eventHandlers.push(dojo.connect(this,"onHeaderCellClick",this,function(e){if(dojo.hasClass(e.target,"dojoxGridSortBtnSingle")||dojo.hasClass(e.target,"dojoxGridSortBtnNested")){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}}));}this._eventHandlers.push(dojo.connect(this,"_onFetchComplete",this,function(){this.checkSelectionNum();}));this._eventHandlers.push(dojo.connect(this,"onKeyDown",this,function(e){this._set("state",this._getState());}));if(this.selectionMode==="single"){this._eventHandlers.push(dojo.connect(this.selection,"addToSelection",this,function(_247){if(this._lastSelectedIndex===_247){this.selection.deselectAll();this._lastSelectedIndex=undefined;}else{this._lastSelectedIndex=_247;}}));}this.errorMessageIcon=dojo.create("div",{"class":"errorMessageIcon","style":"display:none;"},this.viewsHeaderNode,"last");this._eventHandlers.push(dojo.connect(this,"onCellClick",this,this._onCellWidgetClick));this._setComparatorForColunm();},_onCellWidgetClick:function(e){if(e.cell._onClick){e.cell._onClick(e);}},_getState:function(){var _248=[];var _249=this.layout.cells;for(var i=0;i<_249.length;i++){if(_249[i].editable&&_249[i].widget){_248.push(_249[i].widget);}}var _24a=dojo.map(_248,function(w){return w.get("state")||"";});return dojo.indexOf(_24a,"Error")>=0||!this.SELECTION_VALID_STATE?"Error":dojo.indexOf(_24a,"Incomplete")>=0?"Incomplete":"";},postMixInProperties:function(){this.inherited(arguments);var _24b=this;(function(obj){if(dojo.isArray(obj)){for(var i=0;i<obj.length;i++){arguments.callee(obj[i]);}}else{if(dojo.isObject(obj)){if(obj.name){obj.name=_24b.getI18NString(obj.name);}else{if(obj.cells){arguments.callee(obj.cells);}}}}})(this.structure);},setStoreData:function(_24c){this.setStore(new dojo.data.ItemFileWriteStore({data:{items:_24c}}));},_setStoreDataAttr:function(_24d){if(!this.store){this.store=new dojo.data.ItemFileWriteStore({data:{items:dojo.fromJson(_24d)}});}},_setComparatorForColunm:function(){var _24e;if(this.comparatorMap!=""){_24e=dojo.fromJson(this.comparatorMap);}else{_24e={};}for(var i=0;i<this.structure[0].length;i++){if(this.structure[0][i].type){var cell=this.getCellByField(this.structure[0][i].field);if(cell.comparator){_24e[this.structure[0][i].field]=dojo.hitch(cell,cell.comparator);}}}this.store.comparatorMap=_24e;},getEditableStroeData:function(){if(this.storeDataName){var _24f=this.layout.cells;var _250=this.store;var _251=this.selectable;var _252=[];this.store.fetch({onComplete:function(_253,_254){for(var m=0;m<_253.length;m++){var _255={};var flag=false;for(var i=0;i<_24f.length;i++){if(_24f[i].editable){var name=_24f[i].field;var _256=_250.getValue(_253[m],_24f[i].field);if(_256&&_256!==""&&typeof _256!="string"){if(_24f[i].editable&&_24f[i].widget&&_24f[i].widget.serialize){_256=_24f[i].widget.serialize(_256,_24f[i].widget.constraints);}}_255[name]=(_256===null||_256==="null"?"":_256);flag=true;}}if(flag){_252.push(_255);}}}});if(_252.length>0){return _252;}else{return;}}else{return;}},onFormSubmit:function(){if(this.disabled){return;}if(this.storeDataName){var _257=this.layout.cells;var _258=this.store;var _259=this.storeDataName;var node=this.domNode;var _25a=this.selectable;dojo.query("> input[type=hidden]",node).forEach(function(node,_25b,_25c){dojo.destroy(node);});if(!(this.store instanceof dojox.data.QueryReadStore)){this.store.fetch({onComplete:function(_25d,_25e){for(var m=0;m<_25d.length;m++){for(var i=0;i<_257.length;i++){if(_258.getValue(_25d[m],_257[i].field)!=null){break;}}if(i==_257.length){continue;}for(var i=0;i<_257.length;i++){if(_257[i].editable){var _25f={};_25f.type="hidden";_25f.name=_259+"."+m+"."+_257[i].field;_25f.value=_258.getValue(_25d[m],_257[i].field);if(_25f.value&&_25f.value!==""&&typeof _25f.value!="string"){if(_257[i].editable&&_257[i].widget&&_257[i].widget.serialize){_25f.value=_257[i].widget.serialize(_25f.value,_257[i].widget.constraints);}}_25f.value=_25f.value===null?"":_25f.value;dojo.create("input",_25f,node,"last");}}}}});}if(this.name&&this.selectable){var _257=this.layout.cells;var name=this.name;var _258=this.store;var node=this.domNode;var _260=this.selection.getSelected();for(var m=0;m<_260.length;m++){var _261=this.selectionMode=="single";if(_261&&m==1){break;}var _262=_260[m];dojo.forEach(_258.getAttributes(_262),function(_263){var _264={};_264.type="hidden";if(_261){_264.name=name+"."+_263;}else{_264.name=name+"."+m+"."+_263;}_264.value=_258.getValue(_262,_263);for(var i=0;i<_257.length;i++){if(_257[i].field==_263){if(_264.value&&_264.value!==""&&typeof _264.value!="string"){if(_257[i].editable&&_257[i].widget&&_257[i].widget.serialize){_264.value=_257[i].widget.serialize(_264.value,_257[i].widget.constraints);}}_264.value=_264.value===null?"":_264.value;dojo.create("input",_264,node,"last");break;}}console.debug("tempObj",_264);});}}}},_getValueAttr:function(_265){if(this.selectable){var _266=this.selection.getSelected();var _267=this.layout.cells;var _268=this.store;var _269=[];if(_266.length>0){for(var m=0;m<_266.length;m++){var _26a=_266[m];var _26b={};dojo.forEach(_268.getAttributes(_26a),function(_26c){for(var i=0;i<_267.length;i++){if(_267[i].field==_26c){_26b[_26c]=_268.getValue(_26a,_26c);if(_26b[_26c]&&_26b[_26c]!==""&&typeof _26b[_26c]!="string"){if(_267[i].editable&&_267[i].widget&&(_267[i].widget instanceof com.ibm.btt.dijit.DateTextBox||_267[i].widget instanceof com.ibm.btt.dijit.NumberTextBox)&&_267[i].formatter){_26b[_26c]=_267[i].widget.serialize(_26b[_26c],_267[i].widget.constraints);}}_26b[_26c]=_26b[_26c]===null?"":_26b[_26c];break;}}});console.debug("tempObj",_26b);if(this.selectionMode=="single"){return _26b;}if(_26b&&_26b!==""){_269.push(_26b);}}return _269;}else{return null;}}else{if(this._cellEventRowData){return this._cellEventRowData;}else{return undefined;}}},_setVisibilityAttr:function(_26d){this.visibility=_26d;if(_26d=="gone"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}if(this._firstTimeLoaded){this._eventHandlers.push(dojo.connect(this,"startup",dojo.hitch(this,function(){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");})));}else{dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}}else{if(_26d=="hidden"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");this.update();}}this._firstTimeLoaded=false;},getValueInSelectedItem:function(_26e){return this.getValueInFirstSelectedItem(_26e);},getValueInFirstSelectedItem:function(_26f){var _270=this.selection.getFirstSelected();if(_270){return this.store.getValue(_270,_26f);}else{return null;}},getLengthOfSelectedRows:function(){return this.selection.getSelected().length;},getSelectedItem:function(){return this.attr("value");},_setWidthAttr:function(_271){if(_271!=""){this.width=this.handleLenUint(_271);dojo.style(this.domNode,"width",this.width);}},_setHeightAttr:function(_272){if(_272!=""){this.height=this.handleLenUint(_272);}},canSort:function(){if(this.sortEnabled&&this.disabled==false){return this.inherited(arguments);}else{return false;}},validate:function(_273,_274,_275){},checkSelectionNum:function(){this.showErrorIcon("");var _276=this.selection.getSelected().length;var msg="";console.debug("this.selectionRequired",this.selectionRequired);console.debug("selectNum",_276);if(this.selectionRequired&&_276<1){if(this.selectionMode==="single"){msg=this._bundle.getMessage("rangeSingleMessage");this.SELECTION_VALID_STATE=false;}else{if(this.selectionMode==="extended"){msg=this._bundle.getMessage("rangeMultiMessage");this.SELECTION_VALID_STATE=false;}}}else{this.SELECTION_VALID_STATE=true;}this.showErrorIcon(msg);this._set("state",this._getState());},showErrorIcon:function(_277){if(_277){this.errorMessageIcon.title=_277;this.errorMessageIcon.style.display="";var hint=this.get("hint");if(hint!=undefined&&hint!=null&&hint!=""){this._hint=hint;this.set("hint",_277);}}else{this.errorMessageIcon.title="";this.errorMessageIcon.style.display="none";if(this._hint){this.set("hint",this._hint);delete this._hint;}}},isValid:function(){var _278=this._getState()=="";console.debug("isValid",_278);return _278;},reset:function(){if((this.readOnly===true)||(this.disabled===true)){this.removeSelectedRows();return;}if(this.store instanceof dojo.data.ItemFileReadStore){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}this.store.revert();}},_setReadOnlyAttr:function(_279){console.debug("_setReadOnlyAttr",_279);this.readOnly=_279;},_setDisabledAttr:function(_27a){console.debug("_setDisabledAttr",_27a);this.disabled=_27a;if(this.disabled){if(this.selectionMode!="none"){if(!this._disableCache){this._disableCache={};}this._disableCache.selectionMode=this.selectionMode;this.selectionMode="none";this.selection.setMode(this.selectionMode);}if(this.columnReordering){if(!this._disableCache){this._disableCache={};}this._disableCache.columnReordering=this.columnReordering;this.columnReordering=false;if(this._pending_requests){this._refresh(true);}else{setTimeout(dojo.hitch(this,function(){this._refresh(true);}),1000);}}console.log("Grid attached events : ",this._attachEvents);dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_27b,arr){dojo.style(node,"overflow","hidden");});if(!dojo.query(".disabledGrid",this.id).length){var mask=dojo.create("div",{"class":"disabledGrid"},this.domNode);var _27c=function(e){e.preventDefault();e.stopPropagation();};mask.onclick=_27c;mask.onDblClick=_27c;mask.onmouseover=_27c;mask.onmousemove=_27c;mask.onmouseout=_27c;mask.onmouseleave=_27c;mask.onmouseenter=_27c;mask.onmouseup=_27c;mask.onmousedown=_27c;mask.onfocus=_27c;mask.onkeydown=_27c;mask.onkeyup=_27c;mask.onkeypress=_27c;mask.onblur=_27c;mask.onkeypress=_27c;_27c=undefined;}dojo.addClass(this.domNode,"dijitDisabled");}else{if(this._disableCache&&this._disableCache.selectionMode){this.selectionMode=this._disableCache.selectionMode;this.selection.setMode(this.selectionMode);delete this._disableCache.selectionMode;}if(this._disableCache&&this._disableCache.columnReordering){this.columnReordering=this._disableCache.columnReordering;delete this._disableCache.columnReordering;this._refresh(true);}dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_27d,arr){dojo.style(node,"overflow","auto");});dojo.query(".disabledGrid",this.id).forEach(function(node){dojo.destroy(node);});if(this._disableCache){delete this._disableCache;}dojo.removeClass(this.domNode,"dijitDisabled");}},focusOn:function(){if(!this.isFocusable()){console.info("can't focus on grid, because it's not focusable");return;}var _27e=(this.rowCount===0);if(!_27e){var _27f=0;var cell=this.getCell(_27f);if(cell.hidden){_27f=this.focus.isNavHeader()?this.focus._colHeadFocusIdx:0;}this.focus.setFocusIndex(0,_27f);}else{this.focus.focusHeader();}},canEdit:function(_280,_281){console.debug("[this.readOnly,this.disabled]",this.readOnly,this.disabled);if((this.readOnly===true)||(this.disabled===true)){console.debug("can't edit");return false;}else{var _282=this.inherited(arguments);console.debug("canEdit:",_282);return _282;}},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){vs.onBeforeRow=function(_283,_284){if(_283<0){_284[0].hidden=false;return;}var item=this.grid.getItem(_283);if(!item){return;}var _285=this.grid.layout.cells;for(var i=0;i<_285.length;i++){if(this.grid.store.getValue(item,_285[i].field)!==null){_284[0].hidden=false;return;}}_284[0].hidden=true;};}this.inherited(arguments);},onFetchError:function(err,req){if(err.responseText){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:err.responseText})).show();}},getWidget:function(arg){var _286=this.layout.cells;for(var i=0;i<_286.length;i++){if(_286[i].id==arg){return _286[i];}}return undefined;},destroy:function(){dojo.forEach(this._eventHandlers,dojo.disconnect);this._eventHandlers=undefined;this.inherited(arguments);if(this.store&&this.store.destroy){this.store.destroy();}},_setClassAttr:function(arg){if(this.disabled){return;}else{this.inherited(arguments);}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){}});}if(!dojo._hasResource["com.ibm.btt.dijit.Message"]){dojo._hasResource["com.ibm.btt.dijit.Message"]=true;dojo.provide("com.ibm.btt.dijit.Message");dojo.requireLocalization("com.ibm.btt.dijit","Message", null, "ROOT,zh-cn");dojo.declare("com.ibm.btt.dijit.Message",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div><div dojoAttachPoint='staticHolder'><span dojoAttachPoint='staticMessageHolder' class='dijitLabelBase'></span><span dojoAttachPoint='closeHandler' style='margin:0 0 0 5px;text-decoration:underline;cursor:pointer'></span></div><div dojoAttachPoint='dialogHolder'><span dojoAttachPoint='popupMessageHolder' class='dijitLabelBase'></span></div></div>",level:"ERROR",text:"",styleClass:"",name:"",messageArray:"",_popupDialog:null,isNotSubmitted:true,displayMode:"STATIC",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{visibility:{node:"domNode"},value:{}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Message");},postCreate:function(){this._init();this._showHideCloseHandler(false);if(this.text){this.display(this.text,this.level);}else{if(this.messageArray){try{var _287=dojo.fromJson(this.messageArray);this.displayMessageArray(_287);}catch(e){}}}},_init:function(){this.closeHandler.innerHTML=this.bundle.getMessage("closeMessage");this.styleClass={"ERROR":"errorMessage","WARN":"warnMessage","INFO":"infoMessage"};dojo.connect(this.closeHandler,"onclick",this,"closeMessage");},display:function(text,_288){if((text==="")||(text===null)||(text===undefined)){console.info("[display] Need text message for displaying");this._showHideCloseHandler(false);return;}var _289=this._getMessageValue.apply(this,arguments);this.staticMessageHolder.innerHTML=_289;if(_288===undefined){_288=this.level;}this._switchModeAndStyles("STATIC",_288);this._showHideCloseHandler(true);},displayMessageArray:function(_28a){if(_28a.length>0){var _28b=[];for(var i=0;i<_28a.length;i++){_28b.push((i+1)+" ");_28b.push(this._getMessageValue(_28a[i]));if(i!=_28a.length-1){_28b.push("<br>");}}var _28c=_28b.join("");if(this.displayMode==="STATIC"){this.display(_28c);}else{this.displayPopup(_28c);}}},_showHideCloseHandler:function(flag){if(flag){dojo.style(this.closeHandler,{"display":""});}else{dojo.style(this.closeHandler,{"display":"none"});}},displayPopup:function(text,_28d){if((text==="")||(text===null)||(text===undefined)){console.info("[displayPopup] Need text message for displaying");return;}var _28e=this._getMessageValue.apply(this,arguments);this.popupMessageHolder.innerHTML=_28e;if(_28d===undefined){_28d=this.level;}this._switchModeAndStyles("POPUP",_28d);if(this._popupDialog===null){var _28f=this.id+"messagePopup";this._popupDialog=new dijit.Dialog({id:_28f,title:this.bundle.getMessage("popupTitle")},this.dialogHolder);}this._popupDialog.show();},closeMessage:function(){if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":"none"});}else{if(this._popupDialog!==null){this._popupDialog.hide();}else{console.error("[Should have a popup dialog]");}}},_setTextWrapAttr:function(_290){this.textWrap=_290;this._setTextLabelStyle();},_setWidthAttr:function(_291){if(_291!=""&&_291!=null){this.width=_291;dojo.style(this.staticMessageHolder,"width",this.handleLenUint(this.width));dojo.style(this.popupMessageHolder,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_292){if(_292!=""&&_292!=null){this.height=_292;dojo.style(this.staticMessageHolder,"height",this.handleLenUint(this.height));dojo.style(this.popupMessageHolder,"height",this.handleLenUint(this.height));}},_switchModeAndStyles:function(mode,_293){this.displayMode=mode;if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":""});dojo.style(this.dialogHolder,{"display":"none"});if(this._popupDialog!==null){this._popupDialog.hide();}dojo.removeClass(this.staticMessageHolder);dojo.addClass(this.staticMessageHolder,this.styleClass[_293]);}else{dojo.style(this.dialogHolder,{"display":""});dojo.style(this.staticHolder,{"display":"none"});dojo.removeClass(this.popupMessageHolder);dojo.addClass(this.popupMessageHolder,this.styleClass[_293]);}this._setTextLabelStyle();},_setTextLabelStyle:function(){dojo.addClass(this.popupMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.popupMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.popupMessageHolder,"dijitLabelWrap");}dojo.addClass(this.staticMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.staticMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.staticMessageHolder,"dijitLabelWrap");}},_getMessageValue:function(text,_294){var _295="";if(arguments.length===1){_295=this.getI18NString(text);}else{if(arguments.length===2){_295=this.getI18NString(text);}else{if(arguments.length>2){var _296=[];for(var i=2;i<arguments.length;i++){_296.push(arguments[i]);}console.debug("display,dynamic attributes values",_296);_295=this.getI18NString(text,_296,true);}}}return _295;},_setValueAttr:function(_297){this.text=_297;},destroy:function(){this.inherited(arguments);if(this._popupDialog!==null){this._popupDialog.destroyRecursive();}}});}if(!dojo._hasResource["dojox.uuid.generateRandomUuid"]){dojo._hasResource["dojox.uuid.generateRandomUuid"]=true;dojo.provide("dojox.uuid.generateRandomUuid");dojox.uuid.generateRandomUuid=function(){var _298=16;function _299(){var _29a=Math.floor((Math.random()%1)*Math.pow(2,32));var _29b=_29a.toString(_298);while(_29b.length<8){_29b="0"+_29b;}return _29b;};var _29c="-";var _29d="4";var _29e="8";var a=_299();var b=_299();b=b.substring(0,4)+_29c+_29d+b.substring(5,8);var c=_299();c=_29e+c.substring(1,4)+_29c+c.substring(4,8);var d=_299();var _29f=a+_29c+b+_29c+c+d;_29f=_29f.toLowerCase();return _29f;};}if(!dojo._hasResource["com.ibm.btt.dijit.FileUpload"]){dojo._hasResource["com.ibm.btt.dijit.FileUpload"]=true;dojo.provide("com.ibm.btt.dijit.FileUpload");dojo.declare("com.ibm.btt.dijit.FileUpload",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/FileUpload.html","<div dojoAttachPoint=\"fileuploader\" class = \"fileupload_pane\">\r\n<!--\r\n/* \r\n *------------------------------------------------------------------- \r\n * Licensed Materials - Property of IBM\r\n * Restricted Materials of IBM\r\n * 5724-H82\r\n * (C) Copyright IBM Corp.2010 All Rights Reserved.\r\n * US Government Users Restricted Rights - Use, duplication or disclosure\r\n * restricted by GSA ADP Schedule Contract with IBM Corp\r\n -------------------------------------------------------------------\r\n */\r\n-->\r\n\t<span dojoAttachPoint=\"inputBox\"></span>\r\n\t<span dojoAttachPoint=\"browseBtn\"></span>\r\n\t<div dojoAttachPoint=\"uploadBtn\"></div>\r\n\t<span dojoAttachPoint=\"statusMessage\" class=\"loadingMsg\"></span>\r\n\t<div dojoAttachPoint=\"clearBtn\"></div>\r\n\t<span dojoAttachPoint=\"errorMessage\" class=\"errorMsg\"></span>\r\n</div>\r\n\r\n\r\n"),state:"Incomplete",required:false,disabled:false,_visibilityHolder:[],_isDisabled_uploadButton:false,tabIndex:"-1",width:"",_browse_width:null,inputText:null,f0:null,uploadButton:null,cancelButton:null,_state:"none",value:"",currentFileInfo:null,fileExtension:"",uploadUrl:"",storeDataName:"",bttParams:"",_bttParamJSON:null,_accessByKey:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","FileUpload"),postCreate:function(){this._bttParamJSON=dojo.fromJson(this.bttParams);this.createInsideWidgets();this.renderItems();this.connectEvents();this.onShow();this._tabSupport(false);this.inherited(arguments);},createInsideWidgets:function(){this.inputText=new dijit.form.TextBox({},this.inputBox);dojo.addClass(this.inputText.domNode,"inputBox");this.setReadOnly(this.inputText,true);this.inputText.reset=null;this.uploadButton=new dijit.form.Button({label:this._bundle.getMessage("UPLOAD_BUTTON_LABEL")},this.uploadBtn);this.cancelButton=new dijit.form.Button({label:this._bundle.getMessage("CANCEL_BUTTON_LABEL")},this.clearBtn);this.browseBtn.innerHTML=this._bundle.getMessage("BROWSE_BUTTON_LABEL");var _2a0=this._buildParameter();var _2a1;if(dojo.isIE){dojo.addClass(this.uploadButton.domNode,"commonButton");dojo.addClass(this.cancelButton.domNode,"commonButton");}this.f0=new com.ibm.btt.dijit.FileUploader(dojo.mixin({force:"html",uploadUrl:this.uploadUrl+_2a0,showProgress:false,selectMultipleFiles:false,uploadOnChange:false,tabIndex:-1},_2a1),this.browseBtn);dojo.style(this.f0.insideNode,{"width":"0px"});this._calculateWidth();},_buildParameter:function(){var _2a2="?dataName="+this.storeDataName;if(this._bttParamJSON.dse_processorId){_2a2+="&processId="+this._bttParamJSON.dse_processorId;}if(this._bttParamJSON.dse_sessionId){_2a2+="&sessionId="+this._bttParamJSON.dse_sessionId;}return _2a2;},_calculateWidth:function(){var _2a3=dojo.style(this.inputText.domNode,"width");var _2a4=dojo.style(this.uploadButton.domNode,"width");var _2a5=dojo.style(this.f0.domNode,"width");var _2a6=dojo.style(this.cancelButton.domNode,"width");var _2a7=35;var _2a8=_2a4+_2a5+_2a6+_2a7;var _2a9=_2a3+_2a8;if(this.width){var _2aa=this.width.substr(0,this.width.lastIndexOf("px"));if(_2aa&&_2aa>_2a9){if(this.width&&_2aa>_2a9){dojo.style(this.fileuploader,"width",this.width);dojo.style(this.inputText.domNode,"width",(_2aa-_2a8)+"px");}else{dojo.style(this.fileuploader,"width",_2a9+"px");}}}this._browse_width=dojo.style(this.f0.domNode,"width");},_tabSupport:function(_2ab){if(_2ab){}else{this.inputText.set("tabIndex","-1");this.f0.domNode.setAttribute("tabIndex","-1");this.f0.domNode.setAttribute("wairole","presentation");this.f0.domNode.setAttribute("role","presentation");this.f0.insideNode.setAttribute("wairole","presentation");this.f0.insideNode.setAttribute("role","presentation");this.f0._fileInput.setAttribute("tabIndex","0");}},renderItems:function(){console.debug("this.value",this.value);if(this.value){this._state="done";this._set("state","");try{this.currentFileInfo=dojo.fromJson(this.value);}catch(e){console.debug("error occurs",e);this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.value="";}}else{this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}}this._initRenderItems();this._initUIProperties();},_initRenderItems:function(){this.inputText.set("value","");this._clearMessage();if(this._state=="done"){console.debug("this.currentFileInfo",this.currentFileInfo);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width","0px");this.setVisibility(this.inputText.domNode,false,true);this.setVisibility(this.uploadButton.domNode,false,true);this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML=this.currentFileInfo.name;}else{dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.inputText.domNode,true);this.setVisibility(this.uploadButton.domNode,false,false);this.setVisibility(this.cancelButton.domNode,false,false);}},_initUIProperties:function(){this._visibilityHolder=[];if(this.visibility=="hidden"||this.visibility=="gone"){if(this._state=="none"){this._visibilityHolder.push({dijit:this.inputText.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});this.setVisibility(this.inputText.domNode,false,false);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}else{this._visibilityHolder.push({dijit:this.cancelButton.domNode,visibility:"visible"});this.setVisibility(this.cancelButton.domNode,false,true);this._visibilityHolder.push({dijit:this.statusMessage,visibility:"visible"});dojo.style(this.statusMessage,"visibility","hidden");}}},_clearMessage:function(){this.statusMessage.innerHTML="";this.errorMessage.innerHTML="";dojo.style(this.errorMessage,"display","none");this._showErrorInputBox(false);},connectEvents:function(){dojo.connect(this.f0,"onChange",this,this._handleSelect);dojo.connect(this.uploadButton,"onClick",this,this._handleUpload);dojo.connect(this.f0,"onComplete",this,function(_2ac){var _2ad=_2ac[0];console.debug("response",_2ad);var _2ae=_2ad.name;var _2af=_2ad.errorCode;if(_2ae=="TypeError"||_2af){this.handleError(_2af);}else{this.handleSuccess(_2ad);}});dojo.connect(this.f0,"onCancel",this,function(){if(this.required){if(this._state=="none"&&(!this.f0._fileInput.value)){this._showErrorInputBox(true);this.displayMessage(this._bundle.getMessage("UPLOAD_REQUIRED"));}}});dojo.connect(this.f0,"onError",this,function(){console.debug("onError",this._state);if(this._state=="canceling"){}else{this.handleError();}});dojo.connect(this.cancelButton,"onClick",this,function(){this.reset();});},_handleSelect:function(data){this.setVisibility(this.cancelButton.domNode,true);this.setVisibility(this.uploadButton.domNode,true);this._clearMessage();var _2b0=data[0];this.inputText.set("value",_2b0.name);var mask=_2b0.name.substr(_2b0.name.lastIndexOf(".")+1).toLowerCase();if(this.fileExtension!=""&&this.fileExtension.indexOf(mask)==-1){this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.displayMessage(this._bundle.getMessage("UPLOAD_ERRORFILEMASK",{value:this.fileExtension}));this._showErrorInputBox(true);this._state="error";this._set("state","Error");this.validate();}else{this.setDisabled(this.uploadButton,false);this._isDisabled_uploadButton=false;this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.validate();}},_handleUpload:function(){this._state="uploading";this._set("state","Incomplete");this.setVisibility(this.uploadButton.domNode,false,true);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.domNode,"width","0px");dojo.fadeOut({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML="";var _2b1=document.createElement("img");var _2b2=dojo.moduleUrl("com.ibm.btt.dijit","images/loading.gif");_2b1.setAttribute("src",_2b2.path);this.statusMessage.appendChild(_2b1);var _2b3=document.createElement("span");_2b3.innerHTML="  "+this._bundle.getMessage("UPLOAD_UPLOADING");this.statusMessage.appendChild(_2b3);console.debug("before f0.upload");var uuid=this.getUUID();this.f0.fileUploadUUID=uuid;this.f0.upload();console.debug("after f0.upload");setTimeout(dojo.hitch(this,this._queryFileSizeFromServer),3000);this.onUpload();},getUUID:function(){return dojox.uuid.generateRandomUuid();},_queryFileSizeFromServer:function(){if(this._state=="uploading"&&this.f0.fileUploadUUID){var _2b4={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=querySize",handleAs:"json",load:dojo.hitch(this,function(data){if(data&&this._state=="uploading"){if(data.errorCode=="7"){this.f0.cancel();}}}),error:dojo.hitch(this,function(_2b5){if(this._state=="uploading"){this.reset();}})};dojo.xhrGet(_2b4);}},_clearFizeSizePendingOnServer:function(){if(this.f0.fileUploadUUID){var _2b6={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=cancelPending",handleAs:"json",load:dojo.hitch(this,function(data){console.debug("Cancel the file uploading pending on server successfully");}),error:dojo.hitch(this,function(_2b7){console.debug("Error when canceling the file uploading pending on server");})};dojo.xhrGet(_2b6);}},reset:function(){if(this._state=="done"){this._handleDelete();}else{this._handleCancel();}},_handleCancel:function(){if(this._state=="none"||this._state=="error"){this._resetUIforCancel();this.onCancel();}else{if(this._state=="uploading"){this._state="canceling";this._set("state","Incomplete");this.f0.cancel();this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();var _2b8=function(_2b9,args){this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();};var _2ba=function(_2bb,args){this.displayMessage(this._bundle.getMessage("CANCEL_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._clearFizeSizePendingOnServer();this._deleteFile(_2b8,_2ba);}}},_resetUIforCancel:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.f0._clearUserSelection();this._initRenderItems();},_handleDelete:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();var _2bc=function(_2bd,args){console.debug("sucess delete");this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();this.onDelete();};var _2be=function(_2bf,args){console.debug("error delete");this.displayMessage(this._bundle.getMessage("DELETE_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._deleteFile(_2bc,_2be);},handleError:function(_2c0){this._state="error";this._set("state","Error");this.statusMessage.innerHTML="";this.setVisibility(this.inputText.domNode,true);this._showErrorInputBox(true);dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.uploadButton.domNode,true);this.setDisabled(this.f0,false);this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.setVisibility(this.cancelButton.domNode,true);if(_2c0=="7"){this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE_FILESIZE"));}else{this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE"));}this._clearFizeSizePendingOnServer();this.onError();},handleSuccess:function(_2c1){this._state="done";this._set("state","");this.statusMessage.innerHTML=_2c1.name;this.value=_2c1.name;this.currentFileInfo=_2c1;console.debug("currentFileInfo",this.currentFileInfo);this.setVisibility(this.inputText.domNode,false,true);this.onComplete();},_showErrorInputBox:function(_2c2){if(_2c2){dojo.removeClass(this.inputText.domNode,"inputBox");dojo.addClass(this.inputText.domNode,"errInputBox");}else{dojo.removeClass(this.inputText.domNode,"errInputBox");dojo.addClass(this.inputText.domNode,"inputBox");}},_deleteFile:function(_2c3,_2c4){if(this._bttParamJSON&&this.currentFileInfo){console.debug("currentFileInfo",this.currentFileInfo);var _2c5=this._buildParameter();_2c5+="&fileId="+this.currentFileInfo.fileId;dojo.xhrDelete({url:this.uploadUrl+_2c5,preventCache:true,error:dojo.hitch(this,function(_2c6,args){dojo.hitch(this,_2c4)(_2c6,args);}),load:dojo.hitch(this,function(_2c7,args){if(_2c7.errorCode){dojo.hitch(this,_2c4)(_2c7,args);}else{this.currentFileInfo=null;dojo.hitch(this,_2c3)(_2c7,args);}})});}},onUpload:function(){this.validate();},onComplete:function(){this.validate();},onCancel:function(){this.validate();},onError:function(){this.validate();},onDelete:function(){this.validate();},validate:function(){},getFileInfo:function(){return this.currentFileInfo;},reload:function(){this.value="";this.currentFileInfo=null;this._resetUIforCancel();},_setVisibilityAttr:function(_2c8){this.visibility=_2c8;if(_2c8=="gone"){this._allDisappear();dojo.style(this.domNode,"visibility","hidden");dojo.style(this.domNode,"display","none");}else{if(_2c8=="hidden"){this._allDisappear();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{this._allShowUp();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_allShowUp:function(){dojo.forEach(this._visibilityHolder,function(v){dojo.style(v.dijit,"visibility",v.visibility);});this._visibilityHolder=[];},_holdVisibilityFeatures:function(_2c9){this._visibilityHolder.push({dijit:_2c9,visibility:"visible"});},_allDisappear:function(){if(this.inputText){if(this.isVisible(this.inputText.domNode)){this._holdVisibilityFeatures(this.inputText.domNode);}dojo.style(this.inputText.domNode,"visibility","hidden");}if(this.f0){if(this.isVisible(this.f0.domNode)){this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});}dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}if(this.uploadButton){if(this.isVisible(this.uploadButton.domNode)){this._holdVisibilityFeatures(this.uploadButton.domNode);}dojo.style(this.uploadButton.domNode,"visibility","hidden");}if(this.cancelButton){if(this.isVisible(this.cancelButton.domNode)){this._holdVisibilityFeatures(this.cancelButton.domNode);}dojo.style(this.cancelButton.domNode,"visibility","hidden");}},displayMessage:function(_2ca){dojo.style(this.errorMessage,"display","");if(_2ca){this.errorMessage.innerHTML=_2ca;}},setVisibility:function(_2cb,_2cc,_2cd){if(_2cc){dojo.style(_2cb,"visibility","visible");dojo.style(_2cb,"display","");}else{dojo.style(_2cb,"visibility","hidden");if(_2cd){dojo.style(_2cb,"display","none");}}},isVisible:function(_2ce){var _2cf=dojo.style(_2ce,"visibility");if(_2cf=="visible"){return true;}else{if(_2cf=="inherit"&&dojo.style(this.domNode,"visibility")=="visible"){return true;}else{return false;}}},setDisabled:function(_2d0,_2d1){if(_2d0){_2d0.set("disabled",_2d1);}},setReadOnly:function(_2d2,_2d3){if(_2d2){_2d2.set("readOnly",_2d3);}},onFormSubmit:function(){if(dojo.isIE){this.f0._formNode.innerHTML="";}},_setDisabledAttr:function(_2d4){this.disabled=_2d4;this.inherited(arguments);this.setDisabled(this.f0,_2d4);if(!_2d4){this.setDisabled(this.uploadButton,this._isDisabled_uploadButton);}else{this.setDisabled(this.uploadButton,_2d4);}this.setDisabled(this.cancelButton,_2d4);}});dojo.declare("com.ibm.btt.dijit.FileUploader",[dojox.form.FileUploader],{dfd:null,trueFocus:false,isShowDialog:false,fileUploadUUID:"",cancel:function(){if(this.dfd){this.dfd.cancel();if(dojo.isIE){dojo.io.iframe._frame.contentWindow.document.location.replace("about:blank");}else{dojo.io.iframe._frame.contentWindow.stop();}}},uploadHTML:function(){if(this.selectMultipleFiles){dojo.destroy(this._fileInput);}this._setHtmlPostData();if(this.showProgress){this._animateProgress();}if(this.dfd){dojo.destroy(this.dfd);}this.dfd=dojo.io.iframe.send({url:this.fileUploadUUID?(this.uploadUrl+"&uuid="+this.fileUploadUUID):this.uploadUrl,form:this._formNode,handleAs:"json",error:dojo.hitch(this,function(err){console.debug("error",err.message);this._error("HTML Upload Error:"+err.message);}),load:dojo.hitch(this,function(data,_2d5,_2d6){this._complete(data);})});console.debug("dfd",this.dfd);},_clearUserSelection:function(){this.fileInputs=[];if(dojo.isIE){if(this._fileInput){this._disconnect();this._formNode.removeChild(this._fileInput);}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var nm=this.htmlFieldName;var _2d7=this.id;if(this.selectMultipleFiles){nm+=this.fileCount;_2d7+=this.fileCount;this.fileCount++;}dojo.attr(this._fileInput,{id:this.id,name:nm,type:"file",onKeyPress:function(){return !(window.event&&window.event.keyCode==13);}()});dojo.addClass(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);var real=dojo.marginBox(this._fileInput);dojo.style(this._fileInput,{position:"relative",left:(this.fhtml.nr.w-real.w)+"px",opacity:0});this._connectInput();}else{this._fileInput.value="";}},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:"insideNode"}),onFocusOnInputText:function(){},_connectInput:function(){this._disconnect();this._cons.push(dojo.connect(this._fileInput,"mouseover",this,function(evt){dojo.addClass(this.domNode,this.hoverClass);this.onMouseOver(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseout",this,function(evt){setTimeout(dojo.hitch(this,function(){dojo.removeClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseOut(evt);this._checkHtmlCancel("off");}),0);}));this._cons.push(dojo.connect(this._fileInput,"mousedown",this,function(evt){dojo.addClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseDown(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseup",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);this.onMouseUp(evt);this.onClick(evt);this._checkHtmlCancel("up");}));this._cons.push(dojo.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}]);}));if(this.tabIndex>=0){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this._cons.push(dojo.connect(this._fileInput,"focus",this,function(){if(!dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}else{this.trueFocus=true;}if(this.dialogIsOpen){if(dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}this.onCancel();}this.dialogIsOpen=false;}));if(dojo.isIE){this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.keyCode==dojo.keys.TAB&&this.trueFocus){dojo.addClass(this.domNode,this.activeClass);}else{if(evt.charCode==dojo.keys.SPACE&&this.trueFocus){this.dialogIsOpen=true;}else{if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);}}}}));}else{this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.charCode==dojo.keys.SPACE){this.dialogIsOpen=true;}}));}this._cons.push(dojo.connect(this._fileInput,"blur",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);if(dojo.isIE){this.trueFocus=false;}}));},applyAccessKey:function(){if(this.f0._fileInput&&this.accessKey){this.f0._fileInput.setAttribute("accessKey",this.accessKey);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Group"]){dojo._hasResource["com.ibm.btt.dijit.Group"]=true;dojo.provide("com.ibm.btt.dijit.Group");dojo.declare("com.ibm.btt.dijit.Group",[dijit._Widget,dijit._Templated,dijit._Container,dijit.layout._ContentPaneResizeMixin,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",parseOnLoad:true,isContainer:true,width:"",height:"",templateString:"<fieldset dojoAttachPoint='domNode' class='dijitGroupBase'><legend dojoAttachPoint='textNode'></legend><div dojoAttachPoint='containerNode'></div></fieldset>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"textNode"},width:{node:"containerNode"},height:{node:"containerNode"}}),_setTextAttr:function(_2d8){this.text=_2d8;this.textNode.innerHTML=StringUtil.escapeHTML(this.getI18NString(_2d8));},_setWidthAttr:function(_2d9){if(_2d9!=""){this.width=_2d9;dojo.style(this.domNode,"width",this.handleLenUint(this.width));dojo.style(this.domNode,"overflow","hidden");}},_setHeightAttr:function(_2da){if(_2da!=""){this.height=_2da;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]){dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]=true;dojo.provide("com.ibm.btt.dijit.TabbedPane");dojo.declare("com.ibm.btt.dijit.TabbedPane",[dijit.layout.TabContainer,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"800",height:"600",constructor:function(){this._disableWatch={};},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"com.ibm.btt.dijit.ScrollingTabController":"com.ibm.btt.dijit.TabController";},startup:function(){this.inherited(arguments);this.set("visibility",this.visibility);var _2db=this.getChildren();dojo.forEach(_2db,function(_2dc){this._disableWatch[_2dc.id]=_2dc.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_2dc));},this);this._setInitialTabSelection();},_setVisibilityAttr:function(_2dd){this.inherited(arguments);if(typeof (this.tablist)!=="undefined"){if(_2dd=="gone"){dojo.style(this.tablist.domNode,"visibility","visible");}else{if(_2dd=="hidden"){dojo.style(this.tablist.domNode,"visibility","hidden");}else{dojo.style(this.tablist.domNode,"visibility","visible");}}}},closeChildByIndex:function(i){var _2de=this.getChildren();this.closeChild(_2de[i]);},closeChildById:function(id){var _2df=this.getChildren();for(var i=0;i<_2df.length;i++){if(id===_2df[i].id){this.closeChild(_2df[i]);}}},selectChildByIndex:function(i){var _2e0=this.getChildren();this.selectChild(_2e0[i]);},selectChildById:function(id){var _2e1=this.getChildren();for(var i=0;i<_2e1.length;i++){if(id===_2e1[i].id){this.selectChild(_2e1[i]);break;}}},closeChild:function(_2e2){if(_2e2.get("disabled")!=true){this.inherited(arguments);}},selectChild:function(_2e3){if(_2e3.get("disabled")!=true){this.inherited(arguments);}},hideTabByIndex:function(_2e4){var _2e5=this.getChildren();if(_2e4>-1&&_2e4<_2e5.length){var _2e6=this._getCurrentVisibleTabs();if(_2e6.length>1){var _2e7=_2e5[_2e4];var _2e8=this.tablist.pane2button[_2e7.id];dojo.style(_2e8.domNode,"display","none");_2e8._displayMark="hidden";if(_2e7.selected){var i;for(i=0;i<_2e6.length;i++){if(_2e6[i].id==_2e7.id){break;}}if(i+1<_2e6.length){this.selectChildById(_2e6[i+1].id);}else{this.selectChildById(_2e6[i-1].id);}}}}},showTabByIndex:function(_2e9){var _2ea=this.getChildren();if(_2e9>-1&&_2e9<_2ea.length){var _2eb=this.getChildren()[_2e9];this.showTabById(_2eb.id);}},hideTabById:function(id){var _2ec=this.getChildren();for(var i=0;i<_2ec.length;i++){if(id===_2ec[i].id){this.hideTabByIndex(i);break;}}},showTabById:function(id){var _2ed=this.tablist.pane2button[id];dojo.style(_2ed.domNode,"display","");_2ed._displayMark="visible";},removeChild:function(_2ee){this.inherited(arguments);this._disableWatch[_2ee.id].unwatch();delete this._disableWatch[_2ee.id];},addChild:function(_2ef,_2f0){this.inherited(arguments);this._disableWatch[_2ef.id]=_2ef.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_2ef));},_checkDisabedPane:function(_2f1,name,_2f2,_2f3){if(_2f3==true){var _2f4=this.tablist.pane2button[_2f1.id];_2f4.set("disabled",true);}else{var _2f4=this.tablist.pane2button[_2f1.id];_2f4.set("disabled",false);if(dojo.isIE){dojo.removeAttr(_2f1.domNode,"disabled");}}this._setTabSelection();},_setInitialTabSelection:function(){var _2f5=this._getCurrentVisibleTabs();var _2f6=0;for(var i=0;i<_2f5.length;i++){if(_2f5[i].get("disbaled")==true){_2f6++;}}if(_2f5.length>0&&_2f6==_2f5.length){_2f5[0].disable=false;this.selectChildByIndex(0);_2f5[0].disable=true;}else{this._setTabSelection();}},_setTabSelection:function(){var _2f7=this._getCurrentVisibleTabs();var _2f8=-1;for(var i=0;i<_2f7.length;i++){if(_2f7[i].selected){_2f8=i;}}if(_2f8>-1&&_2f7[_2f8].get("disabled")==true){for(var m=_2f8+1;m<_2f7.length;m++){if(_2f7[m].get("disabled")==false){this.selectChildById(_2f7[m].id);return;}}for(var m=_2f8-1;m>=0;m--){if(_2f7[m].get("disabled")==false){this.selectChildById(_2f7[m].id);return;}}}},_getCurrentVisibleTabs:function(){var _2f9=this.getChildren();var _2fa=[];for(var i=0;i<_2f9.length;i++){var _2fb=this.tablist.pane2button[_2f9[i].id];if(!_2fb._displayMark||_2fb._displayMark=="visible"){_2fa.push(_2f9[i]);}}return _2fa;},_setWidthAttr:function(_2fc){if(_2fc!=""){this.width=_2fc;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2fd){if(_2fd!=""){this.height=_2fd;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});dojo.declare("com.ibm.btt.dijit.ScrollingTabController",[dijit.layout.ScrollingTabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});dojo.declare("com.ibm.btt.dijit.TabController",[dijit.layout.TabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});}if(!dojo._hasResource["com.ibm.btt.dijit.ContentPane"]){dojo._hasResource["com.ibm.btt.dijit.ContentPane"]=true;dojo.provide("com.ibm.btt.dijit.ContentPane");dojo.declare("com.ibm.btt.dijit.ContentPane",[dijit.layout.ContentPane,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin],{disabled:false,_setDisabledAttr:function(_2fe){this._set("disabled",_2fe);},_setTitleAttr:function(_2ff){this.titleKey=_2ff;var _300=this.getI18NString(_2ff);this._set("title",_300);},_getTitleAttr:function(){return this.titleKey;}});}if(!dojo._hasResource["com.ibm.btt.dijit.Hidden"]){dojo._hasResource["com.ibm.btt.dijit.Hidden"]=true;dojo.provide("com.ibm.btt.dijit.Hidden");dojo.declare("com.ibm.btt.dijit.Hidden",[dijit._Widget,dijit._Templated],{value:"",name:"",state:"",type:"hidden",templateString:"<input type='${type}'/>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:{node:"domNode"},name:{node:"domNode"}}),_setValueAttr:function(_301){this.value=_301;this.domNode.value=_301;}});}if(!dojo._hasResource["com.ibm.btt.event.BaseMonitor"]){dojo._hasResource["com.ibm.btt.event.BaseMonitor"]=true;dojo.provide("com.ibm.btt.event.BaseMonitor");dojo.declare("com.ibm.btt.event.BaseMonitor",null,{oldEvent:null,monitorEvent:function(_302,rule){},monitorStartRule:function(_303,rule){},monitorEndRule:function(_304,rule){},monitorCondition:function(_305,rule,_306){},monitorStartAG:function(rule){},monitorEndAG:function(rule){},monitorAGCondition:function(rule,_307){},monitorCallFunctionAction:function(id,_308,_309){},monitorGetPropertyAction:function(id,_30a,_30b){},monitorSetPropertyAction:function(id,_30c,_30d){}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridComparer"]){dojo._hasResource["com.ibm.btt.dijit.GridComparer"]=true;dojo.provide("com.ibm.btt.dijit.GridComparer");dojo.declare("com.ibm.btt.dijit.GridComparer",null,{compareNumber:function(_30e){var cons={};if(_30e["pattern"]){cons["pattern"]=_30e["pattern"];}return function(str1,str2){var num1=dojo.number.parse(str1,cons);if(isNaN(num1)){num1=Number(str1);}var num2=dojo.number.parse(str2,cons);if(isNaN(num2)){num2=Number(str1);}if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareCurrency:function(_30f){return function(str1,str2){var num1=parseFloat(str1);var num2=parseFloat(str2);if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareString:function(_310){return function(str1,str2){if(str1>str2){return 1;}else{if(str1<str2){return -1;}else{return 0;}}};},compareDate:function(_311){return function(str1,str2){var _312="yyyy-MM-dd";if(_311){var _313=_311["pattern"];if(_313){_312=_313;}}var _314={selector:"date",datePattern:_312,fullYear:true};var _315=dojo.date.locale.parse(str1,_314);var _316=dojo.date.locale.parse(str2,_314);var _317=_315?_315:str1;var _318=_316?_316:str2;return dojo.date.compare(_317,_318);};}});(function(){if(com.ibm.btt.dijit.GridComparer.instance==undefined){com.ibm.btt.dijit.GridComparer.instance=new com.ibm.btt.dijit.GridComparer();}})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetSizeMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetSizeMixin",null,{width:"",height:"",_setWidthAttr:function(_319){if(_319!=""){this.width=_319;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_31a){if(_31a!=""){this.height=_31a;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},handleLenUint:function(_31b){var _31c=function(src,_31d){var reg=new RegExp(_31d+"$");return reg.test(src);};if(_31c(_31b,"px")||_31c(_31b,"%")||_31c(_31b,"em")){return _31b;}else{return _31b+"px";}}});}if(!dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]){dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]=true;dojo.provide("com.ibm.btt.event.ConsoleMonitor");dojo.declare("com.ibm.btt.event.ConsoleMonitor",com.ibm.btt.event.BaseMonitor,{monitorStartRule:function(_31e,rule){console.debug("Start Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_31e.id+"."+_31e.e);},monitorEndRule:function(_31f,rule){console.debug("End Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_31f.id+"."+_31f.e);},monitorCondition:function(_320,rule,_321){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_321);},monitorStartAG:function(rule){console.debug("Start Action Group : "+rule.name,rule);},monitorEndAG:function(rule){console.debug("End Action Group : "+rule.name,rule);},monitorAGCondition:function(rule,_322){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_322);},monitorCallFunctionAction:function(id,_323,args,_324){if(typeof (_324)!="undefined"&&_324!=null){console.debug("    CallFunction Action : ",id+"."+_323," , args=",args,", result=",_324);}else{console.debug("    CallFunction Action : ",id+"."+_323," , args=",args);}},monitorGetPropertyAction:function(id,_325,_326){console.debug("    GetProperty Action : ",id+"."+_325+"=="+_326);},monitorSetPropertyAction:function(id,_327,_328){console.debug("    SetProperty Action : ",id+"."+_327+"="+_328);}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]){dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]=true;dojo.provide("com.ibm.btt.util.GlobalFunctions");(function(){function _329(obj){return typeof (obj)=="undefined"||obj==null?true:false;};function _32a(obj){if((obj.constructor===Number&&!isFinite(obj)&&!isNaN(obj))||/^[-+]?\d+$|^[-+]?\d+\.\d+$/.test(obj)){return true;}else{return false;}};function _32b(obj){if(obj.constructor===Number){return obj;}else{return Number(obj);}};function _32c(obj){if(obj.constructor===Date){return true;}else{return false;}};var _32d={getI18NString:function(arg){return I18nUtil.getI18nString(arg);},length:function(str){return _329(str)?undefined:str.toString().length;},subString:function(str,_32e,end){if(!_329(str)&&_32a(_32e)&&_32a(end)){_32e=_32b(_32e);end=_32b(end);if(_32e>end||_32e<0||end>str.toString().length){return undefined;}else{return str.toString().substring(_32e,end);}}else{return undefined;}},indexOf:function(str,_32f){return _329(str)||_329(_32f)?undefined:str.toString().indexOf(_32f.toString());},lastIndexOf:function(str,_330){return _329(str)||_329(_330)?undefined:str.toString().lastIndexOf(_330.toString());},contains:function(str,str2){if(_329(str)||_329(str2)){return false;}else{return this.indexOf(str.toString(),str2.toString())>-1?true:false;}},replace:function(_331,str1,str2){return !_329(_331)&&!_329(str1)&&!_329(str1)?_331.toString().replace(new RegExp(str1.toString(),"g"),str2.toString()):_331;},trim:function(str){return _329(str)?undefined:str.toString().replace(/^(\s|\u00A0)+/,"").replace(/(\s|\u00A0)+$/,"");},concat:function(str1,str2){if(_329(str1)&&_329(str2)){return undefined;}else{if(_329(str1)){return str2.toString();}else{if(_329(str2)){return str1.toString();}else{return str1.toString().concat(str2.toString());}}}},upperCase:function(str){return _329(str)?undefined:str.toString().toUpperCase();},lowerCase:function(str){return _329(str)?undefined:str.toString().toLowerCase();},compare:function(str1,str2){if(_329(str1)||_329(str2)){return undefined;}if(str1.toString()>str2.toString()){return 1;}else{if(str1.toString()<str2.toString()){return -1;}else{return 0;}}},compareIgnoreCase:function(str1,str2){return _329(str1)||_329(str2)?undefined:str1.toString().toUpperCase().localeCompare(str2.toString().toUpperCase());}};var _332={today:function(){return new Date();},after:function(date,days,_333,_334){if(_329(date)||!_32c(date)){return undefined;}if(!_329(days)&&_32a(days)){date.setDate(date.getDate()+_32b(days));}if(!_329(_333)&&_32a(_333)){date.setMonth(date.getMonth()+_32b(_333));}if(!_329(_334)&&_32a(_334)){date.setFullYear(date.getFullYear()+_32b(_334));}return date;},before:function(date,days,_335,_336){if(_329(date)||!_32c(date)){return undefined;}if(!_329(days)&&_32a(days)){date.setDate(date.getDate()-_32b(days));}if(!_329(_335)&&_32a(_335)){date.setMonth(date.getMonth()-_32b(_335));}if(!_329(_336)&&_32a(_336)){date.setFullYear(date.getFullYear()-_32b(_336));}return date;},daysBetween:function(_337,_338){if(_329(_337)||_329(_338)||!_32c(_337)||!_32c(_338)){return undefined;}var _339=Date.UTC(_337.getFullYear(),_337.getMonth(),_337.getDate(),_337.getHours(),_337.getMinutes(),_337.getSeconds(),_337.getMilliseconds())-Date.UTC(_338.getFullYear(),_338.getMonth(),_338.getDate(),_338.getHours(),_338.getMinutes(),_338.getSeconds(),_338.getMilliseconds());return _339/(1000*60*60*24);},naturalDaysBetween:function(_33a,_33b){if(_329(_33a)||_329(_33b)||!_32c(_33a)||!_32c(_33b)){return undefined;}var _33c=Date.UTC(_33a.getFullYear(),_33a.getMonth(),_33a.getDate(),0,0,0,0)-Date.UTC(_33b.getFullYear(),_33b.getMonth(),_33b.getDate(),0,0,0,0);return _33c/(1000*60*60*24);},dayOfWeek:function(date){if(_329(date)||!_32c(date)){return undefined;}return date.getDay();},year:function(date){if(_329(date)||!_32c(date)){return undefined;}return date.getFullYear();},month:function(date){if(_329(date)||!_32c(date)){return undefined;}return date.getMonth();},day:function(date){if(_329(date)||!_32c(date)){return undefined;}return date.getDate();},parseDate:function(obj,_33d){if(_33d){var _33e={};_33e.formatLength="long";_33e.datePattern=_33d;_33e.selector="date";try{var _33f=dojo.date.locale.parse(obj,_33e);if(_33f!=null){return _33f;}else{return undefined;}}catch(ee){return undefined;}}else{if(_329(obj)||!(/^\d{4}-\d{2}-\d{2}$/.test(obj.toString()))){return undefined;}return new Date(obj);}},toString:function(obj){if(_329(obj)||!_32c(obj)){return undefined;}var _340=obj.getMonth()+1;if(_340<10){_340="0"+_340;}var day=obj.getDate();if(day<10){day="0"+day;}return obj.getFullYear()+"-"+_340+"-"+day;}};var _341={round:function(num){if(_329(num)||!_32a(num)){return undefined;}return Math.round(num);},truncate:function(num,flag){if(_329(num)||!_32a(num)){return undefined;}if(flag){return Math.ceil(num);}else{return Math.floor(num);}},absolute:function(num){if(_329(num)||!_32a(num)){return undefined;}return Math.abs(num);}};window.BTTStringFunctions=_32d;window.BTTDateFunctions=_332;window.BTTNumberFunctions=_341;})();}if(!dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]){dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]=true;dojo.provide("com.ibm.btt.dijit.plugins.Pagination");dojo.declare("com.ibm.btt.dijit.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"bttpagination",mode:"simple",timeout:500,keepSingleSelection:false,_paginateable:true,init:function(){this._initParams();this._createPaginators(this.option);this._regApis();if(this.initialMode=="client"){if(this.mode=="simple"){this._requestFirstPage();}else{this.gotoPage("initial");}}},_initParams:function(){var _342=this;var _343=function(_344,_345){return _342.option[_344]?_342.option[_344]:(_342.grid[_344]?_342.grid[_344]:_345);};var _346=function(arg,_347){var tmp=Number(arg);if(isNaN(tmp)){return _347;}else{return tmp;}};this.mode=_343("mode",this.mode);this.timeout=_346(_343("timeout",this.timeout),this.timeout);this.initialMode=_343("initialMode","server");this.totalRowNumber=_343("totalRowNumber",this.totalRowNumber);this.rowsPerPage=_343("rowsPerPage",this.rowsPerPage);this.bttParams=_343("bttParams",{});if(this.mode=="simple"){this._setPageSize(this.totalRowNumber);this.defaultRows=_343("defaultRows",25);this._currentPage=0;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");}if(this.mode=="nonePageSize"){var _348=function(arg){if(arg=="false"){return false;}else{if(arg=="true"){return true;}else{return arg;}}};this.prevBtnEnabled=_343("enablePrevious",false);this.prevBtnEnabled=_348(this.prevBtnEnabled);this.nextBtnEnabled=_343("enableNext",true);this.nextBtnEnabled=_348(this.nextBtnEnabled);}},_setPageSize:function(_349){if(typeof (_349)!="defined"&&_349!=null&&_349!="null"){this.totalRowNumber=_349;this._maxSize=this.totalRowNumber;this.pageSize=this.rowsPerPage;this.totalPageSize=Math.ceil(this.totalRowNumber/this.rowsPerPage);}},_createPaginators:function(_34a){this.paginators=[];if(this.mode=="simple"){if(_34a.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_34a,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_34a,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_34a,{plugin:this}))];}}else{if(this.mode=="nonePageSize"){if(_34a.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_34a,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_34a,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_34a,{plugin:this}))];}}else{console.error("Unsupport pagination mode, please check the parameter definition.");}}dojo.forEach(this.paginators,function(f){f.update();});},_stopEvent:function(_34b){try{dojo.stopEvent(_34b);}catch(e){}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});this.paginators=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage+2);}if(this.mode=="nonePageSize"){this.gotoPage("next");}},prevPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage);}if(this.mode=="nonePageSize"){this.gotoPage("prev");}},gotoFirstPage:function(e){this.gotoPage(1);},gotoLastPage:function(e){this.gotoPage(this.totalPageSize);},gotoPage:function(e){if(this._paginateable==true){if(this.mode=="simple"&&e>=1&&e<=this.totalPageSize&&e!=(this._currentPage+1)){this._requestPageByNum(e);}if(this.mode=="nonePageSize"&&((e=="initial")||(e=="next"&&this.nextBtnEnabled)||(e=="prev"&&this.prevBtnEnabled))&&e!=(this._currentPage+1)){this._fetchData({"pageRequest.pageEvent":e,"mode":this.mode});}this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}},_requestPageByNum:function(e){this._fetchData({"pageRequest.pageEvent":"page","pageRequest.pageNumber":e,"mode":this.mode});this._currentPage=e-1;},_requestFirstPage:function(){this._fetchData({"pageRequest.pageEvent":"initial","pageRequest.pageNumber":1,"mode":this.mode});this._currentPage=0;},_fetchData:function(arg){console.log(this.bttParams);AjaxUtil.xhrPost({handleAs:"text",timeout:this.timeout,success:dojo.hitch(this,this._handleResponse),error:dojo.hitch(this,this._handleError)},dojo.mixin(this.bttParams,arg));},_handleResponse:function(arg){try{var data=dojo.fromJson(arg);if(data.items){if(this.grid.get("store")){var _34c=this.grid.get("store");_34c.close();}this.grid.set("store",new dojo.data.ItemFileWriteStore({data:{items:data.items}}));this.grid._refresh();if(this.mode=="simple"){this._setPageSize(data.totalRowNumber);}if(this.mode=="nonePageSize"){if(typeof (data.enableNext)!="undefined"){}this.nextBtnEnabled=this._setBtnState(data.enableNext);this.prevBtnEnabled=this._setBtnState(data.enablePrevious);}dojo.forEach(this.paginators,function(p){p.update();});}if(this.grid.selection.mode==="single"&&!this.keepSingleSelection){this.grid.selection.deselectAll();}if(data&&data.errMsg){this.grid.showErrorIcon(data.errMsg);}this.grid.onAsyncOK(arguments);}catch(e){(new dijit.Dialog({title:"",content:arg})).show();this.grid.onAsyncError(arguments);}this._paginateable=true;},_setBtnState:function(_34d){if(typeof (_34d)!="undefined"&&_34d!="null"&&_34d!=null){if(_34d==true||_34d=="true"){return true;}else{return false;}}return false;},_handleError:function(arg){console.error("An error occured when loading pagination data from "+AjaxUtil.ajaxOperationUrl);this._paginateable=true;if(arg.dojoType==="timeout"){this.grid.onAsyncTimeOut(arguments);}else{if(arg.status!==undefined){this.grid.onAsyncError(arguments);}}},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("com.ibm.btt.dijit.plugins.SimplePaginator",[dojox.grid.enhanced.plugins._Paginator],{pageSizes:undefined,showAll:true,_updateDescription:function(){},disableBtns:function(){var _34e=null,_34f=this._getCurrentPageNo(),_350=this._getPageCount(),_351=0;var _352=function(node,_353,_354){var _355=node.value,_356=_353?"dojoxGrid"+_355+"Btn":"dojoxGridNumBtnDisabled",_357=_353?"dojoxGrid"+_355+"BtnDisable":"dojoxGridNumBtnDisabled";if(_354){dojo.addClass(node,_357);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_356);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _358=node.value=="prevPage"||node.value=="firstPage"?1:_350;_352(node,true,true);}else{_34e=parseInt(node.value,10);_352(node,false,true);}},this);}});dojo.declare("com.ibm.btt.dijit.plugins.NonePageSizePaginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\r\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\r\n\t\t<tr>\r\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\r\n\t\t\t\t<div dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\r\n\t\t\t</td>\r\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\"></td>\r\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\r\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n",position:"bottom",_maxItemSize:10,description:true,pageStepper:"30em",constructor:function(_359){dojo.mixin(this,_359);this.grid=this.plugin.grid;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_35a,_35b){self._changeSize=g._pendingChangeSize=_35a;self._resultSize=g._pendingResultSize=_35b;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.nextBtnEnabled=this.plugin.nextBtnEnabled?this.plugin.nextBtnEnabled:this.grid.nextBtnEnabled;this.prevBtnEnabled=this.plugin.prevBtnEnabled?this.plugin.prevBtnEnabled:this.grid.prevBtnEnabled;this._updatePageStepper();},disableBtns:function(){var _35c=function(node,_35d,_35e){var _35f=node.value,_360=_35d?"dojoxGrid"+_35f+"Btn":"dojoxGridInactived",_361=_35d?"dojoxGrid"+_35f+"BtnDisable":"dojoxGridActived";if(_35e){dojo.addClass(node,_361);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_360);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");_35c(node,true,true);}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");_35c(node,true,true);}},this);},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _362=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var _363,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){_363=_362(flag,"px")||_362(flag,"%")||_362(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){_363=flag+"px";}}this[t]=_363?true:false;this[t+"Width"]=_363;},this);},_regFocusMgr:function(_364){this.grid.focus.addArea({name:"pagination"+_364,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_364){case "top":this.grid.focus.placeArea("pagination"+_364,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_364,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _365=dojo.trim(this.position.toLowerCase());switch(_365){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_366,_367){var g=this.grid;_366=_366||this._changeSize;_367=_367||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _368=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_368;}if(_367){_366=_367;}if(_366){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_368;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_368;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_368;dojo.style(g.viewsNode,"height",h+"px");var _369=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_369){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,_36a,_36b){var _36c=this.grid.messagesNode;dojo.style(_36c,{"position":"absolute","top":top+"px","width":_36a+"px","height":_36b+"px","z-Index":"100"});},_updateDescription:function(){},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(this.pageStepperDiv.childNodes.length<1){this._createWardBtns();}this._updatePageStepNodeClass();},_createWardBtns:function(){var self=this;var _36d={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _36e=function(_36f,_370,_371){_370=I18nUtil.getI18nString(_370);var node=dojo.create("div",{value:_36f,title:_370,tabindex:1},self.pageStepperDiv,_371);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));dijit.setWaiState(node,"label",_370);var _372=dojo.create("span",{value:_36f,title:_370,innerHTML:_36d[_36f]},node,_371);dojo.addClass(_372,"dojoxGridWardButtonInner");};_36e("prevPage","%com.ibm.btt.dijit.Grid/prevPageBtn","first");_36e("nextPage","%com.ibm.btt.dijit.Grid/nextPageBtn","last");},_updatePageStepNodeClass:function(){var _373=function(node,_374,_375){var _376=node.value,_377=_374?"dojoxGrid"+_376+"Btn":"dojoxGridInactived",_378=_374?"dojoxGrid"+_376+"BtnDisable":"dojoxGridActived";if(_375){dojo.addClass(node,_378);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_377);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.prevBtnEnabled){_373(node,true,false);}else{_373(node,true,true);}}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.nextBtnEnabled){_373(node,true,false);}else{_373(node,true,true);}}},this);},_onFocusPaginator:function(_379,step){if(!this._currentFocusNode){if(step!=0){return this._onFocusPageStepNode(_379);}else{return false;}}else{return false;}},_onFocusPageStepNode:function(_37a){var _37b=this._getPageStepActivableNodes();if(_37a&&_37a.type!=="click"){if(_37b[0]){dijit.focus(_37b[0]);this._currentFocusNode=_37b[0];this.focusArea="pageStep";this.plugin._stopEvent(_37a);return true;}else{return false;}}if(_37a&&_37a.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),_37a.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(_37a);return true;}}return false;},_onBlurPaginator:function(_37c,step){var _37d=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_37d.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(_37e,_37f){if(_37f){return;}if(_37e.altKey||_37e.metaKey){return;}var dk=dojo.keys;if(_37e.keyCode===dk.ENTER||_37e.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(_37e);}}this.plugin._stopEvent(_37e);},_moveFocus:function(_380,_381,evt){var _382;if(this.focusArea=="pageStep"){_382=this._getPageStepActivableNodes();if(this.gotoPageDiv){_382.push(this.gotoPageDiv);}}if(_382.length<1){return;}var _383=dojo.indexOf(_382,this._currentFocusNode);var _384=_383+_381;if(_384>=0&&_384<_382.length){dijit.focus(_382[_384]);this._currentFocusNode=_382[_384];}this.plugin._stopEvent(evt);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageStepNodes:function(){var _385=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_385.push(this.pageStepperDiv.childNodes[i]);}return _385;},_onPageStep:function(e){var g=this.grid;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}switch(e.target.value){case "prevPage":if(e.target.className.indexOf("dojoxGridprevPageBtnDisable")<=0){g.prevPage();}break;case "nextPage":if(e.target.className.indexOf("dojoxGridnextPageBtnDisable")<=0){g.nextPage();}break;}}});dojox.grid.EnhancedGrid.registerPlugin(com.ibm.btt.dijit.plugins.Pagination);}if(!dojo._hasResource["com.ibm.btt.dijit.Dialog"]){dojo._hasResource["com.ibm.btt.dijit.Dialog"]=true;dojo.provide("com.ibm.btt.dijit.Dialog");dojo.declare("com.ibm.btt.dijit.Dialog",[dijit.Dialog,com.ibm.btt.dijit.AbstractWidgetMixin],{closable:false,_setClosableAttr:function(_386){this.closable=_386;if(this.closable){dojo.style(this.closeButtonNode,"display","");}else{dojo.style(this.closeButtonNode,"display","none");}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _387=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_387){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_387){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE&&this.closable){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]){dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]=true;dojo.provide("com.ibm.btt.dijit.ScreenCover");dojo.declare("com.ibm.btt.dijit.ScreenCover",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div class='dijitScreenCover' style='display:none;'><div dojoAttachPoint='containerNode' class='dijitScreenCoverContainer'><div dojoAttachPoint='imageNode' class='dijitScreenCoverImage'></div><div dojoAttachPoint='textNode' class='dijitScreenCoverText'></div></div></div>",text:"%com.ibm.btt.dijit.ScreenCover/waitingText",postCreate:function(){this.inherited(arguments);dojo.body().appendChild(this.domNode);this.domNode.style.display="none";this._events=[];this._events.push(dojo.connect(dojo.global,"onresize",this,this.layout));},layout:function(){var _388=dojo.window.getBox();var bb=dojo._getBorderBox(this.containerNode);var l=Math.floor(_388.l+(_388.w-bb.w)/2);var t=Math.floor(_388.t+(_388.h-bb.h)/2);dojo.style(this.domNode,{top:_388.t+"px",left:_388.l+"px",width:_388.w+"px",height:_388.h+"px"});dojo.style(this.containerNode,{left:l+"px",top:t+"px"});},_setTextAttr:function(_389){this.text=_389;this.textNode.innerHTML=this.getI18NString(_389);},show:function(){this.domNode.style.display="block";this.layout();},hide:function(){this.domNode.style.display="none";},destroy:function(){this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.event.NavigationEngine"]){dojo._hasResource["com.ibm.btt.event.NavigationEngine"]=true;dojo.provide("com.ibm.btt.event.NavigationEngine");dojo.declare("com.ibm.btt.event.NavigationEngine",[com.ibm.btt.event.Engine],{url:"Request",_commandMap:{},_contentPane:null,_dialog:null,_cover:null,constructor:function(){var _38a=this;if(dojo._postLoad){this.postCreate();this.onLoad();}else{dojo.addOnLoad(function(){_38a.postCreate();_38a.onLoad();});}},postCreate:function(){this.registerCommand("render_page",dojo.hitch(this,this.renderPageHandler));this.registerCommand("popup_page",dojo.hitch(this,this.popupPageHandler));this.registerCommand("redirect",dojo.hitch(this,this.redirectPage));this.registerCommand("remote_flow",dojo.hitch(this,this.remoteFlowHandler));this.registerCommand("do_nothing",function(){console.info("do nothing is returned from server side.");});},onLoad:function(e){this._delegateAllFormSubmit();dojo.forEach(dojo.filter(dojo.query("form"),function(form){return form.title&&form.title!="";}),function(form){eval(form.title);});this._getCover().hide();},setUrl:function(_38b){this.url=_38b;},registerCommand:function(type,_38c){this._commandMap[type]=_38c;},_queryAllWidgets:function(node){if(!node){node=dojo.body();}return dojo.query("[widgetId]",node).map(dijit.byNode);},_disposeAllWidgets:function(){this.clearRules();if(this._contentPane){this._destroyContentPane();this._destroyDialog();}else{this._destroyDialog();this._destroyCover();var _38d=this._queryAllWidgets();_38d.forEach(function(_38e){try{_38e.destroy();}catch(e){console.error("An error occured, while destroying the widget. Error:"+e);}});dojo.empty(dojo.body());dijit._masterTT=undefined;}},_unregisterEvents:function(arg,flag){if(flag){while(arg.length>0){dojo.disconnect(arg.pop());}}else{dojo.disconnect(arg);}},_delegateAllFormSubmit:function(){var _38f=this;dojo.forEach(this._queryAllWidgets(),function(_390){if(_390.type!="undefined"&&(_390.type=="save"||_390.type=="cancel")){var _391=_390._onButtonClick;_390._onButtonClick=dojo.hitch(_38f,_38f._onButtonClick,_390,_391);}if(_390.domNode.nodeName==="A"){_390.onClick=dojo.hitch(_38f,_38f._onLinkClick,_390);}if(_390.domNode.nodeName==="FORM"){_390.onSubmit=dojo.hitch(_390,function(e){if(e){if(e.preventDefault){e.preventDefault();}dojo.stopEvent(e);}if(_390.validateOnSubmit){if(!_390.isValid()||!_390.xValid){return false;}}dojo.forEach(_390.getDescendants(),function(_392){if(_392.onFormSubmit){try{_392.onFormSubmit();}catch(e){console.error("Error occured while excuting the onFormSubmit events before form submitted.");}}});var _393=_390._querySubmitButton(e);if(_390.onFormSubmit){_390.onFormSubmit();}_38f._submitFormData(_390,_393);return false;});}});},_onLinkClick:function(link,e){if(link.get("target")!=="_blank"){e.preventDefault();if(link.bttParams){this._submitData(dojo.fromJson(link.bttParams));}}},_onButtonClick:function(_394,_395,e){if(_394.type=="save"&&_394.get("disabled")==false){_394._onClick(e);e.preventDefault();var form=_394._getParentForm();if(form&&_394.bttParams){if(form.onFormSubmit){form.onFormSubmit();}this._submitData(dojo.mixin(form.get("validValue"),dojo.fromJson(_394.bttParams)));}}else{if(_394.type=="cancel"&&_394.get("disabled")==false){_394._onClick(e);e.preventDefault();if(_394.bttParams){this._submitData(dojo.fromJson(_394.bttParams));}}else{_395.apply(_394,[e]);}}},_submitFormData:function(form,_396){if(_396&&_396.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(_396.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{if(form.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(form.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{console.log("Do not find default BTT Params on form for user press enter operation.");}}},_submitData:function(data){AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:this.url,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},data);this._getCover().show();},_handleError:function(e,xhr){var _397;if(xhr){var _398=xhr.xhr.responseText;if(_398&&_398!=""){try{_398=dojo.fromJson(_398);if(_398["page"]){_397=_398["page"];}}catch(e){_397=_398;}}}if(!_397){if(e.message){_397=e.message;}else{_397="An error occured. Messsage : "+e;}}this._disposeAllWidgets();dojo.body().innerHTML=_397;this._getCover().hide();},_handleFormResponse:function(e){var _399;if(this._commandMap[e["command"]]){try{_399=this._commandMap[e["command"]](e);}catch(e){this._handleError("An error occured while excuting the handler:"+e["dse_clientCommand"]+" error:"+e);}}else{this._handleError("Can not find corresponding command handler for command type='"+e["dse_clientCommand"]+"'");}if(_399!==false){this._getCover().hide();}},createContentPane:function(){return new com.ibm.btt.dijit.ContentPane({"style":"padding:0px;",refreshOnShow:false},dojo.create("div",null,dojo.body(),"last"));},_getContentPane:function(data){if(!this._contentPane){this._contentPane=this.createContentPane();}if(this._cpOnLoadEvt){this._unregisterEvents(this._cpOnLoadEvt);}if(this._cpOnErrorEvt){this._unregisterEvents(this._cpOnErrorEvt);}this._cpOnErrorEvt=dojo.connect(this._contentPane,"onContentError",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));this._cpOnLoadEvt=dojo.connect(this._contentPane,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));return this._contentPane;},_destroyContentPane:function(){if(this._contentPane){this._unregisterEvents(this._cpOnLoadEvt);this._cpOnLoadEvt=undefined;this._unregisterEvents(this._cpOnErrorEvt);this._cpOnErrorEvt=undefined;try{this._contentPane.destroyDescendants();this._contentPane.destroy();}catch(e){}this._contentPane=undefined;}},createDialog:function(){var _39a=dojo.window.getBox();return new com.ibm.btt.dijit.Dialog({title:"",style:"overflow-y:auto;overflow-x:auto;max-width:"+_39a.w+"px;max-height:"+_39a.h+"px",closable:false});},_getDialog:function(data){if(!this._dialog){var _39b=dojo.window.getBox();this._dialog=this.createDialog();}if(this._dialogOnLoadEvt){this._unregisterEvents(this._dialogOnLoadEvt);}this._dialogOnLoadEvt=dojo.connect(this._dialog,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._dialog));return this._dialog;},_destroyDialog:function(){if(this._dialog){this._unregisterEvents(this._dialogOnLoadEvt);this._dialogOnLoadEvt=undefined;this._dialog.hide();try{this._dialog.destroyDescendants();this._dialog.destroy();}catch(e){}this._dialog=undefined;}},_getCover:function(){if(!this._cover){this._cover=new com.ibm.btt.dijit.ScreenCover();}return this._cover;},_destroyCover:function(){if(this._cover){this._cover.destroy();this._cover=undefined;}},isECARuleFile:function(src,_39c){var _39d=function(src,_39e){var reg=new RegExp(_39e+"$");return reg.test(src);};return _39d(src,_39c+".js");},_afterPageLoaded:function(data,_39f){if(data["page_name"]){var _3a0=this;dojo.query("script",_39f.domNode).forEach(dojo.hitch(this,function(_3a1){if(_3a1.src&&this.isECARuleFile(_3a1.src,data["page_name"])){_3a0._registerECAEvent(data["page_name"],_3a1.src);}}));}this.onLoad(data,_39f);},_registerECAEvent:function(name,url){var _3a2={url:url,handleAs:"text",load:dojo.hitch(this,function(e){dojo.eval(e);if(window[name]){delete window[name];}})};dojo.xhrGet(_3a2);},_parsenextPageUrl:function(e){var data=dojo.fromJson(e.data);var url=["Request?dse_applicationId="+data["dse_applicationId"]];url.push("dse_processorId="+data["dse_processorId"]);url.push("dse_sessionId="+data["dse_sessionId"]);url.push("dse_processorState="+data["dse_processorState"]);url.push("dse_nextEventName="+data["dse_nextEventName"]);url.push("dse_operationName="+data["dse_operationName"]);url.push("dse_pageId="+data["dse_pageId"]);return url.join("&");},redirectPage:function(e){location.href=this._parsenextPageUrl(e);},popupPageHandler:function(data){var _3a3=this._getDialog(data);_3a3.destroyDescendants();_3a3.startup();if(!_3a3.get("open")){_3a3.show();}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_3a3.set("content",page);},renderPageHandler:function(data){this._getCover().show();this._disposeAllWidgets();if(this._dialog&&this._dialog.get("open")){this._dialog.hide();}var _3a4=this._getContentPane(data);var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_3a4.set("content",page);_3a4.startup();},remoteFlowHandler:function(data){this._getCover().show();var _3a5=dojo.fromJson(data["data"]);console.info("############ remoteFlowHandler : ",_3a5);if(_3a5.dse_remoteFlowID){this.url=_3a5.dse_RemoteRequest_URL;AjaxUtil.ajaxOperationUrl=_3a5.dse_RemoteAjaxOp_URL;}else{this.url=_3a5.dse_RemoteSubFlow_URL;AjaxUtil.ajaxOperationUrl=_3a5.dse_remote_parent_AjaxURL;}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:_3a5.dse_RemoteSubFlow_URL,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},_3a5);return false;},destroy:function(){this.inherited(arguments);this._commandMap=undefined;this._destroyContentPane();this._destroyCover();this._destroyDialog();}});}
